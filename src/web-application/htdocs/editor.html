<!doctype html>
<html>
<head>
    <title>WeScheme</title>
    <style type="text/css">*:focus { outline: 0; }</style>

    <!-- begin script tags -->
    <script language="javascript">
    var _editor_url  = "/xinha/";
    var _editor_lang = "en";
    </script>
    <script type="text/javascript" src="xinha/XinhaCore.js"></script>

    <script type="text/javascript" src="xinha-config.js"></script>



<script language="javascript">
function compile() {
    var editor = xinha_editors.sourceEditor;
    var content = editor.plugins.GetCode.instance.getCode(editor);
    var form = document.createElement("form");

    alert("content: " + content);
    form.setAttribute("method", "post");
    form.setAttribute("action", "/js-compile/world.html")
    var hiddenField = document.createElement("input");
    hiddenField.setAttribute("type", "hidden");
    hiddenField.setAttribute("name", "program");
    hiddenField.setAttribute("value", content);
    form.appendChild(hiddenField);

    document.body.appendChild(form);
    form.submit();
}
</script>





    <!-- end script tags -->
</head>
<body>
    <h3>WeScheme</h3>

    <div style="padding: 20px">
      <input type="button" value="Run" onclick="compile()">
    </div>


    <textarea id="sourceEditor" style="width: 100%; height: 500px">;; Enter your world program here.<br>
(require (lib "world.ss" "moby" "stub"))<br>
<br>
(define WIDTH 320)
(define HEIGHT 480)
<br>
(define INITIAL-WORLD 100)
<br>
(define (draw w)
  (place-image (circle w "solid" "blue")
               (/ WIDTH 2)
               (/ HEIGHT 2)
               (empty-scene WIDTH HEIGHT)))
<br>
<br>
(define (tick w)
  (sub1 w))
<br><br>
(define (done? w)
  (= w 1))
<br><br>
(big-bang WIDTH HEIGHT INITIAL-WORLD
          (on-tick 1/20 tick)
          (on-redraw draw)
          (stop-when done?))
</textarea>

</body>
</html>
