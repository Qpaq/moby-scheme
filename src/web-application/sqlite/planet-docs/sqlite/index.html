<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text-html; charset=utf-8" /><title>SQLite: An interface to SQLite databases</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default" /><script type="text/javascript" src="scribble-common.js"></script></head><body><div class="tocset"><div class="tocview"><div class="tocviewlist" style="margin-bottom: 1em;"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="/" class="tocviewselflink">SQLite:<span class="mywbr"> </span> An interface to SQLite databases</a></td></tr></table></div><div class="tocviewsublistonly" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="/#(part._.A.P.I)" class="tocviewlink">API</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="/#(part._.Notes)" class="tocviewlink">Notes</a></td></tr></table></div></div></div><div class="tocsub"><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">1<tt>&nbsp;</tt></span><a href="#(part._.A.P.I)" class="tocsubseclink">API</a></td></tr><tr><td><a href="#(def._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._exn~3asqlite))" class="tocsubnonseclink"><span title="Provided from: (planet jaymccarthy/sqlite:3)"><span class="schemesymbol">exn:<span class="mywbr"> </span>sqlite</span></span></a></td></tr><tr><td><a href="#(def._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._db~3f))" class="tocsubnonseclink"><span title="Provided from: (planet jaymccarthy/sqlite:3)"><span class="schemesymbol">db?</span></span></a></td></tr><tr><td><a href="#(def._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._open))" class="tocsubnonseclink"><span title="Provided from: (planet jaymccarthy/sqlite:3)"><span class="schemesymbol">open</span></span></a></td></tr><tr><td><a href="#(def._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._close))" class="tocsubnonseclink"><span title="Provided from: (planet jaymccarthy/sqlite:3)"><span class="schemesymbol">close</span></span></a></td></tr><tr><td><a href="#(def._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._exec))" class="tocsubnonseclink"><span title="Provided from: (planet jaymccarthy/sqlite:3)"><span class="schemesymbol">exec</span></span></a></td></tr><tr><td><a href="#(def._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._exec/ignore))" class="tocsubnonseclink"><span title="Provided from: (planet jaymccarthy/sqlite:3)"><span class="schemesymbol">exec/<span class="mywbr"> </span>ignore</span></span></a></td></tr><tr><td><a href="#(def._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._insert))" class="tocsubnonseclink"><span title="Provided from: (planet jaymccarthy/sqlite:3)"><span class="schemesymbol">insert</span></span></a></td></tr><tr><td><a href="#(def._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._select))" class="tocsubnonseclink"><span title="Provided from: (planet jaymccarthy/sqlite:3)"><span class="schemesymbol">select</span></span></a></td></tr><tr><td><a href="#(def._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._prepare))" class="tocsubnonseclink"><span title="Provided from: (planet jaymccarthy/sqlite:3)"><span class="schemesymbol">prepare</span></span></a></td></tr><tr><td><a href="#(def._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._load-params))" class="tocsubnonseclink"><span title="Provided from: (planet jaymccarthy/sqlite:3)"><span class="schemesymbol">load-<wbr></wbr>params</span></span></a></td></tr><tr><td><a href="#(def._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._step))" class="tocsubnonseclink"><span title="Provided from: (planet jaymccarthy/sqlite:3)"><span class="schemesymbol">step</span></span></a></td></tr><tr><td><a href="#(def._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._step*))" class="tocsubnonseclink"><span title="Provided from: (planet jaymccarthy/sqlite:3)"><span class="schemesymbol">step*</span></span></a></td></tr><tr><td><a href="#(def._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._run))" class="tocsubnonseclink"><span title="Provided from: (planet jaymccarthy/sqlite:3)"><span class="schemesymbol">run</span></span></a></td></tr><tr><td><a href="#(def._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._reset))" class="tocsubnonseclink"><span title="Provided from: (planet jaymccarthy/sqlite:3)"><span class="schemesymbol">reset</span></span></a></td></tr><tr><td><a href="#(def._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._finalize))" class="tocsubnonseclink"><span title="Provided from: (planet jaymccarthy/sqlite:3)"><span class="schemesymbol">finalize</span></span></a></td></tr><tr><td><a href="#(def._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._with-transaction*))" class="tocsubnonseclink"><span title="Provided from: (planet jaymccarthy/sqlite:3)"><span class="schemesymbol">with-<wbr></wbr>transaction*</span></span></a></td></tr><tr><td><a href="#(form._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._with-transaction))" class="tocsubnonseclink"><span title="Provided from: (planet jaymccarthy/sqlite:3)"><span class="schemesymbol">with-<wbr></wbr>transaction</span></span></a></td></tr><tr><td><a href="#(form._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._with-transaction/lock))" class="tocsubnonseclink"><span title="Provided from: (planet jaymccarthy/sqlite:3)"><span class="schemesymbol">with-<wbr></wbr>transaction/<span class="mywbr"> </span>lock</span></span></a></td></tr><tr><td><a href="#(def._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._errmsg))" class="tocsubnonseclink"><span title="Provided from: (planet jaymccarthy/sqlite:3)"><span class="schemesymbol">errmsg</span></span></a></td></tr><tr><td><a href="#(def._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._changes-count))" class="tocsubnonseclink"><span title="Provided from: (planet jaymccarthy/sqlite:3)"><span class="schemesymbol">changes-<wbr></wbr>count</span></span></a></td></tr><tr><td><a href="#(def._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._total-changes-count))" class="tocsubnonseclink"><span title="Provided from: (planet jaymccarthy/sqlite:3)"><span class="schemesymbol">total-<wbr></wbr>changes-<wbr></wbr>count</span></span></a></td></tr><tr><td><span class="tocsublinknumber">2<tt>&nbsp;</tt></span><a href="#(part._.Notes)" class="tocsubseclink">Notes</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">Version: 4.1.3.8</span></div><h2><a name="(part._.S.Q.Lite__.An_interface_to_.S.Q.Lite_databases)"></a>SQLite: An interface to SQLite databases</h2><p>By Jay McCarthy (jay at cs dot byu dot edu) &amp; Noel Welsh (noelwelsh at GMail)</p><p>SQLite gives you access to SQLite database in PLT Scheme.</p><h3>1<tt>&nbsp;</tt><a name="(part._.A.P.I)"></a><a name="(mod-path._(planet._jaymccarthy/sqlite~3a3))"></a>API</h3><p><table cellspacing="0" class="defmodule"><tr><td><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol"><a href="/servlets/doc-search.ss?tag=KCgxKSAwICgpIDAgKCkgKCkgKGMgZm9ybSBjIChjIChjIGxpYiBjICh1IC4gc2NoZW1lL2Jh%0D%0Ac2Uuc3MpKSBjIHJlcXVpcmUpKSk%3D%0D%0A" class="schemesyntaxlink">require</a></span><span class="stt"> </span><span class="schemeparen">(</span><span class="schemesymbol">planet</span><span class="stt"> </span><span class="schemesymbol">jaymccarthy/sqlite:3</span><span class="schemeparen">)</span><span class="schemeparen">)</span></td></tr></table></p><p><table cellspacing="0" class="boxed"><tr><td><table cellspacing="0"><tr><td><span class="schemeparen">(struct</span></td><td><span class="hspace">&nbsp;</span></td><td><a name="(dep._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._exn~3asqlite-continuation-marks))"></a><a name="(def._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._exn~3asqlite-continuation-marks))"></a><a name="(dep._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._exn~3asqlite-message))"></a><a name="(def._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._exn~3asqlite-message))"></a><a name="(dep._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._make-exn~3asqlite))"></a><a name="(def._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._make-exn~3asqlite))"></a><a name="(dep._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._exn~3asqlite~3f))"></a><a name="(def._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._exn~3asqlite~3f))"></a><a name="(dep._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._struct~3aexn~3asqlite))"></a><a name="(def._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._struct~3aexn~3asqlite))"></a><a name="(dep._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._exn~3asqlite))"></a><a name="(def._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._exn~3asqlite))"></a><span title="Provided from: (planet jaymccarthy/sqlite:3)"><span class="schemesymbol">exn:sqlite</span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="schemeparen">(</span><span class="schemesymbol">message</span><span class="stt"> </span><span class="schemesymbol">continuation-marks</span><span class="schemeparen">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td colspan="3"><span class="schemeparen">#:transparent</span><span class="schemeparen">)</span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemesymbol">message</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol">string?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemesymbol">continuation-marks</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol">continuation-mark-set?</span></td></tr></table></p><p>This exception is thrown whenever the library encounters an
error.  The <span class="schemesymbol">message</span> field gives more information about the
error.</p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><a name="(dep._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._db~3f))"></a><a name="(def._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._db~3f))"></a><span title="Provided from: (planet jaymccarthy/sqlite:3)"><span class="schemesymbol">db?</span></span><span class="hspace">&nbsp;</span><span class="schemevariable">x</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="schemesymbol">boolean?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">x</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol">any/c</span></td></tr></table></p><p>Identifies if <span class="schemevariable">x</span> represents an SQLite database.</p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><a name="(dep._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._open))"></a><a name="(def._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._open))"></a><span title="Provided from: (planet jaymccarthy/sqlite:3)"><span class="schemesymbol">open</span></span><span class="hspace">&nbsp;</span><span class="schemevariable">db-path</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="schemesymbol">db?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">db-path</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">or/c</span><span class="hspace">&nbsp;</span><span class="schemesymbol">path-string?</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">symbols</span><span class="hspace">&nbsp;</span><span class="schemevalue">'</span><span class="schemevalue">:memory:</span><span class="hspace">&nbsp;</span><span class="schemevalue">'</span><span class="schemevalue">:temp:</span><span class="schemeparen">)</span><span class="schemeparen">)</span></td></tr></table></p><p>Opens the SQLite database at <span class="schemevariable">db-path</span>.</p><p>If <span class="schemevalue">'</span><span class="schemevalue">:memory:</span> or <span class="schemevalue">'</span><span class="schemevalue">:temp:</span> are passed they correspond to the
string arguments <span class="schemevalue">":memory:"</span> and <span class="schemevalue">""</span> to SQLite&rsquo;s open function.
These correspond to a private, temporary in-memory database and a private, temporary
on-disk database.</p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><a name="(dep._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._close))"></a><a name="(def._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._close))"></a><span title="Provided from: (planet jaymccarthy/sqlite:3)"><span class="schemesymbol">close</span></span><span class="hspace">&nbsp;</span><span class="schemevariable">db</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="schemesymbol">void</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">db</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol">db?</span></td></tr></table></p><p>Closes the database referred to by <span class="schemevariable">db</span>.</p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><a name="(dep._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._exec))"></a><a name="(def._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._exec))"></a><span title="Provided from: (planet jaymccarthy/sqlite:3)"><span class="schemesymbol">exec</span></span><span class="hspace">&nbsp;</span><span class="schemevariable">db</span><span class="hspace">&nbsp;</span><span class="schemevariable">sql</span><span class="hspace">&nbsp;</span><span class="schemevariable">callback</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="schemesymbol">void</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">db</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol">db?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">sql</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol">string?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">callback</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemeparen">(</span><span class="schemesymbol">listof</span><span class="hspace">&nbsp;</span><span class="schemesymbol">vector?</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">listof</span><span class="hspace">&nbsp;</span><span class="schemesymbol">vector?</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemeparen">. </span><span class="schemesymbol">-&gt;</span><span class="schemeparen"> .</span><span class="hspace">&nbsp;</span><span class="schemesymbol">integer?</span><span class="schemeparen">)</span></td></tr></table></p><p>Executes <span class="schemevariable">sql</span> with the given <span class="schemevariable">db</span>, calling <span class="schemevariable">callback</span> for
each row of the results.  <span class="schemevariable">callback</span> is passed two
vectors, one of the column names and one of the column
values.  <span class="schemevariable">callback</span> returns an integer status code.  If
the status code is anything other than zero execution halts
with an exception. If the query does not return results, <span class="schemevariable">callback</span> will not be called.</p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><a name="(dep._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._exec/ignore))"></a><a name="(def._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._exec/ignore))"></a><span title="Provided from: (planet jaymccarthy/sqlite:3)"><span class="schemesymbol">exec/ignore</span></span><span class="hspace">&nbsp;</span><span class="schemevariable">db</span><span class="hspace">&nbsp;</span><span class="schemevariable">sql</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="schemesymbol">void</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">db</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol">db?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">sql</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol">string?</span></td></tr></table></p><p>A wrapper around <span class="schemesymbol">exec</span> that provides a void callback.</p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><a name="(dep._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._insert))"></a><a name="(def._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._insert))"></a><span title="Provided from: (planet jaymccarthy/sqlite:3)"><span class="schemesymbol">insert</span></span><span class="hspace">&nbsp;</span><span class="schemevariable">db</span><span class="hspace">&nbsp;</span><span class="schemevariable">sql</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="schemesymbol">integer?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">db</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol">db?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">sql</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol">string?</span></td></tr></table></p><p>Executes <span class="schemevariable">sql</span> with the <span class="schemevariable">db</span>.  The query is assumed to be an
INSERT statement, and the result is the ID of the last row
inserted.  This is useful when using AUTOINCREMENT or
INTEGER PRIMARY KEY fields as the database will choose a
unique value for this field</p><p>If the SQL is not an insertion statement it is still
executed, the results if any are discarded, and the returned
value is unspecified.</p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><a name="(dep._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._select))"></a><a name="(def._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._select))"></a><span title="Provided from: (planet jaymccarthy/sqlite:3)"><span class="schemesymbol">select</span></span><span class="hspace">&nbsp;</span><span class="schemevariable">db</span><span class="hspace">&nbsp;</span><span class="schemevariable">sql</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">listof</span><span class="hspace">&nbsp;</span><span class="schemesymbol">vector?</span><span class="schemeparen">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">db</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol">db?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">sql</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol">string?</span></td></tr></table></p><p>Executes <span class="schemevariable">sql</span> with the given <span class="schemevariable">db</span>, collating the results in to
a list where each element is a vector of the columns values
as strings.  The first vector contains the column names.  If
the statement returns no results an empty list is returned.</p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><a name="(dep._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._prepare))"></a><a name="(def._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._prepare))"></a><span title="Provided from: (planet jaymccarthy/sqlite:3)"><span class="schemesymbol">prepare</span></span><span class="hspace">&nbsp;</span><span class="schemevariable">db</span><span class="hspace">&nbsp;</span><span class="schemevariable">sql</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="schemesymbol">statement?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">db</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol">db?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">sql</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol">string?</span></td></tr></table></p><p>Compiles <span class="schemevariable">sql</span> into a statement object for the given
<span class="schemevariable">db</span>. The query may contain &ldquo;?&rdquo; to mark a parameter.  Make
sure you free the statement after use with <span class="schemesymbol">finalize</span>.  A
statement can be reused by calling <span class="schemesymbol">reset</span>.</p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><a name="(dep._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._load-params))"></a><a name="(def._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._load-params))"></a><span title="Provided from: (planet jaymccarthy/sqlite:3)"><span class="schemesymbol">load-params</span></span><span class="hspace">&nbsp;</span><span class="schemevariable">stmt</span><span class="hspace">&nbsp;</span><span class="schemevariable">param</span><span class="hspace">&nbsp;</span><span class="schememeta">...</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="schemesymbol">void</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">stmt</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol">statement?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">param</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol">any/c</span></td></tr></table></p><p>Loads <span class="schemevariable">param</span>s into <span class="schemevariable">stmt</span>, filling in the `?&rsquo;s.</p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><a name="(dep._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._step))"></a><a name="(def._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._step))"></a><span title="Provided from: (planet jaymccarthy/sqlite:3)"><span class="schemesymbol">step</span></span><span class="hspace">&nbsp;</span><span class="schemevariable">stmt</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">or/c</span><span class="hspace">&nbsp;</span><span class="schemesymbol">vector?</span><span class="hspace">&nbsp;</span><span class="schemesymbol">false/c</span><span class="schemeparen">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">stmt</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol">statement?</span></td></tr></table></p><p>Steps <span class="schemevariable">stmt</span> to the next result, returning the column
values as a vector, or <span class="schemevalue">#f</span> if the statement does not
return values or there are no more values.  Unlike <span class="schemesymbol">select</span>,
values are converted to the appropriate Scheme type:</p><p>A NULL becomes <span class="schemevalue">#f</span>. An INTEGER becomes an integer. A FLOAT becomes an inexact number. A STRING or TEXT becomes a string. A BLOB becomes a bytes.</p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><a name="(dep._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._step*))"></a><a name="(def._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._step*))"></a><span title="Provided from: (planet jaymccarthy/sqlite:3)"><span class="schemesymbol">step*</span></span><span class="hspace">&nbsp;</span><span class="schemevariable">stmt</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">listof</span><span class="hspace">&nbsp;</span><span class="schemesymbol">vector?</span><span class="schemeparen">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">stmt</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol">statement?</span></td></tr></table></p><p>Runs <span class="schemesymbol">step</span> until it is done collecting the results in a
list.  Use this rather than <span class="schemesymbol">select</span> or <span class="schemesymbol">exec</span> when you want to
use a placeholder (?) in the query and have SQLite do the
quoting for you.</p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><a name="(dep._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._run))"></a><a name="(def._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._run))"></a><span title="Provided from: (planet jaymccarthy/sqlite:3)"><span class="schemesymbol">run</span></span><span class="hspace">&nbsp;</span><span class="schemevariable">stmt</span><span class="hspace">&nbsp;</span><span class="schemevariable">param</span><span class="hspace">&nbsp;</span><span class="schememeta">...</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="schemesymbol">void</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">stmt</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol">statement</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">param</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol">any/c</span></td></tr></table></p><p>Loads the <span class="schemevariable">param</span>s in the statement, then runs the
statement. (If the statement returns results, they are not
available.) (Use for UPDATE and INSERT)</p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><a name="(dep._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._reset))"></a><a name="(def._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._reset))"></a><span title="Provided from: (planet jaymccarthy/sqlite:3)"><span class="schemesymbol">reset</span></span><span class="hspace">&nbsp;</span><span class="schemevariable">stmt</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="schemesymbol">void</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">stmt</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol">statement?</span></td></tr></table></p><p>Resets a statement for re-execution.</p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><a name="(dep._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._finalize))"></a><a name="(def._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._finalize))"></a><span title="Provided from: (planet jaymccarthy/sqlite:3)"><span class="schemesymbol">finalize</span></span><span class="hspace">&nbsp;</span><span class="schemevariable">stmt</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="schemesymbol">void</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">stmt</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol">statement?</span></td></tr></table></p><p>Releases the resources held by a statement.</p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><a name="(dep._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._with-transaction*))"></a><a name="(def._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._with-transaction*))"></a><span title="Provided from: (planet jaymccarthy/sqlite:3)"><span class="schemesymbol">with-transaction*</span></span><span class="hspace">&nbsp;</span><span class="schemevariable">db</span><span class="hspace">&nbsp;</span><span class="schemevariable">lock-type</span><span class="hspace">&nbsp;</span><span class="schemevariable">action</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="schemesymbol">any/c</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">db</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol">db?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">lock-type</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemesymbol">symbols</span><span class="hspace">&nbsp;</span><span class="schemevalue">'</span><span class="schemevalue">none</span><span class="hspace">&nbsp;</span><span class="schemevalue">'</span><span class="schemevalue">deferred</span><span class="hspace">&nbsp;</span><span class="schemevalue">'</span><span class="schemevalue">immediate</span><span class="hspace">&nbsp;</span><span class="schemevalue">'</span><span class="schemevalue">exclusive</span><span class="schemeparen">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">action</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemeparen">(</span><span class="schemesymbol">-&gt;</span><span class="hspace">&nbsp;</span><span class="schemesymbol">void</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemeparen">. </span><span class="schemesymbol">-&gt;</span><span class="schemeparen"> .</span><span class="hspace">&nbsp;</span><span class="schemesymbol">any/c</span><span class="schemeparen">)</span></td></tr></table></p><p>Runs <span class="schemevariable">action</span> in a transaction in the given database with
the given lock type, returning the result of the action.
The action is passed a function of one argument which aborts
the transaction when called.  If the transaction is aborted
the result of the with-transaction* expression is the value
passed to the abort function.  If control leaves the action
via an exception or other continuation jump (i.e. without
action exiting normally) the transaction is aborted.</p><p>Refer to the <a href="http://www.sqlite.org/lockingv3.html">SQLite documentation</a> for the meaning of the lock-types.</p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><a name="(dep._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._with-transaction))"></a><a name="(form._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._with-transaction))"></a><span title="Provided from: (planet jaymccarthy/sqlite:3)"><span class="schemesymbol">with-transaction</span></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemevariable">db</span><span class="hspace">&nbsp;</span><span class="schemevariable">fail</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemevariable">body</span><span class="hspace">&nbsp;</span><span class="schememeta">...</span><span class="schemeparen">)</span></td></tr></table></p><p>Equivalent to:
<span class="schemeparen">(</span><span class="schemesymbol">with-transaction*</span><span class="stt"> </span><span class="schemevariable">db</span><span class="stt"> </span><span class="schemevalue">'</span><span class="schemevalue">none</span><span class="stt"> </span><span class="schemeparen">(</span><span class="schemesymbol">lambda</span><span class="stt"> </span><span class="schemeparen">(</span><span class="schemevariable">fail</span><span class="schemeparen">)</span><span class="stt"> </span><span class="schemevariable">body</span><span class="stt"> </span><span class="schememeta">...</span><span class="schemeparen">)</span><span class="schemeparen">)</span>.</p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><a name="(dep._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._with-transaction/lock))"></a><a name="(form._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._with-transaction/lock))"></a><span title="Provided from: (planet jaymccarthy/sqlite:3)"><span class="schemesymbol">with-transaction/lock</span></span><span class="hspace">&nbsp;</span><span class="schemeparen">(</span><span class="schemevariable">db</span><span class="hspace">&nbsp;</span><span class="schemevariable">lock-type</span><span class="hspace">&nbsp;</span><span class="schemevariable">fail</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span><span class="schemevariable">body</span><span class="hspace">&nbsp;</span><span class="schememeta">...</span><span class="schemeparen">)</span></td></tr></table></p><p>Equivalent to:
<span class="schemeparen">(</span><span class="schemesymbol">with-transaction*</span><span class="stt"> </span><span class="schemevariable">db</span><span class="stt"> </span><span class="schemevariable">lock-type</span><span class="stt"> </span><span class="schemeparen">(</span><span class="schemesymbol">lambda</span><span class="stt"> </span><span class="schemeparen">(</span><span class="schemevariable">fail</span><span class="schemeparen">)</span><span class="stt"> </span><span class="schemevariable">body</span><span class="stt"> </span><span class="schememeta">...</span><span class="schemeparen">)</span><span class="schemeparen">)</span>.</p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><a name="(dep._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._errmsg))"></a><a name="(def._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._errmsg))"></a><span title="Provided from: (planet jaymccarthy/sqlite:3)"><span class="schemesymbol">errmsg</span></span><span class="hspace">&nbsp;</span><span class="schemevariable">db</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="schemesymbol">string?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">db</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol">db?</span></td></tr></table></p><p>Returns the message for the last error with the database.</p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><a name="(dep._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._changes-count))"></a><a name="(def._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._changes-count))"></a><span title="Provided from: (planet jaymccarthy/sqlite:3)"><span class="schemesymbol">changes-count</span></span><span class="hspace">&nbsp;</span><span class="schemevariable">db</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="schemesymbol">integer?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">db</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol">db?</span></td></tr></table></p><p>Returns a count of how many rows were changed by the most
recently completed INSERT, UPDATE, or DELETE statement.</p><p><table cellspacing="0" class="boxed"><tr><td><span class="schemeparen">(</span><a name="(dep._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._total-changes-count))"></a><a name="(def._((planet._main..ss._(jaymccarthy._sqlite..plt._3._4))._total-changes-count))"></a><span title="Provided from: (planet jaymccarthy/sqlite:3)"><span class="schemesymbol">total-changes-count</span></span><span class="hspace">&nbsp;</span><span class="schemevariable">db</span><span class="schemeparen">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="schemesymbol">integer?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="schemevariable">db</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="schemesymbol">db?</span></td></tr></table></p><p>Returns a count of how many changes have been made to the
database since its creation.</p><h3>2<tt>&nbsp;</tt><a name="(part._.Notes)"></a>Notes</h3><p>If you encounter unexpected errors with the message "SQLite
Error: The database file is locked" check you haven&rsquo;t got
any un-finalized statements around.</p></div></div></body></html>