(function(){if(!(window.google&&google.gears)){var c=null;if(typeof GearsFactory!="undefined")c=new GearsFactory;else try{c=new ActiveXObject("Gears.Factory");c.getBuildInfo().indexOf("ie_mobile")!=-1&&c.privateSetGlobalObject(this)}catch(l){if(typeof navigator.mimeTypes!="undefined"&&navigator.mimeTypes["application/x-googlegears"]){c=document.createElement("object");c.style.display="none";c.width=0;c.height=0;c.type="application/x-googlegears";document.documentElement.appendChild(c)}}if(c){window.google||
(google={});if(!google.gears)google.gears={factory:c}}}})();if(typeof plt=="undefined")plt={};
(function(){plt.types=plt.types||{};plt.types.Logic={TRUE:true,FALSE:false};Boolean.prototype.toWrittenString=function(){if(this.valueOf())return"true";return"false"};Boolean.prototype.toDisplayedString=Boolean.prototype.toWrittenString;Boolean.prototype.isEqual=function(e){return this==e};plt.types.Char=function(e){this.val=e};plt.types.Char.makeInstance=function(e){return new plt.types.Char(e)};plt.types.Char.prototype.toWrittenString=function(){return"#\\"+this.val};plt.types.Char.prototype.toDisplayedString=
function(){return this.val};plt.types.Char.prototype.getValue=function(){return this.val};plt.types.Char.prototype.isEqual=function(e){return e instanceof plt.types.Char&&this.val==e.val};plt.types.Symbol=function(e){this.val=e};var c={};plt.types.Symbol.makeInstance=function(e){e in c||(c[e]=new plt.types.Symbol(e));return c[e]};plt.types.Symbol.prototype.isEqual=function(e){return e instanceof plt.types.Symbol&&this.val==e.val};plt.types.Symbol.prototype.toString=function(){return this.val};plt.types.Symbol.prototype.toWrittenString=
function(){return this.val};plt.types.Symbol.prototype.toDisplayedString=function(){return this.val};plt.types.Empty=function(){};plt.types.Empty.EMPTY=new plt.types.Empty;plt.types.Empty.prototype.isEqual=function(e){return e instanceof plt.types.Empty};plt.types.Empty.prototype.first=function(){throw new plt.Kernel.MobyRuntimeError("first can't be applied on empty.");};plt.types.Empty.prototype.rest=function(){throw new plt.Kernel.MobyRuntimeError("rest can't be applied on empty.");};plt.types.Empty.prototype.isEmpty=
function(){return true};plt.types.Empty.prototype.toWrittenString=function(){return"empty"};plt.types.Empty.prototype.toDisplayedString=function(){return"empty"};plt.types.Empty.prototype.append=function(e){return e};plt.types.Cons=function(e,g){this.f=e;this.r=g};plt.types.Cons.makeInstance=function(e,g){return new plt.types.Cons(e,g)};plt.types.Cons.prototype.isEqual=function(e){if(!(e instanceof plt.types.Cons))return plt.types.Logic.FALSE;return plt.Kernel.equal_question_(this.first(),e.first())&&
plt.Kernel.equal_question_(this.rest(),e.rest())};plt.types.Cons.prototype.first=function(){return this.f};plt.types.Cons.prototype.rest=function(){return this.r};plt.types.Cons.prototype.isEmpty=function(){return false};plt.types.Cons.prototype.append=function(e){if(e.isEmpty())return this;e=e;for(var g=plt.Kernel.reverse(this);!g.isEmpty();){e=plt.types.Cons.makeInstance(g.first(),e);g=g.rest()}return e};plt.types.Cons.prototype.toWrittenString=function(e){e.put(this,true);for(var g=[],y=this;!y.isEmpty();){g.push(plt.Kernel.toWrittenString(y.first(),
e));y=y.rest()}return"("+g.join(" ")+")"};plt.types.Cons.prototype.toDisplayedString=function(e){e.put(this,true);for(var g=[],y=this;!y.isEmpty();){g.push(plt.Kernel.toDisplayedString(y.first(),e));y=y.rest()}return"("+g.join(" ")+")"};function l(e,g){e.appendChild(g)}plt.types.Cons.prototype.toDomNode=function(e){e.put(this,true);var g=document.createElement("div");g.appendChild(document.createTextNode("("));for(var y=this;!y.isEmpty();){l(g,plt.Kernel.toDomNode(y.first(),e));y=y.rest();y.isEmpty()||
l(g,document.createTextNode(" "))}g.appendChild(document.createTextNode(")"));return g};plt.types.Vector=function(e,g){this.elts=new Array(e);if(g)for(var y=0;y<e;y++)this.elts[y]=g[y];else for(y=0;y<e;y++)this.elts[y]=undefined};plt.types.Vector.makeInstance=function(e,g){return new plt.types.Vector(e,g)};plt.types.Vector.prototype.length=function(){return this.elts.length};plt.types.Vector.prototype.ref=function(e){return this.elts[e]};plt.types.Vector.prototype.set=function(e,g){this.elts[e]=g};
plt.types.Vector.prototype.toWrittenString=function(e){e.put(this,true);for(var g=[],y=0;y<this.length();y++)g.push(plt.Kernel.toWrittenString(this.ref(y),e));return"#("+g.join(" ")+")"};plt.types.Vector.prototype.toDisplayedString=function(e){e.put(this,true);for(var g=[],y=0;y<this.length();y++)g.push(plt.Kernel.toDisplayedStringString(this.ref(y),e));return"#("+g.join(" ")+")"};plt.types.Vector.prototype.toDomNode=function(e){e.put(this,true);var g=document.createElement("div");g.appendChild(document.createTextNode("#("));
for(var y=0;y<this.length();y++)l(g,plt.Kernel.toDomNode(this.ref(y),e));g.appendChild(document.createTextNode(")"));return g};function I(e,g){var y;if(isNaN(e)||!isFinite(e))throw new plt.Kernel.MobyRuntimeError("not a number: "+e);if(isNaN(g)||!isFinite(g))throw new plt.Kernel.MobyRuntimeError("not a number: "+g);for(;g!=0;){y=e;e=g;g=y%g}return e}plt.types.Rational=function(e,g){if(g==undefined)g=1;if(g==0)throw new plt.Kernel.MobyRuntimeError("cannot have zero denominator.");var y=I(Math.abs(e),
Math.abs(g));this.n=e/y;this.d=g/y};plt.types.Rational.prototype.toWrittenString=function(){return this.d==1?this.n+"":this.n+"/"+this.d};plt.types.Rational.prototype.toDisplayedString=plt.types.Rational.prototype.toWrittenString;plt.types.Rational.prototype.level=function(){return 0};plt.types.Rational.prototype.lift=function(e){if(e.level()==1)return plt.types.FloatPoint.makeInstance(this.n/this.d);if(e.level()==2)return plt.types.Complex.makeInstance(this,plt.types.Rational.ZERO);throw new plt.Kernel.MobyRuntimeError("invalid level of Number");
};plt.types.Rational.prototype.isFinite=function(){return true};plt.types.Rational.prototype.isEqual=function(e){return e instanceof plt.types.Rational&&this.n==e.n&&this.d==e.d};plt.types.Rational.prototype.isInteger=function(){return this.d==1};plt.types.Rational.prototype.isRational=function(){return true};plt.types.Rational.prototype.isReal=function(){return true};plt.types.Rational.prototype.add=function(e){return plt.types.Rational.makeInstance(this.n*e.d+this.d*e.n,this.d*e.d)};plt.types.Rational.prototype.subtract=
function(e){return plt.types.Rational.makeInstance(this.n*e.d-this.d*e.n,this.d*e.d)};plt.types.Rational.prototype.multiply=function(e){return plt.types.Rational.makeInstance(this.n*e.n,this.d*e.d)};plt.types.Rational.prototype.divide=function(e){if(this.d*e.n==0)throw new plt.Kernel.MobyRuntimeError("division by zero");return plt.types.Rational.makeInstance(this.n*e.d,this.d*e.n)};plt.types.Rational.prototype.toExact=function(){return this};plt.types.Rational.prototype.isExact=function(){return true};
plt.types.Rational.prototype.toInteger=function(){return Math.floor(this.n/this.d)};plt.types.Rational.prototype.numerator=function(){return plt.types.Rational.makeInstance(this.n)};plt.types.Rational.prototype.denominator=function(){return plt.types.Rational.makeInstance(this.d)};plt.types.Rational.prototype.toFloat=function(){return this.n/this.d};plt.types.Rational.prototype.toComplex=function(){return plt.types.Complex.makeInstance(this,plt.types.Rational.ZERO)};plt.types.Rational.prototype.greaterThan=
function(e){return this.n*e.d>this.d*e.n};plt.types.Rational.prototype.greaterThanOrEqual=function(e){return this.n*e.d>=this.d*e.n};plt.types.Rational.prototype.lessThan=function(e){return this.n*e.d<this.d*e.n};plt.types.Rational.prototype.lessThanOrEqual=function(e){return this.n*e.d<=this.d*e.n};plt.types.Rational.prototype.sqrt=function(){if(this.n>=0){var e=Math.sqrt(this.n),g=Math.sqrt(this.d);return Math.floor(e)==e&&Math.floor(g)==g?plt.types.Rational.makeInstance(e,g):plt.types.FloatPoint.makeInstance(e/
g)}else{e=Math.sqrt(-this.n);g=Math.sqrt(this.d);return Math.floor(e)==e&&Math.floor(g)==g?plt.types.Complex.makeInstance(plt.types.Rational.ZERO,plt.types.Rational.makeInstance(e,g)):plt.types.Complex.makeInstance(plt.types.Rational.ZERO,plt.types.FloatPoint.makeInstance(e/g))}};plt.types.Rational.prototype.abs=function(){return plt.types.Rational.makeInstance(Math.abs(this.n),this.d)};plt.types.Rational.prototype.floor=function(){return plt.types.Rational.makeInstance(Math.floor(this.n/this.d),
1)};plt.types.Rational.prototype.ceiling=function(){return plt.types.Rational.makeInstance(Math.ceil(this.n/this.d),1)};plt.types.Rational.prototype.conjugate=plt.types.Rational.prototype.abs;plt.types.Rational.prototype.magnitude=plt.types.Rational.prototype.abs;plt.types.Rational.prototype.log=function(){return plt.types.FloatPoint.makeInstance(Math.log(this.n/this.d))};plt.types.Rational.prototype.angle=function(){if(0==this.n)return plt.types.Rational.ZERO;return this.n>0?plt.types.Rational.ZERO:
plt.Kernel.pi};plt.types.Rational.prototype.atan=function(){return plt.types.FloatPoint.makeInstance(Math.atan(this.n/this.d))};plt.types.Rational.prototype.cos=function(){return plt.types.FloatPoint.makeInstance(Math.cos(this.n/this.d))};plt.types.Rational.prototype.sin=function(){return plt.types.FloatPoint.makeInstance(Math.sin(this.n/this.d))};plt.types.Rational.prototype.expt=function(e){return plt.types.FloatPoint.makeInstance(Math.pow(this.n/this.d,e.n/e.d))};plt.types.Rational.prototype.exp=
function(){return plt.types.FloatPoint.makeInstance(Math.exp(this.n/this.d))};plt.types.Rational.prototype.acos=function(){return plt.types.FloatPoint.makeInstance(Math.acos(this.n/this.d))};plt.types.Rational.prototype.asin=function(){return plt.types.FloatPoint.makeInstance(Math.asin(this.n/this.d))};plt.types.Rational.prototype.imag_dash_part=function(){return plt.types.Rational.ZERO};plt.types.Rational.prototype.real_dash_part=function(){return this};plt.types.Rational.prototype.timesI=function(){return plt.types.Complex.makeInstance(plt.types.Rational.ZERO,
this)};plt.types.Rational.prototype.round=function(){if(this.d==2){var e=this.n/this.d,g=Math.floor(e);e=Math.ceil(e);return g%2==0?plt.types.Rational.makeInstance(g):plt.types.Rational.makeInstance(e)}else return plt.types.Rational.makeInstance(Math.round(this.n/this.d))};plt.types.Rational.prototype.half=function(){return plt.types.Rational.makeInstance(this.n,this.d*2)};plt.types.Rational.prototype.minus=function(){return plt.types.Rational.makeInstance(0-this.n,this.d)};var z={};plt.types.Rational.makeInstance=
function(e,g){if(e==undefined)throw new plt.Kernel.MobyRuntimeError("n undefined");if(g==undefined)g=1;if(g<0){e=-e;g=-g}return g==1&&e in z?z[e]:new plt.types.Rational(e,g)};z={};(function(){var e;for(e=-500;e<500;e++)z[e]=new plt.types.Rational(e,1)})();plt.types.Rational.NEGATIVE_ONE=z[-1];plt.types.Rational.ZERO=z[0];plt.types.Rational.ONE=z[1];plt.types.Rational.TWO=z[2];plt.types.FloatPoint=function(e){this.n=e};plt.types.FloatPoint.makeInstance=function(e){return new plt.types.FloatPoint(e)};
var u=plt.types.FloatPoint.makeInstance(Number.NaN),B=plt.types.FloatPoint.makeInstance(Number.POSITIVE_INFINITY),A=plt.types.FloatPoint.makeInstance(Number.NEGATIVE_INFINITY);plt.types.FloatPoint.prototype.isFinite=function(){return isFinite(this.n)};plt.types.FloatPoint.prototype.toExact=function(){return plt.types.Rational.makeInstance(Math.floor(this.n),1)};plt.types.FloatPoint.prototype.isExact=function(){return false};plt.types.FloatPoint.prototype.level=function(){return 1};plt.types.FloatPoint.prototype.lift=
function(){return plt.types.Complex.makeInstance(this,plt.types.Rational.ZERO)};plt.types.FloatPoint.prototype.toWrittenString=function(){return this.n==Number.POSITIVE_INFINITY?"+inf.0":this.n==Number.NEGATIVE_INFINITY?"-inf.0":this.n==Number.NaN?"+nan.0":this.n.toString()};plt.types.FloatPoint.prototype.toDisplayedString=plt.types.FloatPoint.prototype.toWrittenString;plt.types.FloatPoint.prototype.isEqual=function(e){return e instanceof plt.types.FloatPoint&&(this.n==e.n||isNaN(this.n)&&isNaN(e.n))};
plt.types.FloatPoint.prototype.isRational=function(){return this.isFinite()&&this.n==Math.floor(this.n)};plt.types.FloatPoint.prototype.isInteger=function(){return this.isFinite()&&this.n==Math.floor(this.n)};plt.types.FloatPoint.prototype.isReal=function(){return true};function C(e){return plt.types.NumberTower.lessThan(e,plt.types.Rational.ZERO)?-1:plt.types.NumberTower.greaterThan(e,plt.types.Rational.ZERO)?1:0}plt.types.FloatPoint.prototype.add=function(e){return this.isFinite()&&e.isFinite()?
plt.types.FloatPoint.makeInstance(this.n+e.n):isNaN(this.n)||isNaN(e.n)?u:this.isFinite()&&!e.isFinite()?e:!this.isFinite()&&e.isFinite()?this:C(this)*C(e)==1?this:u};plt.types.FloatPoint.prototype.subtract=function(e){return this.isFinite()&&e.isFinite()?plt.types.FloatPoint.makeInstance(this.n-e.n):isNaN(this.n)||isNaN(e.n)?u:!this.isFinite()&&!e.isFinite()?C(this)==C(e)?u:this:this.isFinite()?plt.types.NumberTower.multiply(e,plt.types.Rational.NEGATIVE_ONE):this};plt.types.FloatPoint.prototype.multiply=
function(e){if(this.n==0||e.n==0)return plt.types.Rational.ZERO;return this.isFinite()&&e.isFinite()?plt.types.FloatPoint.makeInstance(this.n*e.n):isNaN(this.n)||isNaN(e.n)?u:C(this)*C(e)==1?B:A};plt.types.FloatPoint.prototype.divide=function(e){if(this.isFinite()&&e.isFinite()){if(e.n==0)throw new plt.Kernel.MobyRuntimeError("division by zero");return plt.types.FloatPoint.makeInstance(this.n/e.n)}else if(isNaN(this.n)||isNaN(e.n))return u;else if(!this.isFinite()&&!e.isFinite())return u;else if(this.isFinite()&&
!e.isFinite())return plt.types.FloatPoint.makeInstance(0);else if(!this.isFinite()&&e.isFinite())return C(this)*C(e)==1?B:A};plt.types.FloatPoint.prototype.toInteger=function(){return Math.floor(this.n)};plt.types.FloatPoint.prototype.numerator=function(){var e=this.n.toString();return(e=e.match(/^(.*)\.(.*)$/))?plt.types.FloatPoint.makeInstance(parseFloat(e[1]+e[2])):this};plt.types.FloatPoint.prototype.denominator=function(){var e=this.n.toString();return(e=e.match(/^(.*)\.(.*)$/))?plt.types.FloatPoint.makeInstance(Math.pow(10,
e[2].length)):plt.types.FloatPoint.makeInstance(1)};plt.types.FloatPoint.prototype.toFloat=function(){return this.n};plt.types.FloatPoint.prototype.toComplex=function(){return plt.types.Complex.makeInstance(this,plt.types.Rational.ZERO)};plt.types.FloatPoint.prototype.floor=function(){if(!isFinite(this.n))return this;return plt.types.Rational.makeInstance(Math.floor(this.n),1)};plt.types.FloatPoint.prototype.ceiling=function(){if(!isFinite(this.n))return this;return plt.types.Rational.makeInstance(Math.ceil(this.n),
1)};plt.types.FloatPoint.prototype.greaterThan=function(e){return this.n>e.n};plt.types.FloatPoint.prototype.greaterThanOrEqual=function(e){return this.n>=e.n};plt.types.FloatPoint.prototype.lessThan=function(e){return this.n<e.n};plt.types.FloatPoint.prototype.lessThanOrEqual=function(e){return this.n<=e.n};plt.types.FloatPoint.prototype.sqrt=function(){if(this.n<0){var e=plt.types.Complex.makeInstance(plt.types.Rational.ZERO,plt.types.FloatPoint.makeInstance(Math.sqrt(-this.n)));return e}else return plt.types.FloatPoint.makeInstance(Math.sqrt(this.n))};
plt.types.FloatPoint.prototype.abs=function(){return plt.types.FloatPoint.makeInstance(Math.abs(this.n))};plt.types.FloatPoint.prototype.log=function(){return this.n<0?this.toComplex().log():plt.types.FloatPoint.makeInstance(Math.log(this.n))};plt.types.FloatPoint.prototype.angle=function(){if(0==this.n)return plt.types.Rational.ZERO;return this.n>0?plt.types.Rational.ZERO:plt.Kernel.pi};plt.types.FloatPoint.prototype.atan=function(){return plt.types.FloatPoint.makeInstance(Math.atan(this.n))};plt.types.FloatPoint.prototype.cos=
function(){return plt.types.FloatPoint.makeInstance(Math.cos(this.n))};plt.types.FloatPoint.prototype.sin=function(){return plt.types.FloatPoint.makeInstance(Math.sin(this.n))};plt.types.FloatPoint.prototype.expt=function(e){if(this.n==1){e.isFinite()||isNaN(e.n);return this}else return plt.types.FloatPoint.makeInstance(Math.pow(this.n,e.n))};plt.types.FloatPoint.prototype.exp=function(){return plt.types.FloatPoint.makeInstance(Math.exp(this.n))};plt.types.FloatPoint.prototype.acos=function(){return plt.types.FloatPoint.makeInstance(Math.acos(this.n))};
plt.types.FloatPoint.prototype.asin=function(){return plt.types.FloatPoint.makeInstance(Math.asin(this.n))};plt.types.FloatPoint.prototype.imag_dash_part=function(){return plt.types.Rational.ZERO};plt.types.FloatPoint.prototype.real_dash_part=function(){return this};plt.types.FloatPoint.prototype.round=function(){if(isFinite(this.n))if(Math.abs(Math.floor(this.n)-this.n)==0.5){if(Math.floor(this.n)%2==0)return plt.types.Rational.makeInstance(Math.floor(this.n));return plt.types.Rational.makeInstance(Math.ceil(this.n))}else return plt.types.Rational.makeInstance(Math.round(this.n));
else return this};plt.types.FloatPoint.prototype.conjugate=plt.types.FloatPoint.prototype.abs;plt.types.FloatPoint.prototype.magnitude=plt.types.FloatPoint.prototype.abs;plt.types.FloatPoint.prototype.minus=function(){return plt.types.FloatPoint.makeInstance(0-this.n)};plt.types.FloatPoint.prototype.half=function(){return plt.types.FloatPoint.makeInstance(this.n/2)};plt.types.FloatPoint.prototype.timesI=function(){return plt.types.Complex.makeInstance(plt.types.Rational.ZERO,this)};plt.types.Complex=
function(e,g){this.r=e;this.i=g};plt.types.Complex.makeInstance=function(e,g){if(typeof e=="number")e=e==Math.floor(e)?plt.types.Rational.makeInstance(e):plt.types.FloatPoint.makeInstance(e);if(typeof g=="number")g=g==Math.floor(g)?plt.types.Rational.makeInstance(g):plt.types.FloatPoint.makeInstance(g);return e=new plt.types.Complex(e,g)};plt.types.Complex.prototype.toWrittenString=function(){return plt.types.NumberTower.greaterThanOrEqual(this.i,plt.types.Rational.ZERO)?plt.Kernel.toWrittenString(this.r)+
"+"+plt.Kernel.toWrittenString(this.i)+"i":plt.Kernel.toWrittenString(this.r)+plt.Kernel.toWrittenString(this.i)+"i"};plt.types.Complex.prototype.toDisplayedString=plt.types.Complex.prototype.toWrittenString;plt.types.Complex.prototype.isFinite=function(){return this.r.isFinite()&&this.i.isFinite()};plt.types.Complex.prototype.isRational=function(){return this.r.isRational()&&plt.types.NumberTower.equal(this.i,plt.types.Rational.ZERO)};plt.types.Complex.prototype.isInteger=function(){return this.r.isInteger()&&
plt.types.NumberTower.equal(this.i,plt.types.Rational.ZERO)};plt.types.Complex.prototype.toExact=function(){if(!this.isReal())throw new plt.Kernel.MobyRuntimeError("inexact->exact: expects argument of type real number");return this.r.toExact()};plt.types.Complex.prototype.isExact=function(){return this.r.isExact()&&this.i.isExact()};plt.types.Complex.prototype.level=function(){return 2};plt.types.Complex.prototype.lift=function(){throw new plt.Kernel.MobyRuntimeError("Don't know how to lift Complex number");
};plt.types.Complex.prototype.isEqual=function(e){return e=e instanceof plt.types.Complex&&plt.types.NumberTower.equal(this.r,e.r)&&plt.types.NumberTower.equal(this.i,e.i)};plt.types.Complex.prototype.greaterThan=function(e){if(!this.isReal()||!e.isReal())throw new plt.Kernel.MobyRuntimeError(">: expects argument of type real number");return plt.types.NumberTower.greaterThan(this.r,e.r)};plt.types.Complex.prototype.greaterThanOrEqual=function(e){if(!this.isReal()||!e.isReal())throw new plt.Kernel.MobyRuntimeError(">: expects argument of type real number");
return plt.types.NumberTower.greaterThanOrEqual(this.r,e.r)};plt.types.Complex.prototype.lessThan=function(e){if(!this.isReal()||!e.isReal())throw new plt.Kernel.MobyRuntimeError(">: expects argument of type real number");return plt.types.NumberTower.lessThan(this.r,e.r)};plt.types.Complex.prototype.lessThanOrEqual=function(e){if(!this.isReal()||!e.isReal())throw new plt.Kernel.MobyRuntimeError(">: expects argument of type real number");return plt.types.NumberTower.lessThanOrEqual(this.r,e.r)};plt.types.Complex.prototype.abs=
function(){if(!plt.types.NumberTower.equal(this.i,plt.types.Rational.ZERO).valueOf())throw new plt.Kernel.MobyRuntimeError("abs: expects argument of type real number");return this.r.abs()};plt.types.Complex.prototype.toInteger=function(){if(!plt.types.NumberTower.equal(this.i,plt.types.Rational.ZERO).valueOf())throw new plt.Kernel.MobyRuntimeError("toInteger: expects argument of type real number");return this.r.toInteger()};plt.types.Complex.prototype.numerator=function(){if(!this.isReal())throw new plt.Kernel.MobyRuntimeError("numerator: can only be applied to real number");
return this.n.numerator()};plt.types.Complex.prototype.denominator=function(){if(!this.isReal())throw new plt.Kernel.MobyRuntimeError("floor: can only be applied to real number");return this.n.denominator()};plt.types.Complex.prototype.toFloat=function(){if(!plt.types.NumberTower.equal(this.i,plt.types.Rational.ZERO).valueOf())throw new plt.Kernel.MobyRuntimeError("toFloat: expects argument of type real number");return this.r.toFloat()};plt.types.Complex.prototype.toComplex=function(){return this};
plt.types.Complex.prototype.add=function(e){return plt.types.Complex.makeInstance(plt.types.NumberTower.add(this.r,e.r),plt.types.NumberTower.add(this.i,e.i))};plt.types.Complex.prototype.subtract=function(e){return plt.types.Complex.makeInstance(plt.types.NumberTower.subtract(this.r,e.r),plt.types.NumberTower.subtract(this.i,e.i))};plt.types.Complex.prototype.multiply=function(e){if(e.isReal())return plt.types.Complex.makeInstance(plt.types.NumberTower.multiply(this.r,e.r),plt.types.NumberTower.multiply(this.i,
e.r));var g=plt.types.NumberTower.subtract(plt.types.NumberTower.multiply(this.r,e.r),plt.types.NumberTower.multiply(this.i,e.i));e=plt.types.NumberTower.add(plt.types.NumberTower.multiply(this.r,e.i),plt.types.NumberTower.multiply(this.i,e.r));if(plt.types.NumberTower.equal(e,plt.types.Rational.ZERO))return g;return plt.types.Complex.makeInstance(g,e)};plt.types.Complex.prototype.divide=function(e){if(e.isReal())return plt.types.Complex.makeInstance(plt.types.NumberTower.divide(this.r,e.r),plt.types.NumberTower.divide(this.i,
e.r));var g=e.conjugate(),y=plt.types.NumberTower.multiply(this,g).toComplex();e=plt.types.NumberTower.multiply(e,g);return y=plt.types.Complex.makeInstance(plt.types.NumberTower.divide(y.r,e),plt.types.NumberTower.divide(y.i,e))};plt.types.Complex.prototype.conjugate=function(){var e=plt.types.Complex.makeInstance(this.r,plt.types.NumberTower.subtract(plt.types.Rational.ZERO,this.i));return e};plt.types.Complex.prototype.magnitude=function(){var e=plt.types.NumberTower.add(plt.types.NumberTower.multiply(this.r,
this.r),plt.types.NumberTower.multiply(this.i,this.i));return e.sqrt()};plt.types.Complex.prototype.isReal=function(){return plt.types.NumberTower.equal(this.i,plt.types.Rational.ZERO)};plt.types.Complex.prototype.sqrt=function(){if(this.isReal())return this.r.sqrt();var e=plt.types.NumberTower.add(this.magnitude(),this.r),g=e.half().sqrt();e=plt.types.NumberTower.divide(this.i,plt.types.NumberTower.multiply(e,plt.types.FloatPoint.makeInstance(2)).sqrt());return plt.types.Complex.makeInstance(g,e)};
plt.types.Complex.prototype.log=function(){var e=this.magnitude(),g=this.angle();return e=plt.types.NumberTower.add(e.log(),g.timesI())};plt.types.Complex.prototype.angle=function(){if(this.isReal())return this.r.angle();if(plt.types.NumberTower.equal(plt.types.Rational.ZERO,this.r)){var e=plt.Kernel.pi.half();return plt.types.NumberTower.greaterThan(this.i,plt.types.Rational.ZERO)?e:e.minus()}else{e=plt.types.NumberTower.divide(this.i.abs(),this.r.abs()).atan();return plt.types.NumberTower.greaterThan(this.r,
plt.types.Rational.ZERO)?plt.types.NumberTower.greaterThan(this.i,plt.types.Rational.ZERO)?e:e.minus():plt.types.NumberTower.greaterThan(this.i,plt.types.Rational.ZERO)?plt.Kernel.pi.subtract(e):e.subtract(plt.Kernel.pi)}};var J=plt.types.Complex.makeInstance(plt.types.Rational.ZERO,plt.types.Rational.ONE),w=plt.types.Complex.makeInstance(plt.types.Rational.ZERO,plt.types.Rational.NEGATIVE_ONE);plt.types.Complex.prototype.atan=function(){if(plt.types.NumberTower.equal(this,J)||plt.types.NumberTower.equal(this,
w))return plt.types.FloatPoint.makeInstance(Number.NEGATIVE_INFINITY);return plt.types.NumberTower.multiply(J,plt.types.NumberTower.multiply(plt.types.FloatPoint.makeInstance(0.5),plt.types.NumberTower.divide(plt.types.NumberTower.add(J,this),plt.types.NumberTower.add(J,plt.types.NumberTower.subtract(plt.types.Rational.ZERO,this))).log()))};plt.types.Complex.prototype.cos=function(){if(this.isReal())return this.r.cos();var e=this.timesI(),g=e.minus();return plt.types.NumberTower.add(e.exp(),g.exp()).half()};
plt.types.Complex.prototype.sin=function(){if(this.isReal())return this.r.sin();var e=this.timesI(),g=e.minus(),y=plt.types.Complex.makeInstance(plt.types.Rational.ZERO,plt.types.Rational.TWO);e=plt.types.NumberTower.subtract(e.exp(),g.exp());return y=plt.types.NumberTower.divide(e,y)};plt.types.Complex.prototype.expt=function(e){e=plt.types.NumberTower.multiply(e,this.log());return e.exp()};plt.types.Complex.prototype.exp=function(){var e=this.r.exp(),g=this.i.cos(),y=this.i.sin();return plt.types.NumberTower.multiply(e,
plt.types.NumberTower.add(g,y.timesI()))};plt.types.Complex.prototype.acos=function(){if(this.isReal())return this.r.acos();var e=plt.Kernel.pi.half(),g=this.timesI(),y=plt.types.NumberTower.subtract(plt.types.Rational.ONE,this.multiply(this)).sqrt();g=plt.types.NumberTower.add(g,y).log().timesI();return plt.types.NumberTower.add(e,g)};plt.types.Complex.prototype.asin=function(){if(this.isReal())return this.r.asin();var e=this.timesI(),g=plt.types.NumberTower.subtract(plt.types.Rational.ONE,this.multiply(this)).sqrt();
plt.types.NumberTower.add(e,g).log().timesI().minus();throw new plt.Kernel.MobyRuntimeError("");};plt.types.Complex.prototype.ceiling=function(){if(!this.isReal())throw new plt.Kernel.MobyRuntimeError("ceiling: can only be applied to real number");return this.r.ceiling()};plt.types.Complex.prototype.floor=function(){if(!this.isReal())throw new plt.Kernel.MobyRuntimeError("floor: can only be applied to real number");return this.r.floor()};plt.types.Complex.prototype.imag_dash_part=function(){return this.i};
plt.types.Complex.prototype.real_dash_part=function(){return this.r};plt.types.Complex.prototype.round=function(){return this.r.round()};plt.types.Complex.prototype.timesI=function(){return this.multiply(plt.types.Complex.makeInstance(plt.types.Rational.ZERO,plt.types.Rational.ONE))};plt.types.Complex.prototype.minus=function(){return plt.types.Complex.makeInstance(plt.types.NumberTower.subtract(plt.types.Rational.ZERO,this.r),plt.types.NumberTower.subtract(plt.types.Rational.ZERO,this.i))};plt.types.Complex.prototype.half=
function(){return plt.types.Complex.makeInstance(this.r.half(),this.i.half())};plt.types.NumberTower={};plt.types.NumberTower.toInteger=function(e){return e.toInteger()};plt.types.NumberTower.toFloat=function(e){return e.toFloat()};plt.types.NumberTower.abs=function(e){return e.abs()};plt.types.NumberTower.isFinite=function(e){return e.isFinite()};plt.types.NumberTower.toExact=function(e){return e.toExact()};plt.types.NumberTower.add=function(e,g){if(e.level()<g.level())e=e.lift(g);if(g.level()<e.level())g=
g.lift(e);return e.add(g)};plt.types.NumberTower.subtract=function(e,g){if(e.level()<g.level())e=e.lift(g);if(g.level()<e.level())g=g.lift(e);return e.subtract(g)};plt.types.NumberTower.multiply=function(e,g){if(e.level()<g.level())e=e.lift(g);if(g.level()<e.level())g=g.lift(e);return e.multiply(g)};plt.types.NumberTower.divide=function(e,g){if(e.level()<g.level())e=e.lift(g);if(g.level()<e.level())g=g.lift(e);return e.divide(g)};plt.types.NumberTower.equal=function(e,g){if(e.level()<g.level())e=
e.lift(g);if(g.level()<e.level())g=g.lift(e);return e.isEqual(g)};plt.types.NumberTower.approxEqual=function(e,g,y){return plt.types.NumberTower.lessThan(plt.types.NumberTower.abs(plt.types.NumberTower.subtract(e,g)),y)};plt.types.NumberTower.greaterThanOrEqual=function(e,g){if(e.level()<g.level())e=e.lift(g);if(g.level()<e.level())g=g.lift(e);if(!(e.isReal()&&g.isReal()))throw new plt.Kernel.MobyRuntimeError("greaterThanOrEqual: couldn't be applied to complex number");return e.greaterThanOrEqual(g)};
plt.types.NumberTower.lessThanOrEqual=function(e,g){if(e.level()<g.level())e=e.lift(g);if(g.level()<e.level())g=g.lift(e);if(!(e.isReal()&&g.isReal()))throw new plt.Kernel.MobyRuntimeError("lessThanOrEqual: couldn't be applied to complex number");return e.lessThanOrEqual(g)};plt.types.NumberTower.greaterThan=function(e,g){if(e.level()<g.level())e=e.lift(g);if(g.level()<e.level())g=g.lift(e);if(!(e.isReal()&&g.isReal()))throw new plt.Kernel.MobyRuntimeError("greaterThan: couldn't be applied to complex number");
return e.greaterThan(g)};plt.types.NumberTower.lessThan=function(e,g){if(e.level()<g.level())e=e.lift(g);if(g.level()<e.level())g=g.lift(e);if(!(e.isReal()&&g.isReal()))throw new plt.Kernel.MobyRuntimeError("lessThan: couldn't be applied to complex number");return e.lessThan(g)};plt.types.NumberTower.modulo=function(e,g){e=plt.types.Rational.makeInstance(e.toInteger()%g.toInteger(),1);if(plt.types.NumberTower.lessThan(g,plt.types.Rational.ZERO)){if(plt.types.NumberTower.lessThanOrEqual(e,plt.types.Rational.ZERO))return e;
return plt.types.NumberTower.add(e,g)}else{if(plt.types.NumberTower.lessThan(e,plt.types.Rational.ZERO))return plt.types.NumberTower.add(e,g);return e}};plt.types.NumberTower.sqr=function(e){return plt.types.NumberTower.multiply(e,e)};plt.types.NumberTower.expt=function(e,g){if(e.level()<g.level())e=e.lift(g);if(g.level()<e.level())g=g.lift(e);return e.expt(g)};plt.types.String=String;plt.types.String.makeInstance=function(e){return e.valueOf()};plt.types.String.prototype.isEqual=function(e){return this==
e};plt.types.String.prototype.toWrittenString=function(){return'"'+this.replace(/["\\]/g,function(e){return"\\"+e})+'"'};plt.types.String.prototype.toDisplayedString=function(){return this}})();if(typeof plt=="undefined")plt={};
plt._Hashtable=function(){function c(f){return typeof f==="undefined"}function l(f){return typeof f==="function"}function I(f){return typeof f==="string"}function z(f,n){return l(f[n])}function u(f){return z(f,"equals")}function B(f){return z(f,"hashCode")}function A(f){if(I(f))return f;else if(B(f)){var n=f.hashCode();if(!I(n))return A(n);return n}else return z(f,"toString")?f.toString():String(f)}function C(f,n){return f.equals(n)}function J(f,n){return u(n)?n.equals(f):f===n}function w(f,n){return f===
n}function e(f,n,q,G,K){for(var M,H=0,W=f.length;H<W;H++){M=f[H];if(K(n,q(M)))return G?[H,M]:true}return false}function g(f,n){if(z(f,"splice"))f.splice(n,1);else if(n===f.length-1)f.length=n;else{var q=f.slice(n+1);f.length=n;for(var G=0,K=q.length;G<K;G++)f[n+G]=q[G]}}function y(f,n){if(f===null)throw new Error("null is not a valid "+n);else if(c(f))throw new Error(n+" must not be undefined");}var r="key",v="value";function D(f){y(f,r)}function L(f){y(f,v)}function N(f,n,q){this.entries=[];this.addEntry(f,
n);if(q!==null)this.getEqualityFunction=function(){return q}}function P(f){return f[0]}function S(f){return f[1]}N.prototype={getEqualityFunction:function(f){return u(f)?C:J},searchForEntry:function(f){return e(this.entries,f,P,true,this.getEqualityFunction(f))},getEntryForKey:function(f){return this.searchForEntry(f)[1]},getEntryIndexForKey:function(f){return this.searchForEntry(f)[0]},removeEntryForKey:function(f){var n=this.searchForEntry(f);if(n){g(this.entries,n[0]);return true}return false},
addEntry:function(f,n){this.entries[this.entries.length]=[f,n]},size:function(){return this.entries.length},keys:function(f){for(var n=f.length,q=0,G=this.entries.length;q<G;q++)f[n+q]=this.entries[q][0]},values:function(f){for(var n=f.length,q=0,G=this.entries.length;q<G;q++)f[n+q]=this.entries[q][1]},containsKey:function(f){return e(this.entries,f,P,false,this.getEqualityFunction(f))},containsValue:function(f){return e(this.entries,f,S,false,w)}};function V(){}V.prototype=[];function Z(f){return f[0]}
function F(f,n,q){return e(f,n,Z,true,q)}function k(f,n){var q=f[n];if(q&&q instanceof V)return q[1];return null}function h(f,n){var q=[],G={};f=l(f)?f:A;n=l(n)?n:null;this.put=function(K,M){D(K);L(M);var H=f(K),W=k(G,H);if(W){var m=W.getEntryForKey(K);if(m)m[1]=M;else W.addEntry(K,M)}else{var O=new V;O[0]=H;O[1]=new N(K,M,n);q[q.length]=O;G[H]=O}};this.get=function(K){D(K);var M=f(K),H=k(G,M);if(H){var W=H.getEntryForKey(K);if(W)return W[1]}return null};this.containsKey=function(K){D(K);var M=f(K),
H=k(G,M);if(H)return H.containsKey(K);return false};this.containsValue=function(K){L(K);for(var M=0,H=q.length;M<H;M++)if(q[M][1].containsValue(K))return true;return false};this.clear=function(){q.length=0;G={}};this.isEmpty=function(){return q.length===0};this.keys=function(){for(var K=[],M=0,H=q.length;M<H;M++)q[M][1].keys(K);return K};this.values=function(){for(var K=[],M=0,H=q.length;M<H;M++)q[M][1].values(K);return K};this.remove=function(K){D(K);var M=f(K),H=k(G,M);if(H)if(H.removeEntryForKey(K))if(H.size()===
0){var W=F(q,M,H.getEqualityFunction(K));g(q,W[0]);delete G[M]}};this.size=function(){for(var K=0,M=0,H=q.length;M<H;M++)K+=q[M][1].size();return K}}return h}();if(typeof plt=="undefined")plt={};
(function(){if(!Array.indexOf)Array.prototype.indexOf=function(b){for(var d=0;d<this.length;d++)if(this[d]==b)return d;return-1};function c(b,d,j){b.addEventListener?b.addEventListener(d,j,false):b.attachEvent("on"+d,j,false)}function l(b,d,j){b.addEventListener?b.removeEventListener(d,j,false):b.detachEvent("on"+d,j,false)}function I(b){function d(){}d.prototype=b;return new d}function z(b){this.msg=b}z.prototype.name="MobyError";z.prototype.toString=function(){return this.name+": "+this.msg};function u(b,
d){z.call(this,b);this.loc=d}u.prototype=I(z.prototype);u.prototype.name="MobyParserError";function B(b,d){z.call(this,b);this.stx=d}B.prototype=I(z.prototype);B.prototype.name="MobySyntaxError";function A(b){z.call(this,b)}A.prototype=I(z.prototype);A.prototype.name="MobyTypeError";function C(b){z.call(this,b)}C.prototype=I(z.prototype);C.prototype.name="MobyRuntimeError";function J(b){z.call(this,b)}J.prototype=I(C.prototype);J.prototype.name="MobyTestingError";function w(b,d){for(;d!=0;){var j=
b;b=d;d=j%d}return Math.abs(b)}function e(b,d){return Math.abs(b*d/w(b,d))}function g(b){return b!=null&&b!=undefined&&(b instanceof plt.types.Rational||b instanceof plt.types.FloatPoint||b instanceof plt.types.Complex)}function y(b){return b!=null&&b!=undefined&&b instanceof plt.types.Symbol}function r(b){return b!=null&&b!=undefined&&b instanceof plt.types.Char}function v(b){return stx_question_(b)}function D(b){return typeof b=="string"}function L(b){return b==plt.types.Logic.TRUE||b==plt.types.Logic.FALSE}
function N(b){return b!=null&&b!=undefined&&b instanceof plt.types.Cons}function P(b){return b!=null&&b!=undefined&&b instanceof plt.types.Empty}function S(b){return g(b)&&b.isReal()}function V(b){return g(b)&&b.isRational()}function Z(b){return g(b)}function F(b){return typeof b=="function"}function k(b){return g(b)&&b.isInteger()}function h(b){return g(b)&&b.isInteger()&&b.toInteger()>=0}function f(b){for(var d=0;d<b.length;d++)if(!(b[d]>="a"&&b[d]<="z"||b[d]>="A"&&b[d]<="Z"))return false;return true}
var n=function(){var b=/^\s*$/;return function(d){return d.match(b)?true:false}}();function q(b){return b!=null&&b!=undefined&&b instanceof plt.types.Vector}function G(b,d){for(var j=0;j<b.length;j++)d.apply(b[j],[b[j],j])}function K(b,d,j,s){if(!b(d,j).valueOf())return false;if(s.length==0)return true;if(!b(j,s[0]).valueOf())return false;for(d=0;d<s.length-1;d++)if(!b(s[d],s[d+1]).valueOf())return false;return true}function M(b,d,j){var s=d;for(d=0;d<j.length;d++)b(s,j[d]).valueOf()||(s=j[d]);return s}
function H(b){return b!=null&&b!=undefined&&(b instanceof plt.types.Cons||b instanceof plt.types.Empty)}function W(b,d,j,s){var E=["th","st","nd","rd","th","th","th","th"];return plt.Kernel.format("~a: expects type <~a> as ~a argument, given: ~s",[b,d,j+E[Math.min(E.length-1,j)],s])}function m(b,d,j,s,E){if(!d(b))throw new A(W(j,s,E,b));}function O(b,d,j){if(!H(b))throw new A(W(d,"list",j,b));}function na(b,d,j,s,E){if(!H(b))throw new A(W(j,"listof "+s,E,b));for(;!b.isEmpty();){if(!d(b.first()))throw new A(W(j,
"listof "+s,E,b));b=b.rest()}}function oa(b,d,j,s){return function(E,R,Y){m(E,b,s,d,1);m(R,b,s,d,2);G(Y,function(ea,aa){m(ea,b,s,d,aa+3)});return j(E,R,Y)}}function ka(b,d){return oa(g,"number",function(j,s,E){return K(b,j,s,E)},d)}function ca(b,d){return oa(r,"char",function(j,s,E){return K(b,j,s,E)},d)}function da(b,d){return oa(D,"string",function(j,s,E){return K(b,j,s,E)},d)}plt.Kernel={_heir:I,pi:plt.types.FloatPoint.makeInstance(Math.PI),e:plt.types.FloatPoint.makeInstance(Math.E),Struct:function(b,
d){this._constructorName=b;this._fields=d},struct_question_:function(b){return b!=null&&b!=undefined&&b instanceof plt.Kernel.Struct},number_question_:function(b){return g(b)},equal_question_:function(b,d){return plt.Kernel.number_question_(b)&&plt.Kernel.number_question_(d)?"isEqual"in b?plt.types.NumberTower.equal(b,d):"isEqual"in d?plt.types.NumberTower.equal(d,b):b==d:b.isEqual(d)},equal_tilde__question_:function(b,d,j){m(j,g,"equal~?","number",3);return plt.Kernel.number_question_(b).valueOf()&&
plt.Kernel.number_question_(d).valueOf()?"isEqual"in b?plt.types.NumberTower.approxEqual(b,d,j):"isEqual"in d?plt.types.NumberTower.approxEqual(d,b,j):b==d:b.isEqual(d)},eq_question_:function(b,d){return b==d},eqv_question_:function(b,d){if(g(b)&&g(d)&&b.level()==d.level())return plt.types.NumberTower.equal(b,d);else if(r(b)&&r(d))return b.getValue()==d.getValue();return b===d},identity:function(b){return b},cons:function(b,d){O(d,"cons",2);return plt.types.Cons.makeInstance(b,d)},first:function(b){O(b,
"first",1);return b.first()},rest:function(b){O(b,"rest",1);return b.rest()},second:function(b){O(b,"second",1);return b.rest().first()},third:function(b){O(b,"third",1);return b.rest().rest().first()},fourth:function(b){O(b,"fourth",1);return b.rest().rest().rest().first()},fifth:function(b){O(b,"fifth",1);return b.rest().rest().rest().rest().first()},random:function(b){m(b,k,"random","integer",1);return plt.types.Rational.makeInstance(Math.floor(plt.types.NumberTower.toInteger(b)*Math.random()),
1)},current_dash_seconds:function(){return plt.types.Rational.makeInstance((new Date).getMilliseconds()/1000)},floor:function(b){m(b,g,"floor","number",1);return b.floor()},ceiling:function(b){m(b,g,"ceiling","number",1);return b.ceiling()},sqrt:function(b){m(b,g,"sqrt","number",1);return b.sqrt()},integer_dash_sqrt:function(b){m(b,k,"integer-sqrt","integer",1);b=b.sqrt();return V(b)?plt.types.Rational.makeInstance(b.toInteger()):S(b)?plt.types.Rational.makeInstance(b.toInteger()):plt.types.Complex.makeInstance(plt.types.Rational.makeInstance(plt.Kernel.real_dash_part(b).toInteger()),
plt.types.Rational.makeInstance(plt.Kernel.imag_dash_part(b).toInteger()))},sqr:function(b){m(b,g,"sqr","number",1);return plt.types.NumberTower.sqr(b)},sin:function(b){m(b,g,"sin","number",1);return b.sin()},cos:function(b){m(b,g,"cos","number",1);return b.cos()},modulo:function(b,d){m(b,g,"modulo","number",1);m(d,g,"modulo","number",2);return plt.types.NumberTower.modulo(b,d)},zero_question_:function(b){m(b,g,"zero?","number",1);return plt.types.NumberTower.equal(b,plt.types.Rational.ZERO)},_equal__tilde_:function(b,
d,j){m(b,g,"=~","number",1);m(d,g,"=~","number",2);m(j,g,"=~","number",3);return plt.types.NumberTower.approxEqual(b,d,j)},abs:function(b){m(b,g,"abs","number",1);return plt.types.NumberTower.abs(b)},add1:function(b){m(b,g,"add1","number",1);return plt.types.NumberTower.add(b,plt.types.Rational.ONE)},sub1:function(b){m(b,g,"sub1","number",1);return plt.types.NumberTower.subtract(b,plt.types.Rational.ONE)},_plus_:function(b){G(b,function(s,E){m(s,g,"+","number",E+1)});var d,j=plt.types.Rational.ZERO;
for(d=0;d<b.length;d++)j=plt.types.NumberTower.add(j,b[d]);return j},_dash_:function(b,d){m(b,g,"-","number",1);G(d,function(s,E){m(s,g,"-","number",E+2)});if(d.length==0)return plt.types.NumberTower.subtract(plt.types.Rational.ZERO,b);var j=b;for(b=0;b<d.length;b++)j=plt.types.NumberTower.subtract(j,d[b]);return j},_star_:function(b){G(b,function(s,E){m(s,g,"*","number",E+1)});var d,j=plt.types.Rational.ONE;for(d=0;d<b.length;d++)j=plt.types.NumberTower.multiply(j,b[d]);return j},_slash_:function(b,
d){m(b,g,"/","number",1);G(d,function(s,E){m(s,g,"/","number",E+2)});var j=b;if(d.length==0)return plt.types.NumberTower.divide(plt.types.Rational.ONE,j);else{for(b=0;b<d.length;b++)j=plt.types.NumberTower.divide(j,d[b]);return j}},_equal_:ka(plt.types.NumberTower.equal,"="),_greaterthan__equal_:ka(plt.types.NumberTower.greaterThanOrEqual,">="),_lessthan__equal_:ka(plt.types.NumberTower.lessThanOrEqual,"<="),_greaterthan_:ka(plt.types.NumberTower.greaterThan,">"),_lessthan_:ka(plt.types.NumberTower.lessThan,
"<"),min:function(b,d){m(b,g,"min","number",1);G(d,function(j,s){m(this,g,"min","number",s+2)});return M(plt.types.NumberTower.lessThanOrEqual,b,d)},max:function(b,d){m(b,g,"max","number",1);G(d,function(j,s){m(this,g,"max","number",s+2)});return M(plt.types.NumberTower.greaterThanOrEqual,b,d)},lcm:function(b,d){m(b,k,"lcm","number",1);G(d,function(s,E){m(this,k,"lcm","number",E+2)});b=Math.abs(b.toInteger());if(b==0)return plt.types.Rational.ZERO;for(var j=0;j<d.length;j++){if(d[j].toInteger()==
0)return plt.types.Rational.ZERO;b=e(b,d[j].toInteger())}return plt.types.Rational.makeInstance(b)},gcd:function(b,d){m(b,k,"gcd","number",1);G(d,function(s,E){m(this,k,"gcd","number",E+2)});b=Math.abs(b.toInteger());for(var j=0;j<d.length;j++)b=w(b,d[j].toInteger());return plt.types.Rational.makeInstance(b)},exact_dash__greaterthan_inexact:function(b){m(b,g,"exact->inexact","number",1);return plt.types.FloatPoint.makeInstance(b.toFloat())},inexact_dash__greaterthan_exact:function(b){m(b,g,"inexact->exact",
"number",1);return plt.types.NumberTower.toExact(b)},exact_question_:function(b){m(b,g,"exact?","number",1);return b.isExact()},inexact_question_:function(b){m(b,g,"inexact?","number",1);return!b.isExact()},rational_question_:function(b){return plt.Kernel.number_question_(b)&&b.isRational()},number_dash__greaterthan_string:function(b){m(b,g,"number->string","number",1);return plt.types.String.makeInstance(plt.Kernel.toWrittenString(b))},conjugate:function(b){m(b,g,"conjugate","number",1);return b.conjugate()},
magnitude:function(b){m(b,g,"magnitude","number",1);return b.magnitude()},log:function(b){m(b,g,"log","number",1);return b.log()},angle:function(b){m(b,g,"angle","number",1);return b.angle()},atan:function(b,d){if(d.length==0){m(b,g,"atan","number",1);return b.atan()}else if(d.length==1){m(b,S,"atan","number",1);m(d[0],S,"atan","number",2);return plt.types.FloatPoint.makeInstance(Math.atan2(plt.types.NumberTower.toFloat(b),plt.types.NumberTower.toFloat(d[0])))}else throw new C(plt.Kernel.format("atan: expects 1 to 2 arguments, given ~a.",
[plt.types.Rational.makeInstance(d.length)]));},expt:function(b,d){m(b,g,"expt","number",1);m(d,g,"expt","number",2);return plt.types.NumberTower.expt(b,d)},exp:function(b){m(b,g,"exp","number",1);return b.exp()},acos:function(b){m(b,g,"acos","number",1);return b.acos()},asin:function(b){m(b,g,"asin","number",1);return b.asin()},tan:function(b){m(b,g,"tan","number",1);return plt.types.NumberTower.divide(b.sin(),b.cos())},complex_question_:function(b){return Z(b)},cosh:function(b){m(b,g,"cosh","number",
1);return this._plus_([this.exp(b),this.exp(b.minus())]).half()},sinh:function(b){m(b,g,"sinh","number",1);return plt.types.NumberTower.subtract(this.exp(b),this.exp(b.minus())).half()},denominator:function(b){m(b,V,"denominator","rational",1);return b.denominator()},numerator:function(b){m(b,V,"numerator","rational",1);return b.numerator()},odd_question_:function(b){m(b,g,"odd?","number",1);return Math.abs(b.toInteger()%2)==1},even_question_:function(b){m(b,g,"even?","number",1);return Math.abs(b.toInteger()%
2)==0},positive_question_:function(b){m(b,g,"positive?","number",1);return this._greaterthan_(b,plt.types.Rational.ZERO,[])},negative_question_:function(b){m(b,g,"negative?","number",1);return this._lessthan_(b,plt.types.Rational.ZERO,[])},imag_dash_part:function(b){m(b,g,"imag-part","number",1);return b.imag_dash_part()},real_dash_part:function(b){m(b,g,"real-part","number",1);return b.real_dash_part()},make_dash_polar:function(b,d){if(plt.types.NumberTower.equal(d,plt.types.Rational.ZERO))return b;
var j=plt.types.NumberTower.multiply(b,d.cos());b=plt.types.NumberTower.multiply(b,d.sin());return plt.types.Complex.makeInstance(j,b)},integer_question_:function(b){return k(b)},make_dash_rectangular:function(b,d){return plt.types.Complex.makeInstance(b,d)},quotient:function(b,d){m(b,k,"quotient","integer",1);m(d,k,"quotient","integer",2);b=plt.types.NumberTower.divide(b,d);return plt.Kernel.positive_question_(b)?plt.types.Rational.makeInstance(b.floor().toInteger(),1):plt.types.Rational.makeInstance(b.ceiling().toInteger(),
1)},remainder:function(b,d){m(b,g,"remainder","number",1);m(d,g,"remainder","number",2);return plt.types.Rational.makeInstance(b.toInteger()%d.toInteger(),1)},real_question_:function(b){return S(b)},round:function(b){m(b,g,"round","number",1);return b.round()},sgn:function(b){m(b,g,"sgn","number",1);if(this.positive_question_(b).valueOf())return plt.types.Rational.ONE;return this.negative_question_(b).valueOf()?plt.types.Rational.NEGATIVE_ONE:plt.types.Rational.ZERO},boolean_equal__question_:function(b,
d){m(b,L,"boolean=?","boolean",1);m(d,L,"boolean=?","boolean",2);return b==d},boolean_question_:function(b){return L(b)},false_question_:function(b){return b==plt.types.Logic.FALSE},not:function(b){if(!b||b===plt.types.Logic.FALSE)return plt.types.Logic.TRUE;return plt.types.Logic.FALSE},symbol_dash__greaterthan_string:function(b){m(b,y,"symbol->string","symbol",1);return plt.types.String.makeInstance(b.val)},symbol_equal__question_:function(b,d){m(b,y,"symbol=?","symbol",1);m(d,y,"symbol=?","symbol",
2);return b.val==d.val},symbol_question_:function(b){return y(b)},append:function(b,d){O(b,"append",1);b=b;var j;for(j=0;j<d.length;j++){O(d[j],"append",j+2);b=b.append(d[j])}return b},reverse:function(b){O(b,"reverse",1);for(var d=plt.types.Empty.EMPTY;!b.isEmpty();){d=plt.types.Cons.makeInstance(b.first(),d);b=b.rest()}return d},assq:function(b,d){for(O(d,"assq",2);!d.isEmpty()&&!plt.Kernel.eq_question_(b,d.first().first());)d=d.rest();return d.isEmpty()?plt.types.Logic.FALSE:d.first()},caaar:function(b){O(b,
"caaar",1);return b.first().first().first()},caadr:function(b){O(b,"caadr",1);return b.first().first().rest()},caar:function(b){O(b,"caar",1);return b.first().first()},cadar:function(b){O(b,"cadar",1);return b.first().rest().first()},cadddr:function(b){O(b,"cadddr",1);return b.rest().rest().rest().first()},caddr:function(b){O(b,"caddr",1);return b.rest().rest().first()},cadr:function(b){O(b,"cadr",1);return b.rest().first()},car:function(b){O(b,"car",1);return b.first()},cdaar:function(b){O(b,"cdaar",
1);return b.first().first().rest()},cdadr:function(b){O(b,"cdadr",1);return b.rest().first().rest()},cdar:function(b){O(b,"cdar",1);return b.first().rest()},cddar:function(b){O(b,"cddar",1);return b.first().rest().rest()},cdddr:function(b){O(b,"cdddr",1);return b.rest().rest().rest()},cddr:function(b){O(b,"cddr",1);return b.rest().rest()},cdr:function(b){O(b,"cdr",1);return b.rest()},null_question_:function(b){return P(b)},empty_question_:function(b){return P(b)},pair_question_:function(b){return N(b)},
cons_question_:function(b){return N(b)},sixth:function(b){O(b,"sixth",1);return b.rest().rest().rest().rest().rest().first()},seventh:function(b){O(b,"seventh",1);return b.rest().rest().rest().rest().rest().rest().first()},eighth:function(b){O(b,"eighth",1);return b.rest().rest().rest().rest().rest().rest().rest().first()},set_dash_car_bang_:function(b,d){O(b,"set-car!",1);b.f=d},set_dash_cdr_bang_:function(b,d){O(b,"set-cdr!",1);O(d,"set-cdr!",2);b.r=d},length:function(b){O(b,"length",1);for(var d=
plt.types.Rational.ZERO;!b.isEmpty();b=b.rest())d=plt.Kernel.add1(d);return d},list:function(b){for(var d=plt.types.Empty.EMPTY,j=b.length-1;j>=0;j--)d=plt.types.Cons.makeInstance(b[j],d);return d},list_star_:function(b,d){var j=d.pop();if(j==undefined||!j instanceof plt.types.Cons)throw new A("list*: "+j+" not a list");d.unshift(b);return plt.Kernel.append(plt.Kernel.list(d),[j])},list_dash_ref:function(b,d){O(b,"list-ref",1);m(d,h,"list-ref","natural",2);for(var j=plt.types.Rational.ZERO;plt.Kernel._lessthan_(j,
d,[]);j=plt.Kernel.add1(j))if(b.isEmpty())throw new C("list-ref: index too small");else b=b.rest();return b.first()},remove:function(b,d){O(d,"member",2);for(var j=d,s=plt.types.Empty.EMPTY;!d.isEmpty();)if(plt.Kernel.equal_question_(b,d.first()).valueOf())return plt.Kernel.append(plt.Kernel.reverse(s),[d.rest()]);else{s=plt.types.Cons.makeInstance(d.first(),s);d=d.rest()}return j},member:function(b,d){for(O(d,"member",2);!d.isEmpty();){if(plt.Kernel.equal_question_(b,d.first()).valueOf())return plt.types.Logic.TRUE;
d=d.rest()}return plt.types.Logic.FALSE},memq:function(b,d){for(O(d,"memq",2);!d.isEmpty();){if(plt.Kernel.eq_question_(b,d.first()).valueOf())return d;d=d.rest()}return plt.types.Logic.FALSE},memv:function(b,d){for(O(d,"memv",2);!d.isEmpty();){if(plt.Kernel.eqv_question_(b,d.first()).valueOf())return d;d=d.rest()}return plt.types.Logic.FALSE},memf:function(b,d){m(b,F,"memf","function",1);for(O(d,"memf",2);!d.isEmpty();){if(b([d.first()]))return d;d=d.rest()}return plt.types.Logic.FALSE},compose:function(b){return function(d){d=
d;for(var j=b.length-1;j>=0;j--)d=[b[j](d)];return d[0]}},string_dash__greaterthan_number:function(b){m(b,D,"string->number","string",1);try{var d=plt.reader.readSchemeExpressions(b,"");if(plt.types.NumberTower.equal(plt.Kernel.length(d),plt.types.Rational.ONE)){var j=stx_dash_e(d.first());return g(j)?j:plt.types.Logic.FALSE}else return plt.types.Logic.FALSE}catch(s){return plt.types.Logic.FALSE}},string_dash__greaterthan_symbol:function(b){m(b,D,"string->symbol","string",1);return plt.types.Symbol.makeInstance(b)},
string_dash__greaterthan_int:function(b){m(b,D,"string->int","string",1);return plt.types.Rational.makeInstance(b.toString().charCodeAt(0),1)},string_dash_append:function(b){G(b,function(d,j){m(d,D,"string-append","string",j+1)});return plt.types.String.makeInstance(b.join(""))},replicate:function(b,d){m(b,h,"replicate","natural",1);m(d,D,"replicate","string",2);for(var j=[],s=0;s<b.toInteger();s++)j.push(d);return plt.types.String.makeInstance(j.join(""))},string_equal__question_:da(function(b,d){return b==
d},"string=?"),string_lessthan__equal__question_:da(function(b,d){return b<=d},"string<=?"),string_lessthan__question_:da(function(b,d){return b<d},"string<?"),string_greaterthan__equal__question_:da(function(b,d){return b>=d},"string>=?"),string_greaterthan__question_:da(function(b,d){return b>d},"string>?"),string_dash_ci_equal__question_:da(function(b,d){return b.toUpperCase()==d.toUpperCase()},"string-ci=?"),string_dash_ci_lessthan__equal__question_:da(function(b,d){return b.toUpperCase()<=d.toUpperCase()},
"string-ci<=?"),string_dash_ci_lessthan__question_:da(function(b,d){return b.toUpperCase()<d.toUpperCase()},"string-ci<?"),string_dash_ci_greaterthan__question_:da(function(b,d){return b.toUpperCase()>d.toUpperCase()},"string-ci>?"),string_dash_ci_greaterthan__equal__question_:da(function(b,d){return b.toUpperCase()>=d.toUpperCase()},"string-ci>=?"),string_dash_copy:function(b){m(b,D,"string-copy","string",1);return b.substring(0,b.length)},string_dash_length:function(b){m(b,D,"string-length","string",
1);return plt.types.Rational.makeInstance(b.length,1)},string_dash_ref:function(b,d){m(b,D,"string-ref","string",1);m(d,h,"string-ref","natural",2);if(d.toInteger()>=b.length)throw new C("string-ref: index >= length");return plt.types.String.makeInstance(b.charAt(d.toInteger()))},string_dash_ith:function(b,d){m(b,D,"string-ith","string",1);m(d,h,"string-ith","natural",2);if(d.toInteger()>=b.length)throw new C("string-ith: index >= string length");return plt.types.String.makeInstance(b.substring(d.toInteger(),
d.toInteger()+1))},int_dash__greaterthan_string:function(b){m(b,k,"int->string","integer",1);return plt.types.String.makeInstance(String.fromCharCode(b.toInteger()))},string_question_:function(b){return D(b)},substring:function(b,d,j){m(b,D,"substring","string",1);m(d,h,"substring","natural",2);m(j,h,"substring","natural",3);if(d.toInteger()>j.toInteger())throw new C("substring: begin > end");if(j.toInteger()>b.length)throw new C("substring: end > length");return String.makeInstance(b.substring(d.toInteger(),
j.toInteger()))},char_question_:function(b){return r(b)},char_dash__greaterthan_integer:function(b){m(b,r,"char->integer","char",1);b=new String(b.val);return plt.types.Rational.makeInstance(b.charCodeAt(0),1)},integer_dash__greaterthan_char:function(b){m(b,k,"integer->char","integer",1);b=String.fromCharCode(b.toInteger());return plt.types.Char.makeInstance(b)},char_equal__question_:ca(function(b,d){return b.val==d.val},"char=?"),char_lessthan__question_:ca(function(b,d){return b.val<d.val},"char<?"),
char_lessthan__equal__question_:ca(function(b,d){return b.val<=d.val},"char<=?"),char_greaterthan__question_:ca(function(b,d){return b.val>d.val},"char>?"),char_greaterthan__equal__question_:ca(function(b,d){return b.val>=d.val},"char>=?"),char_dash_ci_equal__question_:ca(function(b,d){return b.val.toUpperCase()==d.val.toUpperCase()},"char-ci=?"),char_dash_ci_lessthan__question_:ca(function(b,d){return b.val.toUpperCase()<d.val.toUpperCase()},"char-ci<?"),char_dash_ci_lessthan__equal__question_:ca(function(b,
d){return b.val.toUpperCase()<=d.val.toUpperCase()},"char-ci<=?"),char_dash_ci_greaterthan__question_:ca(function(b,d){return b.val.toUpperCase()>d.val.toUpperCase()},"char-ci>?"),char_dash_ci_greaterthan__equal__question_:ca(function(b,d){return b.val.toUpperCase()>=d.val.toUpperCase()},"char-ci>=?"),char_dash_numeric_question_:function(b){m(b,r,"char-numeric?","char",1);b=b.val;return b>="0"&&b<="9"},char_dash_alphabetic_question_:function(b){m(b,r,"char-alphabetic?","char",1);b=b.val;return f(b)},
char_dash_whitespace_question_:function(b){m(b,r,"char-whitespace?","char",1);b=b.val;return n(b)},char_dash_upper_dash_case_question_:function(b){m(b,r,"char-upper-case?","char",1);return f(b.val)&&b.val.toUpperCase()==b.val},char_dash_lower_dash_case_question_:function(b){m(b,r,"char-lower-case?","char",1);return f(b.val)&&b.val.toLowerCase()==b.val},char_dash_upcase:function(b){m(b,r,"char-upcase","char",1);return plt.types.Char.makeInstance(b.val.toUpperCase())},char_dash_downcase:function(b){m(b,
r,"char-downcase","char",1);return plt.types.Char.makeInstance(b.val.toLowerCase())},list_dash__greaterthan_string:function(b){na(b,r,"list->string","char",1);for(var d="";!b.isEmpty();){d+=b.first().val;b=b.rest()}return plt.types.String.makeInstance(d)},implode:function(b){na(b,D,"implode","string",1);for(var d=[];!b.isEmpty();){d.push(b.first().toString());b=b.rest()}return plt.types.String.makeInstance(d.join(""))},string_dash_numeric_question_:function(b){m(b,D,"string-numeric?","string",1);
for(var d=0;d<b.length;d++)if(b[d]<"0"||b[d]>"9")return plt.types.Logic.FALSE;return plt.types.Logic.TRUE},string_dash_alphabetic_question_:function(b){m(b,D,"string-alphabetic?","string",1);return f(b)?plt.types.Logic.TRUE:plt.types.Logic.FALSE},string_dash_whitespace_question_:function(b){m(b,D,"string-whitespace?","string",1);return n(b)?plt.types.Logic.TRUE:plt.types.Logic.FALSE},string_dash_upper_dash_case_question_:function(b){m(b,D,"string-upper-case?","string",1);return f(b)&&b.toUpperCase()==
b},string_dash_lower_dash_case_question_:function(b){m(b,D,"string-lower-case?","string",1);return f(b)&&b.toLowerCase()==b},string:function(b){G(b,function(s,E){m(this,r,"string","char",E+1)});for(var d=[],j=0;j<b.length;j++)d.push(b[j].val);return String.makeInstance(d.join(""))},make_dash_string:function(b,d){m(b,h,"make-string","natural",1);m(d,r,"make-string","char",2);var j="";d=d.val;for(var s=plt.types.Rational.ZERO;plt.Kernel._lessthan_(s,b,[]);s=plt.Kernel.add1(s))j+=d;return plt.types.String.makeInstance(j)},
string_dash__greaterthan_list:function(b){m(b,D,"string->list","string",1);b=b;for(var d=plt.types.Empty.EMPTY,j=b.length-1;j>=0;j--)d=plt.types.Cons.makeInstance(plt.types.Char.makeInstance(b.charAt(j)),d);return d},explode:function(b){m(b,D,"explode","string",1);b=b;for(var d=plt.types.Empty.EMPTY,j=b.length-1;j>=0;j--)d=plt.types.Cons.makeInstance(plt.types.String.makeInstance(b.charAt(j)),d);return d}};plt.Kernel._dumpKernelSymbols=function(){var b=plt.types.Empty.EMPTY;for(var d in plt.Kernel)b=
plt.types.Cons.makeInstance(plt.types.Symbol.makeInstance(d),b);return b};plt.Kernel.openInputStx=function(){throw new C("open-input-stx currently unsupported");};function ha(){this.hash=new plt._Hashtable}ha.prototype.toWrittenString=function(){return"<hash>"};ha.prototype.toDisplayedString=function(){return"<hash>"};ha.prototype.isEqual=function(b){return this===b};plt.Kernel.makeHashEq=function(){var b=new ha;return b};plt.Kernel.hashSetBang=function(b,d,j){m(b,t,"hash-set!","hash",1);b.hash.put(d,
j)};plt.Kernel.hashRef=function(b,d,j){m(b,t,"hash-ref","hash",1);if(b.hash.containsKey(d))return b.hash.get(d);else{if(F(j))return j([]);return j}};plt.Kernel.hashRemoveBang=function(b,d){m(b,t,"hash-remove!","hash",1);b.hash.remove(d)};plt.Kernel.hashMap=function(b,d){m(b,t,"hash-map","hash",1);for(var j=plt.types.Empty.EMPTY,s=b.hash.keys(),E=0;E<s.length;E++){var R=b.hash.get(s[E]);j=plt.Kernel.cons(d([s[E],R]),j)}return j};function t(b){return b!=null&&b!=undefined&&b instanceof ha}plt.Kernel.isHash=
t;plt.Kernel.apply=function(b,d,j){var s,E=[];m(b,F,"apply","function",1);if(j.length==0){s=d;for(O(s,"apply",2);!s.isEmpty();){var R=s.first();E.push(R);s=s.rest()}}else{s=j.pop();for(O(s,"apply",3);!s.isEmpty();){R=s.first();E.push(R);s=s.rest()}for(;j.length>0;)E.unshift(j.pop());E.unshift(d)}return b(E)};plt.Kernel.map=function(b,d){m(b,F,"map","function",1);G(d,function(R,Y){O(R,"map",Y+2)});for(var j=plt.types.Empty.EMPTY;!d[0].isEmpty();){for(var s=[],E=0;E<d.length;E++){s.push(d[E].first());
d[E]=d[E].rest()}j=plt.Kernel.cons(b(s),j)}return plt.Kernel.reverse(j)};plt.Kernel.for_dash_each=function(b,d){m(b,F,"for-each","function",1);for(G(d,function(E,R){O(E,"for-each",R+2)});!d[0].isEmpty();){for(var j=[],s=0;s<d.length;s++){j.push(d[s].first());d[s]=d[s].rest()}b(j)}};plt.Kernel.andmap=function(b,d){m(b,F,"andmap","function",1);for(G(d,function(E,R){O(E,"andmap",R+2)});!d[0].isEmpty();){for(var j=[],s=0;s<d.length;s++){j.push(d[s].first());d[s]=d[s].rest()}if(!b(j))return plt.types.Logic.FALSE}return plt.types.Logic.TRUE};
plt.Kernel.ormap=function(b,d){m(b,F,"ormap","function",1);for(G(d,function(E,R){O(E,"ormap",R+2)});!d[0].isEmpty();){for(var j=[],s=0;s<d.length;s++){j.push(d[s].first());d[s]=d[s].rest()}if(b(j))return plt.types.Logic.TRUE}return plt.types.Logic.FALSE};plt.Kernel.filter=function(b,d){m(b,F,"filter","function",1);m(d,H,"filter","list",2);for(var j=plt.types.Empty.EMPTY;!d.isEmpty();){if(b([d.first()]))j=plt.types.Cons.makeInstance(d.first(),j);d=d.rest()}return plt.Kernel.reverse(j)};plt.Kernel.foldl=
function(b,d,j){m(b,F,"foldl","function",1);G(j,function(R,Y){m(R,H,"foldl","list",Y+3)});for(d=d;!j[0].isEmpty();){for(var s=[],E=0;E<j.length;E++){s.push(j[E].first());j[E]=j[E].rest()}s.push(d);d=b(s)}return d};plt.Kernel.foldr=function(b,d,j){m(b,F,"foldr","function",1);G(j,function(R,Y){m(R,H,"foldr","list",Y+3)});d=d;for(var s=0;s<j.length;s++)j[s]=plt.Kernel.reverse(j[s]);for(;!j[0].isEmpty();){var E=[];for(s=0;s<j.length;s++){E.push(j[s].first());j[s]=j[s].rest()}E.push(d);d=b(E)}return d};
plt.Kernel.argmin=function(b,d){m(b,F,"argmin","function",1);m(d,N,"argmin","nonempty list",2);var j=d.first(),s=b([d.first()]).toFloat();for(d=d.rest();!d.isEmpty();){var E=b([d.first()]).toFloat();if(E<s){j=d.first();s=E}d=d.rest()}return j};plt.Kernel.argmax=function(b,d){m(b,F,"argmax","function",1);m(d,N,"argmax","nonempty list",2);var j=d.first(),s=b([d.first()]).toFloat();for(d=d.rest();!d.isEmpty();){var E=b([d.first()]).toFloat();if(E>s){j=d.first();s=E}d=d.rest()}return j};plt.Kernel.sort=
function(b,d){m(b,H,"sort","list",1);m(d,F,"sort","function",2);for(var j=[];!b.isEmpty();){j.push(b.first());b=b.rest()}j.sort(function(s,E){return d([s,E])?-1:1});return plt.Kernel.list(j)};plt.Kernel.quicksort=plt.Kernel.sort;plt.Kernel.build_dash_list=function(b,d){m(b,h,"build-list","natural",1);m(d,F,"build-list","function",2);for(var j=plt.types.Empty.EMPTY,s=0;s<b.toInteger();s++)j=plt.Kernel.cons(d([plt.types.Rational.makeInstance(s,1)]),j);return plt.Kernel.reverse(j)};plt.Kernel.build_dash_string=
function(b,d){m(b,h,"build-string","natural",1);m(d,F,"build-string","function",2);for(var j=[],s=0;s<b.toInteger();s++){var E=d([plt.types.Rational.makeInstance(s,1)]);j.push(E.val)}return plt.types.String.makeInstance(j.join(""))};plt.Kernel.format=function(b,d){m(b,D,"format","string",1);var j=new RegExp("~[sSaAn%~]","g"),s=d;function E(R){if(R=="~~")return"~";else if(R=="~n"||R=="~%")return"\n";else if(R=="~s"||R=="~S"){if(s.length==0)throw new C("format: fewer arguments passed than expected");
return plt.Kernel.toWrittenString(s.shift())}else if(R=="~a"||R=="~A"){if(s.length==0)throw new C("format: fewer arguments passed than expected");return plt.Kernel.toDisplayedString(s.shift())}else throw new C("Unimplemented format "+R);}b=plt.types.String.makeInstance(b.replace(j,E));if(s.length>0)throw new C("format: More arguments passed than expected");return b};plt.Kernel.string=function(b){for(var d=[],j=0;j<b.length;j++)d.push(b[j].getValue());return plt.types.String.makeInstance(d.join(""))};
plt.Kernel.procedure_question_=function(b){return F(b)};plt.Kernel.xml_dash__greaterthan_s_dash_exp=function(b){m(b,D,"xml->s-exp","string",1);if(b.length==0)return plt.types.String.makeInstance("");var d;try{d=new ActiveXObject("Microsoft.XMLDOM");d.async="false";d.loadXML(b)}catch(j){d=new DOMParser;d=d.parseFromString(b,"text/xml")}function s(R){for(var Y=plt.types.Empty.EMPTY,ea=0;ea<R.length;ea++){var aa=plt.types.Cons.makeInstance(plt.types.Symbol.makeInstance(R.item(ea).nodeName),plt.types.Cons.makeInstance(R.item(ea).nodeValue,
plt.types.Empty.EMPTY));Y=plt.types.Cons.makeInstance(aa,Y)}return plt.types.Cons.makeInstance(plt.types.Symbol.makeInstance("@"),plt.Kernel.reverse(Y))}function E(R){if(R.nodeType==Node.ELEMENT_NODE){for(var Y=plt.types.Empty.EMPTY,ea=R.firstChild;ea!=null;){var aa=E(ea);Y=D(aa)&&!Y.isEmpty()&&D(Y.first())?plt.types.Cons.makeInstance(Y.first()+aa,Y.rest()):plt.types.Cons.makeInstance(aa,Y);ea=ea.nextSibling}Y=plt.Kernel.reverse(Y);Y=plt.types.Cons.makeInstance(s(R.attributes),Y);return Y=plt.types.Cons.makeInstance(plt.types.Symbol.makeInstance(R.nodeName),
Y)}else return R.nodeType==Node.TEXT_NODE?R.textContent:R.nodeType==Node.CDATA_SECTION_NODE?R.data:plt.types.Empty.EMPTY}return b=E(d.firstChild)};plt.Kernel.split_dash_whitespace=function(b){b=b.replace(/^\s+/,"");b=b.replace(/\s+$/,"");return plt.Kernel.list(b.split(/\s+/))};function Q(b){plt.Kernel.Struct.call(this,"box",[b])}Q.prototype=I(plt.Kernel.Struct.prototype);plt.Kernel.box=function(b){return new Q(b)};plt.Kernel.unbox=function(b){m(b,plt.Kernel.box_question_,"unbox","box",1);return b._fields[0]};
plt.Kernel.box_question_=function(b){return b!=null&&b!=undefined&&b instanceof Q};plt.Kernel.set_dash_box_bang_=function(b,d){m(b,plt.Kernel.box_question_,"set-box!","box",1);b._fields[0]=d};function T(b,d){plt.Kernel.Struct.call(this,"make-posn",[b,d])}T.prototype=I(plt.Kernel.Struct.prototype);function X(b,d){return new T(b,d)}function la(b){m(b,ja,"posn-x","posn",1);return b._fields[0]}function sa(b){m(b,ja,"posn-y","posn",1);return b._fields[1]}function ja(b){return b!=null&&b!=undefined&&b instanceof
T}plt.Kernel.make_dash_posn=X;plt.Kernel.posn_question_=ja;plt.Kernel.posn_dash_x=la;plt.Kernel.posn_dash_y=sa;plt.Kernel.error=function(b,d){m(b,y,"error","symbol",1);m(d,D,"error","string",2);throw new C(plt.Kernel.format("~a: ~a",[b,d]).toString());};plt.Kernel.syntax_dash_error=function(b,d){m(b,D,"syntax-error","string",1);m(d,v,"syntax-error","stx",2);throw new B(b,d);};plt.Kernel.toWrittenString=function(b,d){d||(d=new plt._Hashtable);if(d.containsKey(b))return"...";if(b==undefined||b==null)return"<undefined>";
if(typeof b=="string")return b.toWrittenString();if(typeof b!="object"&&typeof b!="function")return b.toString();if("toWrittenString"in b)return b.toWrittenString(d);return"toDisplayedString"in b?b.toDisplayedString(d):b.toString()};plt.Kernel.toDisplayedString=function(b,d){d||(d=new plt._Hashtable);if(d.containsKey(b))return"...";if(b==undefined||b==null)return"<undefined>";if(typeof b=="string")return b.toDisplayedString();if(typeof b!="object"&&typeof b!="function")return b.toString();if("toWrittenString"in
b)return b.toWrittenString(d);return"toDisplayedString"in b?b.toDisplayedString(d):b.toString()};plt.Kernel.toDomNode=function(b,d){d||(d=new plt._Hashtable);if(d.containsKey(b))return document.createTextNode("...");if(b==undefined||b==null)return b=document.createTextNode("<undefined>");if(typeof b=="string")return b=document.createTextNode(b.toWrittenString());if(typeof b!="object"&&typeof b!="function")return b=document.createTextNode(b.toString());if(b.nodeType)return b;if("toDomNode"in b)return b.toDomNode(d);
if("toWrittenString"in b)return b=document.createTextNode(plt.Kernel.toWrittenString(b,d));return b="toDisplayedString"in b?document.createTextNode(plt.Kernel.toDisplayedString(b,d)):document.createTextNode(b.toString())};plt.Kernel.Struct.prototype.toWrittenString=function(b){b.put(this,true);var d=[];d.push("(");d.push(this._constructorName);for(var j=0;j<this._fields.length;j++){d.push(" ");d.push(plt.Kernel.toWrittenString(this._fields[j],b))}d.push(")");return plt.types.String.makeInstance(d.join(""))};
plt.Kernel.Struct.prototype.toDisplayedString=plt.Kernel.Struct.prototype.toWrittenString;function ta(b,d){b.appendChild(d)}plt.Kernel.Struct.prototype.toDomNode=function(b){b.put(this,true);var d=document.createElement("div");d.appendChild(document.createTextNode("("));d.appendChild(document.createTextNode(this._constructorName));for(var j=0;j<this._fields.length;j++){d.appendChild(document.createTextNode(" "));ta(d,plt.Kernel.toDomNode(this._fields[j],b))}d.appendChild(document.createTextNode(")"));
return d};plt.Kernel.Struct.prototype.isEqual=function(b){if(typeof b!="object")return false;if(!b._constructorName)return false;if(b._constructorName!=this._constructorName)return false;if(false in b)return false;if(this._fields.length!=b._fields.length)return false;for(var d=0;d<this._fields.length;d++)if(!plt.Kernel.equal_question_(this._fields[d],b._fields[d]))return false;return true};plt.Kernel.reportError=function(b){var d;d=typeof console!="undefined"&&typeof console.log!="undefined"?function(j){console.log(j)}:
function(j){alert(j)};if(typeof b=="string")d(b);else b.msg?d(b.msg):d(b.toString());plt.Kernel.lastLoc&&d("Error was raised around "+plt.Kernel.lastLoc)};plt.Kernel._void_=function(){};plt.Kernel.build_dash_vector=function(b,d){m(b,h,"build-vector","natural",1);m(d,F,"build-vector","function",2);for(var j=[],s=0;s<b.toInteger();s++)j[s]=d([plt.types.Rational.makeInstance(s,1)]);return plt.types.Vector.makeInstance(b.toInteger(),j)};plt.Kernel.make_dash_vector=function(b){m(b,h,"make-vector","natural",
1);return plt.types.Vector.makeInstance(b.toInteger())};plt.Kernel.vector=function(b){return plt.types.Vector.makeInstance(b.length,b)};plt.Kernel.vector_dash_length=function(b){m(b,q,"vector-length","vector",1);return plt.types.Rational.makeInstance(b.length())};plt.Kernel.vector_dash_ref=function(b,d){m(b,q,"vector-ref","vector",1);m(d,function(j){return h(j)&&j.toInteger()<b.length()},"vector-ref","natural < vector length",2);return b.ref(d.toInteger())};plt.Kernel.vector_dash_set_bang_=function(b,
d,j){m(b,q,"vector-set!","vector",1);m(d,function(s){return h(s)&&s.toInteger()<b.length()},"vector-set!","natural < vector length",2);return b.set(d.toInteger(),j)};plt.Kernel.vector_question_=function(b){return q(b)?plt.types.Logic.TRUE:plt.types.Logic.FALSE};plt.Kernel.check_dash_expect=function(b,d){b=b([]);d=d([]);if(!plt.Kernel.equal_question_(b,d))throw new J(plt.Kernel.format("~s doesn't match the expected value ~s",[b,d]));};plt.Kernel.check_dash_within=function(b,d,j){b=b([]);d=d([]);j=
j([]);if(!plt.Kernel._equal__tilde_(b,d,j))throw new J(plt.Kernel.format("~s doesn't match the expected value ~s within ~s",[b,d,j]));};plt.Kernel.check_dash_error=function(b,d){d=d([]);var j;try{j=b([])}catch(s){if(plt.Kernel.equal_question_(s.msg,d))return;else throw new J(plt.Kernel.format("check-error encountered the error ~s instead of the expected error ~s.",[s.msg,d]));}throw new J(plt.Kernel.format("check-error expected the error ~s, but instead received the value ~s.",[d,j]));};plt.Kernel.lastLoc=
undefined;plt.Kernel.setLastLoc=function(b){plt.Kernel.lastLoc=b;return true};plt.Kernel.printf=function(b,d){b=plt.Kernel.format(b,d);plt.Kernel.printHook(b)};plt.Kernel.printHook=function(){};plt.Kernel.isSymbol=y;plt.Kernel.isChar=r;plt.Kernel.isString=D;plt.Kernel.isBoolean=L;plt.Kernel.isPair=N;plt.Kernel.isEmpty=P;plt.Kernel.isReal=S;plt.Kernel.isRational=V;plt.Kernel.isComplex=Z;plt.Kernel.isInteger=k;plt.Kernel.isNatural=h;plt.Kernel.isNumber=g;plt.Kernel.isAlphabeticString=f;plt.Kernel.isWhitespaceString=
n;plt.Kernel.isList=H;plt.Kernel.isVector=q;plt.Kernel.isFunction=F;plt.Kernel.arrayEach=G;plt.Kernel.check=m;plt.Kernel.checkList=O;plt.Kernel.checkListof=na;plt.Kernel.MobyError=z;plt.Kernel.MobyParserError=u;plt.Kernel.MobySyntaxError=B;plt.Kernel.MobyTypeError=A;plt.Kernel.MobyRuntimeError=C;plt.Kernel.attachEvent=c;plt.Kernel.detachEvent=l})();if(typeof plt=="undefined")plt={};plt.reader={};
(function(){function c(B){return B.replace(/\\./g,function(A){switch(A){case "\\b":return"\u0008";case "\\f":return"\u000c";case "\\n":return"\n";case "\\r":return"\r";case "\\t":return"\t";case "\\v":return"\u000b";default:return A.substring(1)}})}function l(B){var A,C=0;for(A=0;A<B.length;A++)B[A]=="\n"&&C++;return C}var I=[["whitespace",/^(\s+)/],["#;",/^([#][;])/],["comment",/^([#][|](?:(?:\|[^\#])|[^\|])*[|][#])/],["comment",/(^;[^\n]*)/],["(",/^(\(|\[|\{)/],[")",/^(\)|\]|\})/],["'",/^(\')/],
["`",/^(`)/],[",@",/^(,@)/],[",",/^(,)/],["char",/^\#\\(newline|backspace)/],["char",/^\#\\(.)/],["complex",/^((?:\#[ei])?[+\-]?(?:\d+\/\d+|\d+\.\d+|\d+\.|\.\d+|\d+)?[+\-](?:\d+\/\d+|\d+\.\d+|\d+\.|\.\d+|\d+)i)/],["number",/^((?:\#[ei])?[+-]inf.0)/],["number",/^((?:\#[ei])?[+-]nan.0)/],["number",/^((?:\#[ei])?[+\-]?(?:\d+\/\d+|\d+\.\d+|\d+\.|\.\d+|\d+))/],["string",/^"((?:([^\\"]|(\\.)))*)"/],["symbol",/^([a-zA-Z\:\+\=\~\_\?\!\@\#\$\%\^\&\*\-\/\.\>\<][\w\:\+\=\~\_\?\!\@\#\$\%\^\&\*\-\/\.\>\<]*)/]];
function z(B,A){var C=0,J=1,w=[];for(A||(A="");1;){for(var e=false,g=0;g<I.length;g++){var y=I[g][0],r=I[g][1];r=B.match(r);if(r!=null){if(y=="string")r[1]=c(r[1]);y!="whitespace"&&y!="comment"&&w.push([y,r[1],new Loc(C,J,r[0].length,A)]);C+=r[0].length;J+=l(r[0]);B=B.substring(r[0].length);e=true;break}}if(!e)break}return[w,B]}function u(B,A){var C=make_dash_stx_colon_list,J=make_dash_stx_colon_atom,w=z(B,A),e=w[0],g=undefined;if(w[1].length>0)throw new plt.Kernel.MobyParserError("Error while tokenizing: the rest of the stream is: "+
w[1],new Loc(B.length-w[1].length,l(B.substring(0,B.length-w[1].length)),w[1].length,A));var y=plt.types.Symbol.makeInstance("quote"),r=plt.types.Symbol.makeInstance("quasiquote"),v=plt.types.Symbol.makeInstance("unquote"),D=plt.types.Symbol.makeInstance("unquote-splicing"),L=plt.types.Empty.EMPTY;function N(h){return e.length>0&&e[0][0]==h}function P(h){if(e.length==0)if(g)throw new plt.Kernel.MobyParserError("token stream exhausted while trying to eat "+h,g[2]);else throw new plt.Kernel.MobyParserError("token stream exhausted while trying to eat "+
h,new Loc(0,0,B.length,A));var f=e.shift();g=f;if(f[0]==h)return f;else throw new plt.Kernel.MobyParserError("Unexpected token "+f,f[2]);}var S,V,Z;Z=function(h,f){h=P(h);var n=S();return C(plt.Kernel.cons(J(f,h[2]),plt.Kernel.cons(n,L)),new Loc(h[2].offset,h[2].line,n.loc.offset-h[2].offset+n.loc.span,""))};function F(h){switch(h){case "(":return")";case "[":return"]";case "{":return"}";default:throw new Error;}}function k(h,f){var n=h.match(/([+\-]?\d+)\/(\d+)/);if(h=="+inf.0")return plt.types.FloatPoint.makeInstance(Number.POSITIVE_INFINITY);
else if(h=="-inf.0")return plt.types.FloatPoint.makeInstance(Number.NEGATIVE_INFINITY);else if(h=="+nan.0"||h=="-nan.0")return plt.types.FloatPoint.makeInstance(Number.NaN);else if(h.match(/\./))if(f){h=h.match("^(.*)[.](.*)$");return plt.types.NumberTower.add(plt.types.Rational.makeInstance(parseInt(h[1]||"0")),plt.types.Rational.makeInstance(parseInt(h[2]),Math.pow(10,h[2].length)))}else return plt.types.FloatPoint.makeInstance(parseFloat(h));else return n?f?plt.types.Rational.makeInstance(parseInt(n[1]),
parseInt(n[2])):plt.types.FloatPoint.makeInstance(parseInt(n[1])/parseInt(n[2])):f?plt.types.Rational.makeInstance(parseInt(h),1):plt.types.FloatPoint.makeInstance(parseInt(h))}S=function(){if(e.length==0)if(g)throw new plt.Kernel.MobyParserError("Parse broke with empty token stream",g[2]);else throw new plt.Kernel.MobyParserError("Parse broke with empty token stream",new Loc(0,0,B.length,A));switch(e[0][0]){case "(":var h=P("("),f=h[1],n=F(h[1]),q=V();if(e.length==0)throw new plt.Kernel.MobyParserError("Expected a "+
n+" to close "+f,h[2]);else if(e[0][1]!=n)throw new plt.Kernel.MobyParserError("Expected a "+n+" to close "+f,e[0][2]);f=P(")");return make_dash_stx_colon_list(q,new Loc(h[2].offset,h[2].line,f[2].offset-h[2].offset+1,""));case "#;":P("#;");S();return S();case "'":return Z("'",y);case "`":return Z("`",r);case ",":return Z(",",v);case ",@":return Z(",@",D);case "number":h=P("number");return(q=h[1].match(/^(\#[ie])(.+)$/))?q[1]=="#i"?J(k(q[2],false),h[2]):J(k(q[2],true),h[2]):J(k(h[1],true),h[2]);case "complex":h=
P("complex");q=h[1].match(/^((?:\#[ei])?)([+\-]?(?:\d+\/\d+|\d+\.\d+|\d+\.|\.\d+|\d+)?)([+\-](?:\d+\/\d+|\d+\.\d+|\d+\.|\.\d+|\d+))i/);f=q[1]=="#i"?false:true;h=q[2]!=""?k(q[2],f):plt.types.Rational.ZERO;q=k(q[3],f);return h=J(plt.types.Complex.makeInstance(h,q));case "string":h=P("string");return J(plt.types.String.makeInstance(h[1]),h[2]);case "char":h=P("char");return h[1]=="newline"?J(plt.types.Char.makeInstance("\n"),h[2]):h[1]=="backspace"?J(plt.types.Char.makeInstance(String.fromCharCode(8)),
h[2]):J(plt.types.Char.makeInstance(h[1]),h[2]);case "symbol":h=P("symbol");if(h[1]==".")throw new plt.Kernel.MobyParserError("Dotted pairs are not currently accepted by Moby",h[2]);return J(plt.types.Symbol.makeInstance(h[1]),h[2]);default:throw new plt.Kernel.MobyParserError("Parse broke with token stream "+e,e[0][2]);}};V=function(){for(var h=plt.types.Empty.EMPTY;1;)if(e.length==0||N(")"))break;else if(N("#;")){P("#;");S()}else{var f=S();h=plt.types.Cons.makeInstance(f,h)}return plt.Kernel.reverse(h)};
w=V();if(e.length>0)throw new plt.Kernel.MobyParserError("More elements in the program's token stream than expected: the next unconsumed token is: "+e[0][1],e[0][2]);return w}plt.reader.tokenize=z;plt.reader.readSchemeExpressions=u})();function stx_colon_atom(c,l){plt.Kernel.Struct.call(this,"make-stx:atom",[c,l]);this.datum=c;this.loc=l}stx_colon_atom.prototype=new plt.Kernel.Struct;function make_dash_stx_colon_atom(c,l){return c=new stx_colon_atom(c,l)}
function stx_colon_atom_dash_datum(c){if(stx_colon_atom_question_(c))return c.datum;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("stx_colon_atom_dash_datum: not a stx:atom: ~s",[c]));}function stx_colon_atom_dash_loc(c){if(stx_colon_atom_question_(c))return c.loc;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("stx_colon_atom_dash_loc: not a stx:atom: ~s",[c]));}
function set_dash_stx_colon_atom_dash_datum_bang_(c,l){if(stx_colon_atom_question_(c))c.datum=l;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_stx_colon_atom_dash_datum_bang_: not a stx:atom: ~s",[c]));}function set_dash_stx_colon_atom_dash_loc_bang_(c,l){if(stx_colon_atom_question_(c))c.loc=l;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_stx_colon_atom_dash_loc_bang_: not a stx:atom: ~s",[c]));}
function stx_colon_atom_question_(c){return c!=null&&c!=undefined&&c instanceof stx_colon_atom}function stx_colon_list(c,l){plt.Kernel.Struct.call(this,"make-stx:list",[c,l]);this.elts=c;this.loc=l}stx_colon_list.prototype=new plt.Kernel.Struct;function make_dash_stx_colon_list(c,l){return new stx_colon_list(c,l)}
function stx_colon_list_dash_elts(c){if(stx_colon_list_question_(c))return c.elts;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("stx_colon_list_dash_elts: not a stx:list: ~s",[c]));}function stx_colon_list_dash_loc(c){if(stx_colon_list_question_(c))return c.loc;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("stx_colon_list_dash_loc: not a stx:list: ~s",[c]));}
function set_dash_stx_colon_list_dash_elts_bang_(c,l){if(stx_colon_list_question_(c))c.elts=l;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_stx_colon_list_dash_elts_bang_: not a stx:list: ~s",[c]));}function set_dash_stx_colon_list_dash_loc_bang_(c,l){if(stx_colon_list_question_(c))c.loc=l;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_stx_colon_list_dash_loc_bang_: not a stx:list: ~s",[c]));}
function stx_colon_list_question_(c){return c!=null&&c!=undefined&&c instanceof stx_colon_list}function Loc(c,l,I,z){plt.Kernel.Struct.call(this,"make-Loc",[c,l,I,z]);this.offset=c;this.line=l;this.span=I;this.id=z}Loc.prototype=new plt.Kernel.Struct;function make_dash_Loc(c,l,I,z){return new Loc(c,l,I,z)}function Loc_dash_offset(c){if(Loc_question_(c))return c.offset;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("Loc_dash_offset: not a Loc: ~s",[c]));}
function Loc_dash_line(c){if(Loc_question_(c))return c.line;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("Loc_dash_line: not a Loc: ~s",[c]));}function Loc_dash_span(c){if(Loc_question_(c))return c.span;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("Loc_dash_span: not a Loc: ~s",[c]));}function Loc_dash_id(c){if(Loc_question_(c))return c.id;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("Loc_dash_id: not a Loc: ~s",[c]));}
function set_dash_Loc_dash_offset_bang_(c,l){if(Loc_question_(c))c.offset=l;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_Loc_dash_offset_bang_: not a Loc: ~s",[c]));}function set_dash_Loc_dash_line_bang_(c,l){if(Loc_question_(c))c.line=l;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_Loc_dash_line_bang_: not a Loc: ~s",[c]));}
function set_dash_Loc_dash_span_bang_(c,l){if(Loc_question_(c))c.span=l;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_Loc_dash_span_bang_: not a Loc: ~s",[c]));}function set_dash_Loc_dash_id_bang_(c,l){if(Loc_question_(c))c.id=l;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_Loc_dash_id_bang_: not a Loc: ~s",[c]));}function Loc_question_(c){return c!=null&&c!=undefined&&c instanceof Loc}
function Loc_dash__greaterthan_string(c){return plt.Kernel.setLastLoc('offset=284 line=14 span=154 id="stx.ss"')&&plt.Kernel.format(plt.types.String.makeInstance("offset=~a line=~a span=~a id=~s"),[plt.Kernel.setLastLoc('offset=337 line=15 span=18 id="stx.ss"')&&Loc_dash_offset(c),plt.Kernel.setLastLoc('offset=367 line=16 span=16 id="stx.ss"')&&Loc_dash_line(c),plt.Kernel.setLastLoc('offset=395 line=17 span=16 id="stx.ss"')&&Loc_dash_span(c),plt.Kernel.setLastLoc('offset=423 line=18 span=14 id="stx.ss"')&&
Loc_dash_id(c)])}function stx_question_(c){return plt.Kernel.setLastLoc('offset=489 line=23 span=13 id="stx.ss"')&&stx_colon_atom_question_(c)||plt.Kernel.setLastLoc('offset=509 line=24 span=13 id="stx.ss"')&&stx_colon_list_question_(c)}
function stx_dash_e(c){return plt.Kernel.setLastLoc('offset=635 line=31 span=17 id="stx.ss"')&&stx_colon_atom_question_(c)?plt.Kernel.setLastLoc('offset=658 line=32 span=22 id="stx.ss"')&&stx_colon_atom_dash_datum(c):plt.Kernel.setLastLoc('offset=687 line=33 span=17 id="stx.ss"')&&stx_colon_list_question_(c)?plt.Kernel.setLastLoc('offset=710 line=34 span=21 id="stx.ss"')&&stx_colon_list_dash_elts(c):plt.Kernel.setLastLoc('offset=624 line=30 span=109 id="stx.ss"')&&plt.Kernel.error(plt.types.Symbol.makeInstance("cond"),
plt.types.String.makeInstance('cond: fell out of cond around "offset=624 line=30 span=109 id=\\"stx.ss\\""'))}
function stx_dash_loc(c){return plt.Kernel.setLastLoc('offset=797 line=40 span=17 id="stx.ss"')&&stx_colon_atom_question_(c)?plt.Kernel.setLastLoc('offset=820 line=41 span=20 id="stx.ss"')&&stx_colon_atom_dash_loc(c):plt.Kernel.setLastLoc('offset=847 line=42 span=17 id="stx.ss"')&&stx_colon_list_question_(c)?plt.Kernel.setLastLoc('offset=870 line=43 span=20 id="stx.ss"')&&stx_colon_list_dash_loc(c):plt.Kernel.setLastLoc('offset=786 line=39 span=106 id="stx.ss"')&&plt.Kernel.error(plt.types.Symbol.makeInstance("cond"),
plt.types.String.makeInstance('cond: fell out of cond around "offset=786 line=39 span=106 id=\\"stx.ss\\""'))}
function stx_dash_begins_dash_with_question_(c,l){return plt.Kernel.setLastLoc('offset=991 line=49 span=17 id="stx.ss"')&&stx_colon_atom_question_(c)?plt.types.Logic.FALSE:plt.Kernel.setLastLoc('offset=1023 line=51 span=17 id="stx.ss"')&&stx_colon_list_question_(c)?plt.Kernel.setLastLoc('offset=1051 line=52 span=36 id="stx.ss"')&&plt.Kernel.not(plt.Kernel.setLastLoc('offset=1056 line=52 span=30 id="stx.ss"')&&plt.Kernel.empty_question_(plt.Kernel.setLastLoc('offset=1064 line=52 span=21 id="stx.ss"')&&
stx_colon_list_dash_elts(c)))&&plt.Kernel.setLastLoc('offset=1098 line=53 span=47 id="stx.ss"')&&plt.Kernel.symbol_question_(plt.Kernel.setLastLoc('offset=1107 line=53 span=37 id="stx.ss"')&&stx_dash_e(plt.Kernel.setLastLoc('offset=1114 line=53 span=29 id="stx.ss"')&&plt.Kernel.first(plt.Kernel.setLastLoc('offset=1121 line=53 span=21 id="stx.ss"')&&stx_colon_list_dash_elts(c))))&&plt.Kernel.setLastLoc('offset=1156 line=54 span=74 id="stx.ss"')&&plt.Kernel.symbol_equal__question_(plt.Kernel.setLastLoc('offset=1166 line=54 span=37 id="stx.ss"')&&
stx_dash_e(plt.Kernel.setLastLoc('offset=1173 line=54 span=29 id="stx.ss"')&&plt.Kernel.first(plt.Kernel.setLastLoc('offset=1180 line=54 span=21 id="stx.ss"')&&stx_colon_list_dash_elts(c))),l):plt.Kernel.setLastLoc('offset=980 line=48 span=253 id="stx.ss"')&&plt.Kernel.error(plt.types.Symbol.makeInstance("cond"),plt.types.String.makeInstance('cond: fell out of cond around "offset=980 line=48 span=253 id=\\"stx.ss\\""'))}
function datum_dash__greaterthan_stx(c,l){return plt.Kernel.setLastLoc('offset=1461 line=65 span=14 id="stx.ss"')&&stx_question_(c)?c:plt.Kernel.setLastLoc('offset=1499 line=67 span=15 id="stx.ss"')&&plt.Kernel.pair_question_(c)||plt.Kernel.setLastLoc('offset=1515 line=67 span=16 id="stx.ss"')&&plt.Kernel.empty_question_(c)?plt.Kernel.setLastLoc('offset=1538 line=68 span=89 id="stx.ss"')&&make_dash_stx_colon_list(plt.Kernel.setLastLoc('offset=1553 line=68 span=47 id="stx.ss"')&&plt.Kernel.map(function(){plt.Kernel.setLastLoc('offset=1558 line=68 span=33 id="stx.ss"');
function I(z){z=z[0];return plt.Kernel.setLastLoc('offset=1570 line=68 span=20 id="stx.ss"')&&datum_dash__greaterthan_stx(z,l)}I.toWrittenString=function(){return"<function:lambda>"};I.toDisplayedString=I.toWrittenString;return I}(),[c]),l):plt.types.Logic.TRUE?plt.Kernel.setLastLoc('offset=1644 line=71 span=29 id="stx.ss"')&&make_dash_stx_colon_atom(c,l):plt.Kernel.setLastLoc('offset=1450 line=64 span=225 id="stx.ss"')&&plt.Kernel.error(plt.types.Symbol.makeInstance("cond"),plt.types.String.makeInstance('cond: fell out of cond around "offset=1450 line=64 span=225 id=\\"stx.ss\\""'))}
function stx_dash__greaterthan_datum(c){return plt.Kernel.setLastLoc('offset=1787 line=84 span=17 id="stx.ss"')&&stx_colon_atom_question_(c)?plt.Kernel.setLastLoc('offset=1810 line=85 span=22 id="stx.ss"')&&stx_colon_atom_dash_datum(c):plt.Kernel.setLastLoc('offset=1839 line=86 span=17 id="stx.ss"')&&stx_colon_list_question_(c)?plt.Kernel.setLastLoc('offset=1862 line=87 span=38 id="stx.ss"')&&plt.Kernel.map(function(){function l(I){return stx_dash__greaterthan_datum(I[0])}l.toWrittenString=function(){return"<function:stx->datum>"};
l.toDisplayedString=function(){return"<function:stx->datum>"};return l}(),[plt.Kernel.setLastLoc('offset=1878 line=87 span=21 id="stx.ss"')&&stx_colon_list_dash_elts(c)]):plt.Kernel.setLastLoc('offset=1776 line=83 span=126 id="stx.ss"')&&plt.Kernel.error(plt.types.Symbol.makeInstance("cond"),plt.types.String.makeInstance('cond: fell out of cond around "offset=1776 line=83 span=126 id=\\"stx.ss\\""'))}(function(c){(function(){})(c||plt.Kernel.identity)})();if(typeof plt=="undefined")plt={};
plt.world=plt.world||{};plt.world.config=plt.world.config||{};
(function(){function c(u,B){var A={};for(var C in u)A[C]=u[C];for(C in B)A[C]=B[C];return A}function l(){this.vals={changeWorld:false,shutdownWorld:false,initialEffect:false,onRedraw:false,onDraw:false,onDrawCss:false,tickDelay:false,onTick:false,onTickEffect:false,onKey:false,onKeyEffect:false,onTilt:false,onTiltEffect:false,onAcceleration:false,onAccelerationEffect:false,onShake:false,onShakeEffect:false,onLocationChange:false,onLocationChangeEffect:false,onAnnounce:false,onAnnounceEffect:false,
stopWhen:false,stopWhenEffect:false}}l.prototype.lookup=function(u){plt.Kernel.check(u,plt.Kernel.isString,"WorldConfig.lookup","string",1);if(u in this.vals)return this.vals[u];else throw Error("Can't find "+u+" in the configuration");};l.prototype.updateAll=function(u){var B=new l;B.vals=c(this.vals,u);return B};plt.world.config.WorldConfig=l;plt.world.config.CONFIG=new l;function I(){return make_dash_effect_colon_none()}function z(u,B){u.toWrittenString=function(){return"("+B+" ...)"};u.toDisplayedString=
u.toWrittenString;return u}plt.world.config.Kernel=plt.world.config.Kernel||{};plt.world.config.Kernel.onRedraw=function(u){plt.Kernel.check(u,plt.Kernel.isFunction,"on-redraw","function",1);return z(function(B){return B.updateAll({onRedraw:u})},"on-redraw")};plt.world.config.Kernel.initialEffect=function(u){return z(function(B){return B.updateAll({initialEffect:u})},"initial-effect")};plt.world.config.Kernel.onDraw=function(u,B){plt.Kernel.check(u,plt.Kernel.isFunction,"on-draw","function",1);plt.Kernel.check(B,
plt.Kernel.isFunction,"on-draw","function",2);return z(function(A){return A.updateAll({onDraw:u,onDrawCss:B})},"on-draw")};plt.world.config.Kernel.onTick=function(u,B){plt.Kernel.check(u,plt.Kernel.isNumber,"on-tick","number",1);plt.Kernel.check(B,plt.Kernel.isFunction,"on-tick","function",2);return plt.world.config.Kernel.onTick_star_(u,B,function(){return I()})};plt.world.config.Kernel.onTick_star_=function(u,B,A){plt.Kernel.check(u,plt.Kernel.isNumber,"on-tick*","number",1);plt.Kernel.check(B,
plt.Kernel.isFunction,"on-tick*","function",2);plt.Kernel.check(A,plt.Kernel.isFunction,"on-tick*","function",3);return z(function(C){var J={onTick:B,onTickEffect:A,tickDelay:plt.types.NumberTower.toInteger(plt.types.NumberTower.multiply(plt.types.Rational.makeInstance(1000,1),u))};return C.updateAll(J)},"on-tick")};plt.world.config.Kernel.onTilt=function(u){plt.Kernel.check(u,plt.Kernel.isFunction,"on-tilt","function",1);return plt.world.config.Kernel.onTilt_star_(u,function(){return I()})};plt.world.config.Kernel.onTilt_star_=
function(u,B){plt.Kernel.check(u,plt.Kernel.isFunction,"on-tilt*","function",1);plt.Kernel.check(B,plt.Kernel.isFunction,"on-tilt*","function",2);return z(function(A){return A.updateAll({onTilt:u,onTiltEffect:B})},"on-tilt")};plt.world.config.Kernel.onAnnounce=function(u){plt.Kernel.check(u,plt.Kernel.isFunction,"on-announce","function",1);return plt.world.config.Kernel.onAnnounce_star_(u,function(){return I()})};plt.world.config.Kernel.onAnnounce_star_=function(u,B){plt.Kernel.check(u,plt.Kernel.isFunction,
"on-announce*","function",1);plt.Kernel.check(B,plt.Kernel.isFunction,"on-announce*","function",2);return z(function(A){return A.updateAll({onAnnounce:u,onAnnounceEffect:B})},"on-announce")};plt.world.config.Kernel.onAcceleration=function(u){plt.Kernel.check(u,plt.Kernel.isFunction,"on-acceleration","function",1);return plt.world.config.Kernel.onAcceleration_star_(u,function(){return I()})};plt.world.config.Kernel.onAcceleration_star_=function(u,B){plt.Kernel.check(u,plt.Kernel.isFunction,"on-acceleration*",
"function",1);plt.Kernel.check(B,plt.Kernel.isFunction,"on-acceleration*","function",2);return z(function(A){return A.updateAll({onAcceleration:u,onAccelerationEffect:B})},"on-acceleration")};plt.world.config.Kernel.onShake=function(u){plt.Kernel.check(u,plt.Kernel.isFunction,"on-shake","function",1);return plt.world.config.Kernel.onShake_star_(u,function(){return I()})};plt.world.config.Kernel.onShake_star_=function(u,B){plt.Kernel.check(u,plt.Kernel.isFunction,"on-shake*","function",1);plt.Kernel.check(B,
plt.Kernel.isFunction,"on-shake*","function",2);return z(function(A){return A.updateAll({onShake:u,onShakeEffect:B})},"on-shake")};plt.world.config.Kernel.onKey=function(u){plt.Kernel.check(u,plt.Kernel.isFunction,"on-key","function",1);return plt.world.config.Kernel.onKey_star_(u,function(){return I()})};plt.world.config.Kernel.onKey_star_=function(u,B){plt.Kernel.check(u,plt.Kernel.isFunction,"on-key*","function",1);plt.Kernel.check(B,plt.Kernel.isFunction,"on-key*","function",2);return z(function(A){return A.updateAll({onKey:u,
onKeyEffect:B})},"on-key")};plt.world.config.Kernel.onLocationChange=function(u){plt.Kernel.check(u,plt.Kernel.isFunction,"on-location-change","function",1);return plt.world.config.Kernel.onLocationChange_star_(u,function(){return I()})};plt.world.config.Kernel.onLocationChange_star_=function(u,B){plt.Kernel.check(u,plt.Kernel.isFunction,"on-location-change*","function",1);plt.Kernel.check(B,plt.Kernel.isFunction,"on-location-change*","function",2);return z(function(A){return A.updateAll({onLocationChange:u,
onLocationChangeEffect:B})},"on-location-change")};plt.world.config.Kernel.stopWhen=function(u){plt.Kernel.check(u,plt.Kernel.isFunction,"stop-when","function",1);return plt.world.config.Kernel.stopWhen_star_(u,function(){return I()})};plt.world.config.Kernel.stopWhen_star_=function(u,B){plt.Kernel.check(u,plt.Kernel.isFunction,"stop-when*","function",1);plt.Kernel.check(B,plt.Kernel.isFunction,"stop-when*","function",2);return z(function(A){return A.updateAll({stopWhen:u,stopWhenEffect:B})},"stop-when")}})();
if(typeof plt=="undefined")plt={};plt.platform={};
(function(){plt.platform.Platform={};var c=false;plt.platform.Platform.getInstance=function(){c||(c=new l);return c};function l(){this.tiltService=N;this.shakeService=Z();this.locationService=I();this.telephonyService=P();this.networkService=h();this.soundService=q();this.powerService=W();this.smsService=na();this.pickPlaylistService=ca()}l.prototype.getTiltService=function(){return this.tiltService};l.prototype.getShakeService=function(){return this.shakeService};l.prototype.getLocationService=function(){return this.locationService};
l.prototype.getTelephonyService=function(){return this.telephonyService};l.prototype.getNetworkService=function(){return this.networkService};l.prototype.getSoundService=function(){return this.soundService};l.prototype.getPowerService=function(){return this.powerService};l.prototype.getSmsService=function(){return this.smsService};l.prototype.getPickPlaylistService=function(){return this.pickPlaylistService};function I(){return z()?new w:u()?new C:B()?new e:new J}function z(){return typeof Device!=
"undefined"}function u(){return window.google&&window.google.gears&&true}function B(){return typeof navigator!="undefined"&&typeof navigator.geolocation!="undefined"}function A(t,Q,T,X){function la(ja){return ja*Math.PI/180}function sa(ja,ta){return Math.pow(Math.sin((la(ja)-la(ta))/2),2)}return 12756000*Math.asin(Math.min(1,Math.sqrt(sa(t,T)+Math.cos(la(t))*Math.cos(la(T))*sa(Q,X))))}function C(){this.geo=google.gears.factory.create("beta.geolocation");this.listeners=[];this.currentPosition={latitude:0,
longitude:0,altitude:0,bearing:0,speed:0};this.watchId=false}C.prototype.startService=function(){var t=this;function Q(T){t.currentPosition.latitude=T.latitude;t.currentPosition.longitude=T.longitude;t.currentPosition.altitude=T.altitude;for(var X=0;X<t.listeners.length;X++)t.listeners[X](T.latitude,T.longitude)}this.watchId=this.geo.watchPosition(Q)};C.prototype.shutdownService=function(){this.geo.clearWatch(this.watchId)};C.prototype.addLocationChangeListener=function(t){this.listeners.push(t)};
C.prototype.getLatitude=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.latitude)};C.prototype.getLongitude=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.longitude)};C.prototype.getAltitude=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.altitude)};C.prototype.getBearing=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.bearing)};C.prototype.getSpeed=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.speed)};
C.prototype.getDistanceBetween=function(t,Q,T,X){return plt.types.FloatPoint.makeInstance(A(t.toFloat(),Q.toFloat(),T.toFloat(),X.toFloat()))};function J(){}J.prototype.startService=function(){};J.prototype.shutdownService=function(){};J.prototype.addLocationChangeListener=function(){};J.prototype.getLatitude=function(){return plt.types.Rational.ZERO};J.prototype.getLongitude=function(){return plt.types.Rational.ZERO};J.prototype.getAltitude=function(){return plt.types.Rational.ZERO};J.prototype.getBearing=
function(){return plt.types.Rational.ZERO};J.prototype.getSpeed=function(){return plt.types.Rational.ZERO};J.prototype.getDistanceBetween=function(t,Q,T,X){return plt.types.FloatPoint.makeInstance(A(t.toFloat(),Q.toFloat(),T.toFloat(),X.toFloat()))};function w(){this.locationListeners=[];this.currentPosition={latitude:0,longitude:0,atttitude:0,bearing:0,speed:0};this.watchId=false}w.prototype.startService=function(){var t=this;function Q(T){t.currentPosition.latitude=parseFloat(T.latitude);t.currentPosition.longitude=
parseFloat(T.longitude);for(T=0;T<t.locationListeners.length;T++){var X=t.locationListeners[T];X(t.currentPosition.latitude,t.currentPosition.longitude)}}this.watchId=navigator.geolocation.watchPosition(Q,function(){},{})};w.prototype.shutdownService=function(){navigator.geolocation.clearWatch(this.watchId)};w.prototype.addLocationChangeListener=function(t){this.locationListeners.push(t)};w.prototype.getLatitude=function(){return plt.types.FloatPoint.makeInstance(navigator.geolocation.lastPosition.latitude)};
w.prototype.getLongitude=function(){return plt.types.FloatPoint.makeInstance(navigator.geolocation.lastPosition.longitude)};w.prototype.getAltitude=function(){return plt.types.Rational.ZERO};w.prototype.getBearing=function(){return plt.types.Rational.ZERO};w.prototype.getSpeed=function(){return plt.types.Rational.ZERO};w.prototype.getDistanceBetween=function(t,Q,T,X){return plt.types.FloatPoint.makeInstance(navigator.geolocation.getDistanceBetween(t.toFloat(),Q.toFloat(),T.toFloat(),X.toFloat()))};
function e(){this.locationListeners=[];this.currentPosition={latitude:0,longitude:0,atttitude:0,bearing:0,speed:0};this.watchId=false}e.prototype.startService=function(){var t=this;function Q(T){t.currentPosition.latitude=T.coords.latitude;t.currentPosition.longitude=T.coords.longitude;for(var X=0;X<t.locationListeners.length;X++){var la=t.locationListeners[X];la(T.coords.latitude,T.coords.longitude)}}typeof navigator.geolocation!="undefined"&&typeof navigator.geolocation.getCurrentPosition!="undefined"&&
navigator.geolocation.watchPosition(Q);setTimeout(function(){navigator.geolocation.getCurrentPosition(Q)},10000)};e.prototype.shutdownService=function(){if(this.watchId){navigator.geolocation.clearWatch(this.watchId);this.watchId=false}};e.prototype.addLocationChangeListener=function(t){this.locationListeners.push(t)};e.prototype.getLatitude=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.latitude)};e.prototype.getLongitude=function(){return plt.types.FloatPOint.makeInstance(this.currentPosition.longitude)};
e.prototype.getAltitude=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.altitude)};e.prototype.getBearing=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.bearing)};e.prototype.getSpeed=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.speed)};e.prototype.getDistanceBetween=function(t,Q,T,X){return plt.types.FloatPoint.makeInstance(A(t.toFloat(),Q.toFloat(),T.toFloat(),X.toFloat()))};var g=[],y=[],r,v;function D(t){for(var Q=
0;Q<g.length;Q++)g[Q](parseFloat(t.x),parseFloat(t.y),parseFloat(t.z))}function L(t){for(var Q=0;Q<y.length;Q++)y[Q](parseFloat(t.azimuth),parseFloat(t.pitch),parseFloat(t.roll))}var N={startService:function(){if(typeof Accelerometer!="undefined"){r=navigator.accelerometer.watchAcceleration(D,function(){});v=navigator.accelerometer.watchOrientation(L,function(){})}},shutdownService:function(){if(typeof Accelerometer!="undefined"){navigator.accelerometer.clearWatch(r);navigator.accelerometer.clearWatch(v);
navigator.accelerometer.stopAllShakeWatches()}},addOrientationChangeListener:function(t){y.push(t)},addAccelerationChangeListener:function(t){g.push(t)}};function P(){return z()?new V:new S}function S(){}S.prototype.getSignalStrengths=function(){return plt.types.Empty.EMPTY};function V(){}V.prototype.getSignalStrengths=function(){for(var t=plt.types.Empty.EMPTY,Q=Device.getSignalStrengths(),T=0;T<Q.length;T++){var X=Q.get(T);t=plt.types.Cons.makeInstance(plt.Kernel.list([toNum(X.getId()),toNum(X.getStrength())]),
t)}return t};function Z(){return z()?new F:new k}function F(){this.listeners=[]}F.prototype.startService=function(){var t=this;function Q(){for(var X=0;X<t.listeners.length;X++)t.listeners[X]()}function T(){}this.shakeId=navigator.accelerometer.watchShake(Q,T)};F.prototype.shutdownService=function(){navigator.accelerometer.stopAllShakeWatches()};F.prototype.addListener=function(t){this.listeners.push(t)};function k(){}k.prototype.startService=function(){};k.prototype.shutdownService=function(){};
k.prototype.addListener=function(){};function h(){return z()?new f:new n}function f(){}f.prototype.getUrl=function(t){t=Device.getUrl(t);return plt.types.String.makeInstance(""+t)};function n(){}n.prototype.getUrl=function(t){var Q=new XMLHttpRequest;t="/networkProxy?url="+encodeURIComponent(t);Q.open("GET",t,false);Q.send(null);return plt.types.String.makeInstance(Q.responseText)};function q(){return z()?new K:G()?new M:new H}function G(){return!!document.createElement("audio").canPlayType}function K(){}
K.prototype.beep=function(){navigator.notification.beep(1)};K.prototype.playPlaylist=function(t){Device.playPlaylistRecord(t)};K.prototype.pausePlaylist=function(t){Device.pausePlaylistRecord(t)};K.prototype.stopPlaylist=function(t){Device.stopPlaylistRecord(t)};K.prototype.playSoundUrl=function(t){navigator.audio.playMusic(t)};K.prototype.playDtmfTone=function(t,Q){navigator.audio.playDTMF(t);setTimeout(function(){navigator.audio.stopDTMF()},Q)};K.prototype.stopSoundUrl=function(t){navigator.audio.stopMusic(t)};
K.prototype.pauseSoundUrl=function(t){navigator.audio.pauseMusic(t)};K.prototype.setVolume=function(t){navigator.audio.setMusicVolume(t)};K.prototype.raiseVolume=function(){navigator.audio.increaseMusicVolume()};K.prototype.lowerVolume=function(){navigator.audio.decreaseMusicVolume()};function M(){this.cachedUrls={};this.baseVolume=100}M.prototype.beep=function(){alert("Beep")};M.prototype.playPlaylistSound=function(){};M.prototype.pausePlaylistSound=function(){};M.prototype.stopPlaylistSound=function(){};
M.prototype.playSoundUrl=function(t){this.cachedUrls[t]||(this.cachedUrls[t]=new Audio(t));var Q=this.cachedUrls[t];if(Q.ended||Q.paused)this.cachedUrls[t].play()};M.prototype.playDtmfTone=function(){alert("dtmf tone")};M.prototype.stopSoundUrl=function(t){if(this.cachedUrls[t]){this.cachedUrls[t].pause();this.cachedUrls[t].currentTime=0}};M.prototype.pauseSoundUrl=function(t){this.cachedUrls[t]&&this.cachedUrls[t].pause()};M.prototype.setVolume=function(t){for(var Q in this.cachedUrls)this.cachedUrls[Q].volume=
t/100;this.baseVolume=t};M.prototype.raiseVolume=function(){this.setVolume(Math.min(this.baseVolume+5,100))};M.prototype.lowerVolume=function(){this.setVolume(Math.max(this.baseVolume-5,0))};function H(){}H.prototype.beep=function(){alert("Beep")};H.prototype.playPlaylistSound=function(){};H.prototype.pausePlaylistSound=function(){};H.prototype.stopPlaylistSound=function(){};H.prototype.playSoundUrl=function(t){alert("sound url "+t)};H.prototype.playDtmfTone=function(){alert("dtmf tone")};H.prototype.stopSoundUrl=
function(){};H.prototype.pauseSoundUrl=function(){};H.prototype.setVolume=function(){};H.prototype.raiseVolume=function(){};H.prototype.lowerVolume=function(){};function W(){return z()?new m:new O}function m(){this.currentLockFlags=-1}m.prototype.setWakeLock=function(t){if(t!=this.currentLockFlags){navigator.power.setWakeLock(t);this.currentLockFlags=t}};m.prototype.releaseWakeLock=function(){if(this.currentLockFlags!=-1){navigator.power.releaseWakeLock();this.currentLockFlags=-1}};function O(){}
O.prototype.setWakeLock=function(){};O.prototype.releaseWakeLock=function(){};function na(){return z()?new oa:new ka}function oa(){}oa.prototype.send=function(t,Q){navigator.sms.send(t,Q)};function ka(){}ka.prototype.send=function(t,Q){alert("SMS should be sent to "+t+" with the content: "+Q)};function ca(){return z()?new da:new ha}function da(){}da.prototype.pickPlaylist=function(t){function Q(T){t(T)}navigator.dialogPickers.pickPlaylist(Q)};function ha(){}ha.prototype.pickPlaylist=function(){alert("pick playlist currently unavailable")}})();
if(typeof plt=="undefined")plt={};plt.lib={};
(function(){plt.lib.Telephony={};plt.lib.Telephony.getSignalStrengths=function(){return plt.platform.Platform.getInstance().getTelephonyService().getSignalStrengths()};plt.lib.Location={};plt.lib.Location.getLatitude=function(){return plt.platform.Platform.getInstance().getLocationService().getLatitude()};plt.lib.Location.getLongitude=function(){return plt.platform.Platform.getInstance().getLocationService().getLongitude()};plt.lib.Location.getAttitude=function(){return plt.platform.Platform.getInstance().getLocationService().getAttitude()};
plt.lib.Location.getBearing=function(){return plt.platform.Platform.getInstance().getLocationService().getBearing()};plt.lib.Location.getSpeed=function(){return plt.platform.Platform.getInstance().getLocationService().getSpeed()};plt.lib.Location.getDistanceBetween=function(c,l,I,z){return plt.platform.Platform.getInstance().getLocationService().getDistanceBetween(c,l,I,z)};plt.lib.Net={};plt.lib.Net.getUrl=function(c){return plt.platform.Platform.getInstance().getNetworkService().getUrl(c)}})();
function effect_colon_none(){plt.Kernel.Struct.call(this,"make-effect:none",[])}effect_colon_none.prototype=new plt.Kernel.Struct;function make_dash_effect_colon_none(){return new effect_colon_none}function effect_colon_none_question_(c){return c!=null&&c!=undefined&&c instanceof effect_colon_none}function effect_colon_beep(){plt.Kernel.Struct.call(this,"make-effect:beep",[])}effect_colon_beep.prototype=new plt.Kernel.Struct;function make_dash_effect_colon_beep(){return new effect_colon_beep}
function effect_colon_beep_question_(c){return c!=null&&c!=undefined&&c instanceof effect_colon_beep}function effect_colon_play_dash_dtmf_dash_tone(c,l){plt.Kernel.Struct.call(this,"make-effect:play-dtmf-tone",[c,l]);this.tone=c;this.duration=l}effect_colon_play_dash_dtmf_dash_tone.prototype=new plt.Kernel.Struct;function make_dash_effect_colon_play_dash_dtmf_dash_tone(c,l){return new effect_colon_play_dash_dtmf_dash_tone(c,l)}
function effect_colon_play_dash_dtmf_dash_tone_dash_tone(c){if(effect_colon_play_dash_dtmf_dash_tone_question_(c))return c.tone;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:play-dtmf-tone-tone: not a effect:play-dtmf-tone: ~s",[c]));}
function effect_colon_play_dash_dtmf_dash_tone_dash_duration(c){if(effect_colon_play_dash_dtmf_dash_tone_question_(c))return c.duration;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:play-dtmf-tone-duration: not a effect:play-dtmf-tone: ~s",[c]));}
function set_dash_effect_colon_play_dash_dtmf_dash_tone_dash_tone_bang_(c,l){if(effect_colon_play_dash_dtmf_dash_tone_question_(c)){c.tone=l;c._fields[0]=l}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_play_dash_dtmf_dash_tone_dash_tone_bang_: not a effect:play-dtmf-tone: ~s",[c]));}
function set_dash_effect_colon_play_dash_dtmf_dash_tone_dash_duration_bang_(c,l){if(effect_colon_play_dash_dtmf_dash_tone_question_(c)){c.duration=l;c._fields[1]=l}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_play_dash_dtmf_dash_tone_dash_duration_bang_: not a effect:play-dtmf-tone: ~s",[c]));}function effect_colon_play_dash_dtmf_dash_tone_question_(c){return c!=null&&c!=undefined&&c instanceof effect_colon_play_dash_dtmf_dash_tone}
function effect_colon_send_dash_sms(c,l){plt.Kernel.Struct.call(this,"make-effect:send-sms",[c,l]);this.address=c;this.msg=l}effect_colon_send_dash_sms.prototype=new plt.Kernel.Struct;function make_dash_effect_colon_send_dash_sms(c,l){return new effect_colon_send_dash_sms(c,l)}
function effect_colon_send_dash_sms_dash_address(c){if(effect_colon_send_dash_sms_question_(c))return c.address;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:send-sms-address: not a effect:send-sms: ~s",[c]));}function effect_colon_send_dash_sms_dash_msg(c){if(effect_colon_send_dash_sms_question_(c))return c.msg;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:send-sms-msg: not a effect:send-sms: ~s",[c]));}
function set_dash_effect_colon_send_dash_sms_dash_address_bang_(c,l){if(effect_colon_send_dash_sms_question_(c)){c.address=l;c._fields[0]=l}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_send_dash_sms_dash_address_bang_: not a effect:send-sms: ~s",[c]));}
function set_dash_effect_colon_send_dash_sms_dash_msg_bang_(c,l){if(effect_colon_send_dash_sms_question_(c)){c.msg=l;c._fields[1]=l}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_send_dash_sms_dash_msg_bang_: not a effect:send-sms: ~s",[c]));}function effect_colon_send_dash_sms_question_(c){return c!=null&&c!=undefined&&c instanceof effect_colon_send_dash_sms}
function playlist_dash_sound(c){plt.Kernel.Struct.call(this,"make-playlist-sound",[c]);this.playlist=c}playlist_dash_sound.prototype=new plt.Kernel.Struct;function make_dash_playlist_dash_sound(c){return new playlist_dash_sound(c)}function playlist_dash_sound_dash_playlist(c){if(playlist_dash_sound_question_(c))return c.playlist;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("playlist-sound-playlist: not a playlist-sound: ~s",[c]));}
function set_dash_playlist_dash_sound_dash_playlist_bang_(c,l){if(playlist_dash_sound_question_(c)){c.playlist=l;c._fields[0]=l}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_playlist_dash_sound_dash_playlist_bang_: not a playlist-sound: ~s",[c]));}function playlist_dash_sound_question_(c){return c!=null&&c!=undefined&&c instanceof playlist_dash_sound}
function sound_question_(c){return plt.Kernel.setLastLoc('offset=417 line=19 span=11 id="effect-struct.ss"')&&plt.Kernel.string_question_(c)||plt.Kernel.setLastLoc('offset=435 line=20 span=19 id="effect-struct.ss"')&&playlist_dash_sound_question_(c)}function effect_colon_play_dash_sound(c){plt.Kernel.Struct.call(this,"make-effect:play-sound",[c]);this.sound=c}effect_colon_play_dash_sound.prototype=new plt.Kernel.Struct;
function make_dash_effect_colon_play_dash_sound(c){return new effect_colon_play_dash_sound(c)}function effect_colon_play_dash_sound_dash_sound(c){if(effect_colon_play_dash_sound_question_(c))return c.sound;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:play-sound-sound: not a effect:play-sound: ~s",[c]));}
function set_dash_effect_colon_play_dash_sound_dash_sound_bang_(c,l){if(effect_colon_play_dash_sound_question_(c)){c.sound=l;c._fields[0]=l}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_play_dash_sound_dash_sound_bang_: not a effect:play-sound: ~s",[c]));}function effect_colon_play_dash_sound_question_(c){return c!=null&&c!=undefined&&c instanceof effect_colon_play_dash_sound}
function effect_colon_pause_dash_sound(c){plt.Kernel.Struct.call(this,"make-effect:pause-sound",[c]);this.sound=c}effect_colon_pause_dash_sound.prototype=new plt.Kernel.Struct;function make_dash_effect_colon_pause_dash_sound(c){return new effect_colon_pause_dash_sound(c)}
function effect_colon_pause_dash_sound_dash_sound(c){if(effect_colon_pause_dash_sound_question_(c))return c.sound;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:pause-sound-sound: not a effect:pause-sound: ~s",[c]));}
function set_dash_effect_colon_pause_dash_sound_dash_sound_bang_(c,l){if(effect_colon_pause_dash_sound_question_(c)){c.sound=l;c._fields[0]=l}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_pause_dash_sound_dash_sound_bang_: not a effect:pause-sound: ~s",[c]));}function effect_colon_pause_dash_sound_question_(c){return c!=null&&c!=undefined&&c instanceof effect_colon_pause_dash_sound}
function effect_colon_stop_dash_sound(c){plt.Kernel.Struct.call(this,"make-effect:stop-sound",[c]);this.sound=c}effect_colon_stop_dash_sound.prototype=new plt.Kernel.Struct;function make_dash_effect_colon_stop_dash_sound(c){return new effect_colon_stop_dash_sound(c)}
function effect_colon_stop_dash_sound_dash_sound(c){if(effect_colon_stop_dash_sound_question_(c))return c.sound;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:stop-sound-sound: not a effect:stop-sound: ~s",[c]));}
function set_dash_effect_colon_stop_dash_sound_dash_sound_bang_(c,l){if(effect_colon_stop_dash_sound_question_(c)){c.sound=l;c._fields[0]=l}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_stop_dash_sound_dash_sound_bang_: not a effect:stop-sound: ~s",[c]));}function effect_colon_stop_dash_sound_question_(c){return c!=null&&c!=undefined&&c instanceof effect_colon_stop_dash_sound}
function effect_colon_set_dash_sound_dash_volume(c){plt.Kernel.Struct.call(this,"make-effect:set-sound-volume",[c]);this.volume=c}effect_colon_set_dash_sound_dash_volume.prototype=new plt.Kernel.Struct;function make_dash_effect_colon_set_dash_sound_dash_volume(c){return new effect_colon_set_dash_sound_dash_volume(c)}
function effect_colon_set_dash_sound_dash_volume_dash_volume(c){if(effect_colon_set_dash_sound_dash_volume_question_(c))return c.volume;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:set-sound-volume-volume: not a effect:set-sound-volume: ~s",[c]));}
function set_dash_effect_colon_set_dash_sound_dash_volume_dash_volume_bang_(c,l){if(effect_colon_set_dash_sound_dash_volume_question_(c)){c.volume=l;c._fields[0]=l}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_set_dash_sound_dash_volume_dash_volume_bang_: not a effect:set-sound-volume: ~s",[c]));}function effect_colon_set_dash_sound_dash_volume_question_(c){return c!=null&&c!=undefined&&c instanceof effect_colon_set_dash_sound_dash_volume}
function effect_colon_raise_dash_sound_dash_volume(){plt.Kernel.Struct.call(this,"make-effect:raise-sound-volume",[])}effect_colon_raise_dash_sound_dash_volume.prototype=new plt.Kernel.Struct;function make_dash_effect_colon_raise_dash_sound_dash_volume(){return new effect_colon_raise_dash_sound_dash_volume}function effect_colon_raise_dash_sound_dash_volume_question_(c){return c!=null&&c!=undefined&&c instanceof effect_colon_raise_dash_sound_dash_volume}
function effect_colon_lower_dash_sound_dash_volume(){plt.Kernel.Struct.call(this,"make-effect:lower-sound-volume",[])}effect_colon_lower_dash_sound_dash_volume.prototype=new plt.Kernel.Struct;function make_dash_effect_colon_lower_dash_sound_dash_volume(){return new effect_colon_lower_dash_sound_dash_volume}function effect_colon_lower_dash_sound_dash_volume_question_(c){return c!=null&&c!=undefined&&c instanceof effect_colon_lower_dash_sound_dash_volume}
function effect_colon_set_dash_wake_dash_lock(c){plt.Kernel.Struct.call(this,"make-effect:set-wake-lock",[c]);this.locks=c}effect_colon_set_dash_wake_dash_lock.prototype=new plt.Kernel.Struct;function make_dash_effect_colon_set_dash_wake_dash_lock(c){return new effect_colon_set_dash_wake_dash_lock(c)}
function effect_colon_set_dash_wake_dash_lock_dash_locks(c){if(effect_colon_set_dash_wake_dash_lock_question_(c))return c.locks;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:set-wake-lock-locks: not a effect:set-wake-lock: ~s",[c]));}
function set_dash_effect_colon_set_dash_wake_dash_lock_dash_locks_bang_(c,l){if(effect_colon_set_dash_wake_dash_lock_question_(c)){c.locks=l;c._fields[0]=l}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_set_dash_wake_dash_lock_dash_locks_bang_: not a effect:set-wake-lock: ~s",[c]));}function effect_colon_set_dash_wake_dash_lock_question_(c){return c!=null&&c!=undefined&&c instanceof effect_colon_set_dash_wake_dash_lock}
function effect_colon_release_dash_wake_dash_lock(){plt.Kernel.Struct.call(this,"make-effect:release-wake-lock",[])}effect_colon_release_dash_wake_dash_lock.prototype=new plt.Kernel.Struct;function make_dash_effect_colon_release_dash_wake_dash_lock(){return new effect_colon_release_dash_wake_dash_lock}function effect_colon_release_dash_wake_dash_lock_question_(c){return c!=null&&c!=undefined&&c instanceof effect_colon_release_dash_wake_dash_lock}
function effect_colon_pick_dash_playlist(c){plt.Kernel.Struct.call(this,"make-effect:pick-playlist",[c]);this.update_dash_f=c}effect_colon_pick_dash_playlist.prototype=new plt.Kernel.Struct;function make_dash_effect_colon_pick_dash_playlist(c){return new effect_colon_pick_dash_playlist(c)}
function effect_colon_pick_dash_playlist_dash_update_dash_f(c){if(effect_colon_pick_dash_playlist_question_(c))return c.update_dash_f;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:pick-playlist-update-f: not a effect:pick-playlist: ~s",[c]));}
function set_dash_effect_colon_pick_dash_playlist_dash_update_dash_f_bang_(c,l){if(effect_colon_pick_dash_playlist_question_(c)){c.update_dash_f=l;c._fields[0]=l}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_pick_dash_playlist_dash_update_dash_f_bang_: not a effect:pick-playlist: ~s",[c]));}function effect_colon_pick_dash_playlist_question_(c){return c!=null&&c!=undefined&&c instanceof effect_colon_pick_dash_playlist}
function effect_colon_pick_dash_random(c,l){plt.Kernel.Struct.call(this,"make-effect:pick-random",[c,l]);this.n=c;this.update_dash_f=l}effect_colon_pick_dash_random.prototype=new plt.Kernel.Struct;function make_dash_effect_colon_pick_dash_random(c,l){return new effect_colon_pick_dash_random(c,l)}
function effect_colon_pick_dash_random_dash_n(c){if(effect_colon_pick_dash_random_question_(c))return c.n;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:pick-random-n: not a effect:pick-random: ~s",[c]));}function effect_colon_pick_dash_random_dash_update_dash_f(c){if(effect_colon_pick_dash_random_question_(c))return c.update_dash_f;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:pick-random-update-f: not a effect:pick-random: ~s",[c]));}
function set_dash_effect_colon_pick_dash_random_dash_n_bang_(c,l){if(effect_colon_pick_dash_random_question_(c)){c.n=l;c._fields[0]=l}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_pick_dash_random_dash_n_bang_: not a effect:pick-random: ~s",[c]));}
function set_dash_effect_colon_pick_dash_random_dash_update_dash_f_bang_(c,l){if(effect_colon_pick_dash_random_question_(c)){c.update_dash_f=l;c._fields[1]=l}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_pick_dash_random_dash_update_dash_f_bang_: not a effect:pick-random: ~s",[c]));}function effect_colon_pick_dash_random_question_(c){return c!=null&&c!=undefined&&c instanceof effect_colon_pick_dash_random}
function effect_question_(c){return plt.Kernel.setLastLoc('offset=1069 line=43 span=20 id="effect-struct.ss"')&&effect_colon_none_question_(c)||plt.Kernel.setLastLoc('offset=1096 line=44 span=20 id="effect-struct.ss"')&&effect_colon_beep_question_(c)||plt.Kernel.setLastLoc('offset=1123 line=45 span=30 id="effect-struct.ss"')&&effect_colon_play_dash_dtmf_dash_tone_question_(c)||plt.Kernel.setLastLoc('offset=1160 line=46 span=24 id="effect-struct.ss"')&&effect_colon_send_dash_sms_question_(c)||plt.Kernel.setLastLoc('offset=1191 line=47 span=26 id="effect-struct.ss"')&&
effect_colon_play_dash_sound_question_(c)||plt.Kernel.setLastLoc('offset=1224 line=48 span=27 id="effect-struct.ss"')&&effect_colon_pause_dash_sound_question_(c)||plt.Kernel.setLastLoc('offset=1258 line=49 span=26 id="effect-struct.ss"')&&effect_colon_stop_dash_sound_question_(c)||plt.Kernel.setLastLoc('offset=1291 line=50 span=32 id="effect-struct.ss"')&&effect_colon_set_dash_sound_dash_volume_question_(c)||plt.Kernel.setLastLoc('offset=1330 line=51 span=34 id="effect-struct.ss"')&&effect_colon_raise_dash_sound_dash_volume_question_(c)||
plt.Kernel.setLastLoc('offset=1371 line=52 span=34 id="effect-struct.ss"')&&effect_colon_lower_dash_sound_dash_volume_question_(c)||plt.Kernel.setLastLoc('offset=1412 line=53 span=29 id="effect-struct.ss"')&&effect_colon_set_dash_wake_dash_lock_question_(c)||plt.Kernel.setLastLoc('offset=1448 line=54 span=33 id="effect-struct.ss"')&&effect_colon_release_dash_wake_dash_lock_question_(c)||plt.Kernel.setLastLoc('offset=1488 line=55 span=29 id="effect-struct.ss"')&&effect_colon_pick_dash_playlist_question_(c)||
plt.Kernel.setLastLoc('offset=1524 line=56 span=27 id="effect-struct.ss"')&&effect_colon_pick_dash_random_question_(c)}(function(c){(function(){})(c||plt.Kernel.identity)})();if(typeof plt=="undefined")plt={};plt.world=plt.world||{};plt.world.Kernel=plt.world.Kernel||{};
(function(){var c,l=[],I,z=false;function u(f){function n(){}n.prototype=f;return new n}var B=[];plt.world.Kernel.addAnnounceListener=function(f){B.push(f)};plt.world.Kernel.removeAnnounceListener=function(f){f=B.indexOf(f);f!=-1&&B.splice(f,1)};plt.world.Kernel.announce=function(f,n){for(var q=0;q<B.length;q++)try{B[q](f,n)}catch(G){}};function A(f){c=f;C()}plt.world.Kernel.updateWorld=function(f){f=f(c);A(f)};plt.world.Kernel.shutdownWorld=function(){I=true};function C(){var f;for(f=0;f<l.length;f++)l[f](c)}
function J(f){l.push(f)}function w(){if(z){clearInterval(z);z=false}I=false;l=[]}function e(){if(window.document.getElementById("canvas")!=undefined)return window;var f=window.open("big-bang.html","big-bang");if(f==null)throw new Error("Error: Not allowed to create a new window.");return f}plt.world.Kernel.bigBang=function(f,n,q,G){plt.Kernel.check(f,plt.Kernel.isNumber,"big-bang","number",1);plt.Kernel.check(n,plt.Kernel.isNumber,"big-bang","number",2);plt.Kernel.arrayEach(args,function(W,m){plt.Kernel.check(W,
plt.Kernel.isFunction,"big-bang","handler",m+4)});var K=e(f,n),M=K.document.getElementById("canvas");M.width=f.toInteger();M.height=n.toInteger();w();var H=new plt.world.config.WorldConfig;for(f=0;f<G.length;f++)H=G[f](H);H=H.updateAll({changeWorld:plt.world.Kernel.updateWorld,shutdownWorld:plt.world.Kernel.shutdownWorld});plt.world.config.CONFIG=H;if(H.lookup("onKey"))K.onkeydown=function(W){plt.world.stimuli.onKey(W)};H.lookup("onRedraw")&&J(function(W){var m=M.getContext("2d");W=H.lookup("onRedraw")([W]);
W.render(m,0,0)});J(function(W){if(H.lookup("stopWhen"))if(H.lookup("stopWhen")([W]))I=true});H.lookup("onTick")&&g(K,H);A(q);if(H.lookup("initialEffect")){q=plt.world.Kernel.applyEffect(H.lookup("initialEffect"));for(f=0;f<q.length;f++)I||updateWorld(q)}};function g(f,n){z=f.setInterval(function(){if(I){f.clearTimeout(z);z=false}else plt.world.stimuli.onTick()},n.lookup("tickDelay"))}plt.world.Kernel.isKeyEqual=function(f,n){return f=f.toString().toLowerCase()==n.toString().toLowerCase()};plt.world.Kernel.imageWidth=
function(f){plt.Kernel.check(f,v,"image-width","image",1);return plt.types.Rational.makeInstance(f.getWidth(),1)};plt.world.Kernel.imageHeight=function(f){plt.Kernel.check(f,v,"image-height","image",1);return plt.types.Rational.makeInstance(f.getHeight(),1)};plt.world.Kernel.placeImage=function(f,n,q,G){plt.Kernel.check(f,v,"place-image","image",1);plt.Kernel.check(n,plt.Kernel.isNumber,"place-image","number",2);plt.Kernel.check(q,plt.Kernel.isNumber,"place-image","number",3);plt.Kernel.check(G,D,
"place-image","scene",4);return G.add(f,plt.types.NumberTower.toInteger(n),plt.types.NumberTower.toInteger(q))};plt.world.Kernel.emptyScene=function(f,n){plt.Kernel.check(f,plt.Kernel.isNumber,"empty-scene","number",1);plt.Kernel.check(n,plt.Kernel.isNumber,"empty-scene","number",2);return new L(plt.types.NumberTower.toInteger(f),plt.types.NumberTower.toInteger(n),[])};function y(f){return typeof h.get(f)!="undefined"}plt.world.Kernel.text=function(f,n,q){plt.Kernel.check(f,plt.Kernel.isString,"text",
"string",1);plt.Kernel.check(n,plt.Kernel.isNumber,"text","number",2);plt.Kernel.check(q,y,"text","color",3);if(h.get(q))q=h.get(q);return new V(f,plt.types.NumberTower.toInteger(n),q)};plt.world.Kernel.circle=function(f,n,q){plt.Kernel.check(f,plt.Kernel.isNumber,"circle","number",1);plt.Kernel.check(n,plt.Kernel.isString,"circle","string",2);plt.Kernel.check(q,y,"circle","color",3);if(h.get(q))q=h.get(q);return new Z(plt.types.NumberTower.toInteger(f),n,q)};plt.world.Kernel.openImageUrl=function(f){plt.Kernel.check(f,
plt.Kernel.isString,"open-image-url","string",1);return N.makeInstance(f.toString())};plt.world.Kernel.nwRectangle=function(f,n,q,G){plt.Kernel.check(f,plt.Kernel.isNumber,"nw:rectangle","number",1);plt.Kernel.check(n,plt.Kernel.isNumber,"nw:rectangle","number",2);plt.Kernel.check(q,plt.Kernel.isString,"nw:rectangle","string",3);plt.Kernel.check(G,y,"nw:rectangle","color",4);if(h.get(G))G=h.get(G);f=new S(plt.types.NumberTower.toInteger(f),plt.types.NumberTower.toInteger(n),q,G);return f.updatePinhole(0,
0)};plt.world.Kernel.rectangle=function(f,n,q,G){plt.Kernel.check(f,plt.Kernel.isNumber,"rectangle","number",1);plt.Kernel.check(n,plt.Kernel.isNumber,"rectangle","number",2);plt.Kernel.check(q,plt.Kernel.isString,"rectangle","string",3);plt.Kernel.check(G,y,"rectangle","color",4);if(h.get(G))G=h.get(G);return new S(plt.types.NumberTower.toInteger(f),plt.types.NumberTower.toInteger(n),q,G)};function r(f,n){this.pinholeX=f;this.pinholeY=n}plt.world.Kernel.BaseImage=r;function v(f){return f!=null&&
f!=undefined&&f instanceof r}plt.world.Kernel.isImage=v;r.prototype.updatePinhole=function(f,n){var q={};for(attr in this)q[attr]=this[attr];q.__proto__=this.__proto__;q.pinholeX=f;q.pinholeY=n;return q};r.prototype.render=function(){throw new MobyRuntimeError("Unimplemented method render");};plt.world.Kernel.makeCanvas=function(f,n){var q=document.createElement("canvas");q.width=f;q.height=n;q.style.width=q.width+"px";q.style.height=q.height+"px";if(window&&typeof window.G_vmlCanvasManager!="undefined"){q.style.display=
"none";document.body.appendChild(q);q=window.G_vmlCanvasManager.initElement(q);document.body.removeChild(q);q.style.display=""}return q};r.prototype.toDomNode=function(){var f=this,n=plt.world.Kernel.imageWidth(f).toInteger(),q=plt.world.Kernel.imageHeight(f).toInteger();n=plt.world.Kernel.makeCanvas(n,q);n.style.display="none";document.body.appendChild(n);q=n.getContext("2d");f.render(q,0,0);document.body.removeChild(n);n.style.display="";return n};r.prototype.toWrittenString=function(){return"<image>"};
r.prototype.toDisplayedString=function(){return"<image>"};plt.world.Kernel.image_question_=function(f){return v(f)};plt.world.Kernel.image_equal__question_=function(f,n){check(f,v,"image=?","image",1);check(n,v,"image=?","image",2);return f==n?plt.types.Logic.TRUE:plt.types.Logic.FALSE};function D(f){return f!=undefined&&f!=null&&f instanceof L}function L(f,n,q){r.call(this,0,0);this.width=f;this.height=n;this.children=q}L.prototype=u(r.prototype);L.prototype.add=function(f,n,q){return new L(this.width,
this.height,this.children.concat([[f,n,q]]))};L.prototype.render=function(f,n,q){var G,K,M,H;f.clearRect(n-this.pinholeX,q-this.pinholeY,this.width,this.height);for(G=0;G<this.children.length;G++){K=this.children[G][0];M=this.children[G][1];H=this.children[G][2];f.save();K.render(f,M+n-K.pinholeX,H+q-K.pinholeY);f.restore()}};L.prototype.getWidth=function(){return this.width};L.prototype.getHeight=function(){return this.height};function N(f,n){r.call(this,0,0);var q=this;this.isLoaded=false;if(n&&
n.complete){this.img=n;this.isLoaded=true;this.pinholeX=q.img.width/2;this.pinholeY=q.img.height/2}else{this.img=new Image;this.img.onload=function(){q.isLoaded=true;q.pinholeX=q.img.width/2;q.pinholeY=q.img.height/2};this.img.onerror=function(){q.img.onerror="";q.img.src="http://www.wescheme.org/images/broken.png"};this.img.src=f}}N.prototype=u(r.prototype);plt.world.Kernel.FileImage=N;var P={};N.makeInstance=function(f){f in P||(P[f]=new N(f));return P[f]};N.installInstance=function(f,n){P[f]=new N(f,
n)};N.prototype.render=function(f,n,q){f.drawImage(this.img,n,q)};N.prototype.getWidth=function(){return this.img.width};N.prototype.getHeight=function(){return this.img.height};N.prototype.toDomNode=function(){return this.img.cloneNode(true)};function S(f,n,q,G){r.call(this,f/2,n/2);this.width=f;this.height=n;this.style=q;this.color=G}S.prototype=u(r.prototype);S.prototype.render=function(f,n,q){f.fillStyle=this.color.toString();this.style.toString().toLowerCase()=="outline"?f.strokeRect(n,q,this.width,
this.height):f.fillRect(n,q,this.width,this.height)};S.prototype.getWidth=function(){return this.width};S.prototype.getHeight=function(){return this.height};function V(f,n,q){r.call(this,0,0);this.msg=f;this.size=n;this.color=q;this.font="Optimer"}V.prototype=u(r.prototype);V.prototype.render=function(f,n,q){if(f.fillText){f.font=this.size+"px Optimer";f.fillStyle=this.color.toRGBAString();f.fillText(this.msg,n,q)}else if("mozDrawText"in f){f.mozTextStyle=this.size+"px "+this.font;f.translate(n,q+
this.size);f.fillStyle=this.color;f.mozDrawText(this.msg)}};V.prototype.getWidth=function(){return this.size*this.msg.length};V.prototype.getHeight=function(){return 10};function Z(f,n,q){r.call(this,f,f);this.radius=f;this.style=n;this.color=q}Z.prototype=u(r.prototype);Z.prototype.render=function(f,n,q){f.translate(0,0);f.beginPath();f.fillStyle=this.color.toString();f.arc(n+this.radius,q+this.radius,this.radius,0,2*Math.PI,false);this.style.toString().toLowerCase()=="outline"?f.stroke():f.fill();
f.closePath()};Z.prototype.getWidth=function(){return this.radius*2};Z.prototype.getHeight=function(){return this.radius*2};plt.world.Kernel.applyEffect=function(f){var n=[];if(!plt.Kernel.empty_question_(f))if(plt.Kernel.pair_question_(f)){n=n.concat(plt.world.Kernel.applyEffect(f.first()));n=n.concat(plt.world.Kernel.applyEffect(f.rest()))}else if(f=f.run())n=n.concat(f);return n};effect_colon_none.prototype.run=function(){};effect_colon_beep.prototype.run=function(){plt.platform.Platform.getInstance().getSoundService().beep()};
effect_colon_play_dash_dtmf_dash_tone.prototype.run=function(){plt.platform.Platform.getInstance().getSoundService().playDtmfTone(this._fields[0].toInteger(),this._fields[1].toInteger())};effect_colon_send_dash_sms.prototype.run=function(){plt.platform.Platform.getInstance().getSmsService().send(this._fields[0],this._fields[1])};effect_colon_play_dash_sound.prototype.run=function(){if(plt.Kernel.isString(this._fields[0]))plt.platform.Platform.getInstance().getSoundService().playSoundUrl(this._fields[0]);
else playlist_dash_sound_question_(this._fields[0])&&plt.platform.Platform.getInstance().getSoundService().playPlaylist(this._fields[0]._fields[0])};effect_colon_pause_dash_sound.prototype.run=function(){if(plt.Kernel.isString(this._fields[0]))plt.platform.Platform.getInstance().getSoundService().pauseSoundUrl(this._fields[0]);else playlist_dash_sound_question_(this._fields[0])&&plt.platform.Platform.getInstance().getSoundService().pausePlaylist(this._fields[0]._fields[0])};effect_colon_stop_dash_sound.prototype.run=
function(){if(plt.Kernel.isString(this._fields[0]))plt.platform.Platform.getInstance().getSoundService().stopSoundUrl(this._fields[0]);else playlist_dash_sound_question_(this._fields[0])&&plt.platform.Platform.getInstance().getSoundService().stopPlaylist(this._fields[0]._fields[0])};effect_colon_set_dash_sound_dash_volume.prototype.run=function(){plt.platform.Platform.getInstance().getSoundService().setVolume(this._fields[0].toInteger())};effect_colon_raise_dash_sound_dash_volume.prototype.run=function(){plt.platform.Platform.getInstance().getSoundService.raiseVolume()};
effect_colon_lower_dash_sound_dash_volume.prototype.run=function(){plt.platform.Platform.getInstance().getSoundService.lowerVolume()};effect_colon_set_dash_wake_dash_lock.prototype.run=function(){plt.platform.Platform.getInstance().getPowerService().setWakeLock(this._fields[0].toInteger())};effect_colon_release_dash_wake_dash_lock.prototype.run=function(){plt.platform.Platform.getInstance().getPowerService().releaseWakeLock()};effect_colon_pick_dash_playlist.prototype.run=function(){var f=this._fields[0];
function n(q){var G=make_dash_playlist_dash_sound(q);setTimeout(function(){var K=plt.world.config.CONFIG.lookup("changeWorld");K(function(M){return f([M,G])})},0)}plt.platform.Platform.getInstance().getPickPlaylistService().pickPlaylist(n)};effect_colon_pick_dash_random.prototype.run=function(){var f=plt.types.Rational.makeInstance(Math.floor(plt.types.NumberTower.toInteger(this._fields[0])*Math.random()),1),n=this._fields[1];return function(q){return n([q,f])}};function F(){this.colors={}}F.prototype.put=
function(f,n){this.colors[f]=n};F.prototype.get=function(f){return this.colors[f.toString().toUpperCase()]};function k(f,n,q){this.r=f;this.g=n;this.b=q}k.prototype.toString=function(){return"rgb("+this.r+","+this.g+","+this.b+")"};k.prototype.toRGBAString=function(){return"rgba("+this.r+","+this.g+","+this.b+", 1)"};var h=new F;h.put("ORANGE",new k(255,165,0));h.put("RED",new k(255,0,0));h.put("ORANGERED",new k(255,69,0));h.put("TOMATO",new k(255,99,71));h.put("DARKRED",new k(139,0,0));h.put("RED",
new k(255,0,0));h.put("FIREBRICK",new k(178,34,34));h.put("CRIMSON",new k(220,20,60));h.put("DEEPPINK",new k(255,20,147));h.put("MAROON",new k(176,48,96));h.put("INDIAN RED",new k(205,92,92));h.put("INDIANRED",new k(205,92,92));h.put("MEDIUM VIOLET RED",new k(199,21,133));h.put("MEDIUMVIOLETRED",new k(199,21,133));h.put("VIOLET RED",new k(208,32,144));h.put("VIOLETRED",new k(208,32,144));h.put("LIGHTCORAL",new k(240,128,128));h.put("HOTPINK",new k(255,105,180));h.put("PALEVIOLETRED",new k(219,112,
147));h.put("LIGHTPINK",new k(255,182,193));h.put("ROSYBROWN",new k(188,143,143));h.put("PINK",new k(255,192,203));h.put("ORCHID",new k(218,112,214));h.put("LAVENDERBLUSH",new k(255,240,245));h.put("SNOW",new k(255,250,250));h.put("CHOCOLATE",new k(210,105,30));h.put("SADDLEBROWN",new k(139,69,19));h.put("BROWN",new k(132,60,36));h.put("DARKORANGE",new k(255,140,0));h.put("CORAL",new k(255,127,80));h.put("SIENNA",new k(160,82,45));h.put("ORANGE",new k(255,165,0));h.put("SALMON",new k(250,128,114));
h.put("PERU",new k(205,133,63));h.put("DARKGOLDENROD",new k(184,134,11));h.put("GOLDENROD",new k(218,165,32));h.put("SANDYBROWN",new k(244,164,96));h.put("LIGHTSALMON",new k(255,160,122));h.put("DARKSALMON",new k(233,150,122));h.put("GOLD",new k(255,215,0));h.put("YELLOW",new k(255,255,0));h.put("OLIVE",new k(128,128,0));h.put("BURLYWOOD",new k(222,184,135));h.put("TAN",new k(210,180,140));h.put("NAVAJOWHITE",new k(255,222,173));h.put("PEACHPUFF",new k(255,218,185));h.put("KHAKI",new k(240,230,140));
h.put("DARKKHAKI",new k(189,183,107));h.put("MOCCASIN",new k(255,228,181));h.put("WHEAT",new k(245,222,179));h.put("BISQUE",new k(255,228,196));h.put("PALEGOLDENROD",new k(238,232,170));h.put("BLANCHEDALMOND",new k(255,235,205));h.put("MEDIUM GOLDENROD",new k(234,234,173));h.put("MEDIUMGOLDENROD",new k(234,234,173));h.put("PAPAYAWHIP",new k(255,239,213));h.put("MISTYROSE",new k(255,228,225));h.put("LEMONCHIFFON",new k(255,250,205));h.put("ANTIQUEWHITE",new k(250,235,215));h.put("CORNSILK",new k(255,
248,220));h.put("LIGHTGOLDENRODYELLOW",new k(250,250,210));h.put("OLDLACE",new k(253,245,230));h.put("LINEN",new k(250,240,230));h.put("LIGHTYELLOW",new k(255,255,224));h.put("SEASHELL",new k(255,245,238));h.put("BEIGE",new k(245,245,220));h.put("FLORALWHITE",new k(255,250,240));h.put("IVORY",new k(255,255,240));h.put("GREEN",new k(0,255,0));h.put("LAWNGREEN",new k(124,252,0));h.put("CHARTREUSE",new k(127,255,0));h.put("GREEN YELLOW",new k(173,255,47));h.put("GREENYELLOW",new k(173,255,47));h.put("YELLOW GREEN",
new k(154,205,50));h.put("YELLOWGREEN",new k(154,205,50));h.put("MEDIUM FOREST GREEN",new k(107,142,35));h.put("OLIVEDRAB",new k(107,142,35));h.put("MEDIUMFORESTGREEN",new k(107,142,35));h.put("DARK OLIVE GREEN",new k(85,107,47));h.put("DARKOLIVEGREEN",new k(85,107,47));h.put("DARKSEAGREEN",new k(143,188,139));h.put("LIME",new k(0,255,0));h.put("DARK GREEN",new k(0,100,0));h.put("DARKGREEN",new k(0,100,0));h.put("LIME GREEN",new k(50,205,50));h.put("LIMEGREEN",new k(50,205,50));h.put("FOREST GREEN",
new k(34,139,34));h.put("FORESTGREEN",new k(34,139,34));h.put("SPRING GREEN",new k(0,255,127));h.put("SPRINGGREEN",new k(0,255,127));h.put("MEDIUM SPRING GREEN",new k(0,250,154));h.put("MEDIUMSPRINGGREEN",new k(0,250,154));h.put("SEA GREEN",new k(46,139,87));h.put("SEAGREEN",new k(46,139,87));h.put("MEDIUM SEA GREEN",new k(60,179,113));h.put("MEDIUMSEAGREEN",new k(60,179,113));h.put("AQUAMARINE",new k(112,216,144));h.put("LIGHTGREEN",new k(144,238,144));h.put("PALE GREEN",new k(152,251,152));h.put("PALEGREEN",
new k(152,251,152));h.put("MEDIUM AQUAMARINE",new k(102,205,170));h.put("MEDIUMAQUAMARINE",new k(102,205,170));h.put("TURQUOISE",new k(64,224,208));h.put("LIGHTSEAGREEN",new k(32,178,170));h.put("MEDIUM TURQUOISE",new k(72,209,204));h.put("MEDIUMTURQUOISE",new k(72,209,204));h.put("HONEYDEW",new k(240,255,240));h.put("MINTCREAM",new k(245,255,250));h.put("ROYALBLUE",new k(65,105,225));h.put("DODGERBLUE",new k(30,144,255));h.put("DEEPSKYBLUE",new k(0,191,255));h.put("CORNFLOWERBLUE",new k(100,149,
237));h.put("STEEL BLUE",new k(70,130,180));h.put("STEELBLUE",new k(70,130,180));h.put("LIGHTSKYBLUE",new k(135,206,250));h.put("DARK TURQUOISE",new k(0,206,209));h.put("DARKTURQUOISE",new k(0,206,209));h.put("CYAN",new k(0,255,255));h.put("AQUA",new k(0,255,255));h.put("DARKCYAN",new k(0,139,139));h.put("TEAL",new k(0,128,128));h.put("SKY BLUE",new k(135,206,235));h.put("SKYBLUE",new k(135,206,235));h.put("CADET BLUE",new k(96,160,160));h.put("CADETBLUE",new k(95,158,160));h.put("DARK SLATE GRAY",
new k(47,79,79));h.put("DARKSLATEGRAY",new k(47,79,79));h.put("LIGHTSLATEGRAY",new k(119,136,153));h.put("SLATEGRAY",new k(112,128,144));h.put("LIGHT STEEL BLUE",new k(176,196,222));h.put("LIGHTSTEELBLUE",new k(176,196,222));h.put("LIGHT BLUE",new k(173,216,230));h.put("LIGHTBLUE",new k(173,216,230));h.put("POWDERBLUE",new k(176,224,230));h.put("PALETURQUOISE",new k(175,238,238));h.put("LIGHTCYAN",new k(224,255,255));h.put("ALICEBLUE",new k(240,248,255));h.put("AZURE",new k(240,255,255));h.put("MEDIUM BLUE",
new k(0,0,205));h.put("MEDIUMBLUE",new k(0,0,205));h.put("DARKBLUE",new k(0,0,139));h.put("MIDNIGHT BLUE",new k(25,25,112));h.put("MIDNIGHTBLUE",new k(25,25,112));h.put("NAVY",new k(36,36,140));h.put("BLUE",new k(0,0,255));h.put("INDIGO",new k(75,0,130));h.put("BLUE VIOLET",new k(138,43,226));h.put("BLUEVIOLET",new k(138,43,226));h.put("MEDIUM SLATE BLUE",new k(123,104,238));h.put("MEDIUMSLATEBLUE",new k(123,104,238));h.put("SLATE BLUE",new k(106,90,205));h.put("SLATEBLUE",new k(106,90,205));h.put("PURPLE",
new k(160,32,240));h.put("DARK SLATE BLUE",new k(72,61,139));h.put("DARKSLATEBLUE",new k(72,61,139));h.put("DARKVIOLET",new k(148,0,211));h.put("DARK ORCHID",new k(153,50,204));h.put("DARKORCHID",new k(153,50,204));h.put("MEDIUMPURPLE",new k(147,112,219));h.put("CORNFLOWER BLUE",new k(68,64,108));h.put("MEDIUM ORCHID",new k(186,85,211));h.put("MEDIUMORCHID",new k(186,85,211));h.put("MAGENTA",new k(255,0,255));h.put("FUCHSIA",new k(255,0,255));h.put("DARKMAGENTA",new k(139,0,139));h.put("VIOLET",new k(238,
130,238));h.put("PLUM",new k(221,160,221));h.put("LAVENDER",new k(230,230,250));h.put("THISTLE",new k(216,191,216));h.put("GHOSTWHITE",new k(248,248,255));h.put("WHITE",new k(255,255,255));h.put("WHITESMOKE",new k(245,245,245));h.put("GAINSBORO",new k(220,220,220));h.put("LIGHT GRAY",new k(211,211,211));h.put("LIGHTGRAY",new k(211,211,211));h.put("SILVER",new k(192,192,192));h.put("GRAY",new k(190,190,190));h.put("DARK GRAY",new k(169,169,169));h.put("DARKGRAY",new k(169,169,169));h.put("DIM GRAY",
new k(105,105,105));h.put("DIMGRAY",new k(105,105,105));h.put("BLACK",new k(0,0,0))})();if(typeof plt=="undefined")var plt={};plt.Jsworld={};
(function(){var c=plt.Jsworld,l=false;function I(){}var z=new I,u=[],B=[];c.shutdown=function(){for(;B.length>0;){var i=B.pop();i&&i.pause()}J()};function A(i){u.push(i)}function C(i){i=u.indexOf(i);i!=-1&&u.splice(i,1)}function J(){z=new I;u=[]}function w(i){var p=z;try{z=i(z)}catch(o){return}if(p!=z)for(i=0;i<u.length;i++)try{u[i](z,p)}catch(x){z=p;throw x;}}c.change_world=w;Number.prototype.NaN0=function(){return isNaN(this)?0:this};function e(i){for(var p=0,o=0;i.offsetParent;){p+=i.offsetLeft+
(i.currentStyle?parseInt(i.currentStyle.borderLeftWidth).NaN0():0);o+=i.offsetTop+(i.currentStyle?parseInt(i.currentStyle.borderTopWidth).NaN0():0);i=i.offsetParent}p+=i.offsetLeft+(i.currentStyle?parseInt(i.currentStyle.borderLeftWidth).NaN0():0);o+=i.offsetTop+(i.currentStyle?parseInt(i.currentStyle.borderTopWidth).NaN0():0);return{x:p,y:o}}c.getPosition=e;var g=0;function y(){return g++}c.gensym=y;function r(i,p){for(var o=new Array(i.length),x=0;x<i.length;x++)o[x]=p(i[x]);return o}c.map=r;function v(i,
p){for(var o=[],x=0;x<i.length;x++)o=o.concat(p(i[x]));return o}function D(i,p){for(var o=new Array(i.length),x=0;x<i.length;x++)o[x]=p(i[x],x);return o}c.mapi=D;function L(i,p,o){for(var x=0;x<i.length;x++)p=o(i[x],p);return p}c.fold=L;function N(i,p){var o={};for(var x in i)o[x]=i[x];for(x in p)o[x]=p[x];return o}c.augment=N;function P(i,p,o){var x={};for(var U in i)x[U]=i[U];x[p]=o;return x}c.assoc_cons=P;function S(i,p){return i.concat([p])}c.cons=S;function V(i,p){return i.concat(p)}c.append=
V;function Z(i,p){for(var o=[],x=0;x<i.length;x++)o.push([i[x],p[x]]);return o}c.array_join=Z;function F(i,p){for(var o=0;o<i.length;o++)if(i[o]===p)return i.slice(0,o).concat(i.slice(o+1));return i}c.removeq=F;function k(i,p){for(var o=0;o<i.length;o++)if(p(i[o]))return i.slice(0,o).concat(i.slice(o+1));return i}c.removef=k;function h(i,p){for(var o=0;o<i.length;o++)if(p(i[o]))return i.slice(0,o).concat(h(i.slice(o+1),p));return i}c.filter=h;function f(i,p){var o={};for(var x in i)if(x!=p)o[x]=i[x];
return o}c.without=f;function n(i,p){for(var o=0;o<i.length;o++)if(i[o]===p)return true;return false}c.memberq=n;function q(i,p){for(var o=0;o<i.length;o++)if(i[o]==p)return true;return false}c.member=q;function G(i){return i[0]}c.head=G;function K(i){return i.slice(1,i.length)}c.tail=K;function M(i){var p=[i];for(i=i.firstChild;i!=null;i=i.nextSibling)p.push(M(i));return p}c.node_to_tree=M;function H(i){var p=[i.node];if(i.node.jsworldOpaque==true)return p;for(var o=0;o<i.children.length;o++)p=p.concat(H(i.children[o]));
return p}function W(i,p){return i&&p&&i===p}function m(i,p){return!W(i,p)}function O(i){var p=[];if(i.node.jsworldOpaque==true)return[];for(var o=0;o<i.children.length;o++)p.push({relation:"parent",parent:i.node,child:i.children[o].node});for(o=0;o<i.children.length-1;o++)p.push({relation:"neighbor",left:i.children[o].node,right:i.children[o+1].node});for(o=0;o<i.children.length;o++)p=p.concat(O(i.children[o]));return p}function na(i,p){i.appendChild(p)}function oa(i,p,o){for(var x=0;x<o.length;x++)if(o[x].relation==
"parent"){var U=o[x].parent,$=o[x].child;m($.parentNode,U)&&na(U,$)}for(;;){U=false;for(x=0;x<o.length;x++)if(o[x].relation=="neighbor"){$=o[x].left;var fa=o[x].right;if(m($.nextSibling,fa)){$.parentNode.insertBefore($,fa);U=true}}if(!U)break}var ba;function qa(pa,ma){ma=pa.compareDocumentPosition(ma);if(ma&pa.DOCUMENT_POSITION_CONTAINED_BY)return 1;if(ma&pa.DOCUMENT_POSITION_CONTAINS)return-1;if(ma&pa.DOCUMENT_POSITION_FOLLOWING)return-1;if(ma&pa.DOCUMENT_POSITION_PRECEDING)return 1;return 0}try{ba=
p.concat(i).sort(qa)}catch(ia){ba=null}o=i;for(i=i.parentNode;o!=i;){for(;;){if(o.firstChild==null||o.jsworldOpaque==true)break;o=o.firstChild}for(;o!=i;){$=o.nextSibling;U=o.parentNode;if(o.jsworldOpaque!=true){fa=false;var ra=undefined;if(ba!=null)for(;ba.length>0&&qa(o,ba[0])>=0;){x=ba.shift();if(W(x,o)){fa=true;ra=x;break}}else for(x=0;x<p.length;x++)if(W(p[x],o)){fa=true;ra=p[x];break}if(fa)ka(o,ra);else{for(;o.firstChild!=null;)na(o.parentNode,o.firstChild);$=o.nextSibling;o.parentNode.removeChild(o)}}if($==
null)o=U;else{o=$;break}}}t(p)}function ka(){}function ca(i,p){for(var o=0;o<p.length;o++)i.style[p[o].attrib]=p[o].values.join(" ")}function da(i,p){return p.id.match(/^\./)?"class"in i&&q(i["class"].split(/\s+/),p.id.substring(1)):"id"in i&&i.id==p.id}function ha(i,p){for(var o=0;o<i.length;o++)if("style"in i[o])i[o].style.cssText="";for(o=0;o<p.length;o++)if("id"in p[o])for(var x=0;x<i.length;x++)da(i[x],p[o])&&ca(i[x],p[o].attribs);else ca(p[o].node,p[o].attribs)}function t(i){for(var p=0;p<i.length;p++)i[p].onWorldChange&&
i[p].onWorldChange(z)}function Q(i,p,o,x,U){if(p instanceof I){var $=va(x(i)),fa=H($);ha(fa,wa(U(i)));oa(o,fa,O($))}else T(function(){var ba=x(p),qa=x(i),ia=U(p),ra=U(i),pa=va(qa),ma=H(pa);if(ba!==qa){ha(ma,wa(ra));oa(o,ma,O(pa))}else ia!==ra&&ha(ma,wa(ra))})}function T(i){var p;if(la()){p=sa();i();p.restore()}else i()}function X(){this.focused=l;this.selectionStart=l.selectionStart;this.selectionEnd=l.selectionEnd}X.prototype.restore=function(){if(this.focused.parentNode){this.focused.selectionStart=
this.selectionStart;this.focused.selectionEnd=this.selectionEnd;this.focused.focus()}else if(this.focused.id){var i=document.getElementById(this.focused.id);if(i){i.selectionStart=this.selectionStart;i.selectionEnd=this.selectionEnd;i.focus()}}};function la(){return l!=undefined}function sa(){return new X}function ja(i,p,o,x,U){this.top=i;this.world=p;this.handlers=x;this.handlerCreators=o;this.attribs=U}ja.prototype.restart=function(){ta(this.top,this.world,this.handlerCreators,this.attribs)};ja.prototype.pause=
function(){for(var i=0;i<this.handlers.length;i++)this.handlers[i]instanceof j||this.handlers[i].onUnregister(top)};function ta(i,p,o,x){J();var U=r(o,function(ia){return ia()});B.length>0&&B[B.length-1].pause();var $=new ja(i,p,o,U,x);B.push($);function fa(ia){$.world=ia}A(fa);var ba=new j(function(){return false},function(){});for(o=0;o<U.length;o++)if(U[o]instanceof j)ba=U[o];else U[o].onRegister(i);function qa(ia){if(ba.test(ia)){ba.receiver(z);(ia=B.pop())&&ia.pause();if(B.length>0){ia=B.pop();
ia.restart()}}}A(qa);ga(i,x);w(function(){return p})}c.big_bang=ta;function b(i,p){return function(){var o={watchId:-1,onRegister:function(){o.watchId=setInterval(function(){w(p)},i)},onUnregister:function(){clearInterval(o.watchId)}};return o}}c.on_tick=b;function d(i,p){function o(x){x=i(x);xa(x,x);return x}return function(){var x={_top:null,_listener:function(U,$){Q(U,$,x._top,o,p)},onRegister:function(U){x._top=U;A(x._listener)},onUnregister:function(){C(x._listener)}};return x}}c.on_draw=d;function j(i,
p){this.test=i;this.receiver=p}function s(i,p){return function(){if(p==undefined)p=function(){};return new j(i,p)}}c.stop_when=s;function E(i){function p(o){i(o)}return function(){return{onRegister:function(){A(p)},onUnregister:function(){C(p)}}}}c.on_world_change=E;function R(i,p,o){i.addEventListener?i.addEventListener(p,o,false):i.attachEvent("on"+p,o,false)}function Y(i,p,o){R(i,p,function(x){w(function(U){return o(U,x)})})}function ea(i,p,o){R(i,p,function(x){setTimeout(function(){w(function(U){return o(U,
x)})},0)})}function aa(i){R(i,"focus",function(){l=i});R(i,"blur",function(){l=undefined});return i}function va(i){return i.length==undefined?{node:i,children:[]}:{node:i[0],children:r(i.slice(1),va)}}function Aa(i){return{attrib:i[0],values:i.slice(1)}}function Ba(i){var p=r(i.slice(1),Aa);return typeof i[0]=="string"?[{id:i[0],attribs:p}]:"length"in i[0]?r(i[0],function(o){return{id:o,attribs:p}}):[{node:i[0],attribs:p}]}function wa(i){return v(i,Ba)}function Ca(i){return i.nodeType==Node.TEXT_NODE}
function Da(i){return i.nodeType==Node.ELEMENT_NODE}function ya(i,p){throw new ua(plt.Kernel.format("Expected a non-empty array, received ~s within ~s",[i,p]),i);}function xa(i,p){!i instanceof Array&&ya(i,p);i.length==0&&ya(i,p);if(Ca(i[0])){if(i.length>1)throw new ua(plt.Kernel.format("Text node ~s can not have children",[i]),i);}else if(Da(i[0]))for(p=1;p<i.length;p++)xa(i[p],i);else throw new ua(plt.Kernel.format("expected a Text or an Element, received ~s within ~s",[i,p]),i[0]);}function ua(i,
p){this.msg=i;this.elt=p}ua.prototype.toString=function(){return"on-draw: "+this.msg};function ga(i,p){if(p)for(a in p)if(typeof p[a]=="function")Y(i,a,p[a]);else i[a]=p[a];return i}function Ea(i){return aa(ga(document.createElement("p"),i))}c.p=Ea;function Fa(i){return aa(ga(document.createElement("div"),i))}c.div=Fa;function Ga(i,p){var o=document.createElement("button");Y(o,"click",i);return aa(ga(o,p))}c.button=Ga;function Ha(i){if(i.stopPropagation)i.stopPropagation();else i.cancelBubble=true}
function Ia(i){R(i,"click",function(p){Ha(p)});return i}function Ja(i,p,o){var x=document.createElement("input");x.type=i;function U(ba){return p(ba,x.value)}ea(x,"keypress",U);i=1000;var $=x.value,fa=setInterval(function(){if(x.parentNode){if($!=x.value){$=x.value;w(function(ba){return p(ba,x.value)})}}else clearInterval(fa)},i);return Ia(aa(ga(x,o)))}c.input=Ja;function Ka(i,p){return aa(ga(document.createTextNode(i),p))}c.text=Ka;function La(i,p,o){for(var x=document.createElement("select"),U=
0;U<p.length;U++)na(x,za({value:p[U]}));Y(x,"change",o);return aa(ga(x,i))}c.select=La;function za(i){return aa(ga(document.createElement("option"),i))}c.option=za;function Ma(i){return aa(ga(document.createElement("textarea"),i))}c.textarea=Ma;function Na(i){return aa(ga(document.createElement("h1"),i))}c.h1=Na;function Oa(i){return aa(ga(document.createElement("canvas"),i))}c.canvas=Oa;function Pa(i,p){var o=document.createElement("img");o.src=i;return aa(ga(o,p))}c.img=Pa;function Qa(i,p){return aa(ga(i,
p))}c.raw_node=Qa})();if(typeof plt=="undefined")plt={};plt.world=plt.world||{};plt.world.MobyJsworld={};
(function(){var c=plt.world.MobyJsworld,l=plt.Jsworld,I=plt.Kernel.MobyTypeError;function z(r){return typeof r=="function"}function u(r){var v=r;if(plt.Kernel.empty_question_(v))return[];else if(plt.Kernel.pair_question_(v)){for(r=[];!v.isEmpty();){r.push(u(v.first()));v=v.rest()}return r}else return r}function B(r){for(var v={};!r.isEmpty();){var D=r.first().first(),L=r.first().rest().first();v[D]=L;r=r.rest()}return v}function A(){if(window.document.getElementById("jsworld-div")!=undefined)return window;
var r=window.open("big-bang.html","big-bang");if(r==null)throw new Error("Error: Not allowed to create a new window.");return r}c.makeToplevelNode=function(){return A().document.getElementById("jsworld-div")};function C(r){return r instanceof plt.types.Cons||r instanceof plt.types.Empty}c.printWorldHook=function(r,v){if(v.lastChild==null){r=plt.Kernel.toDomNode(r);v.appendChild(r)}else{r=plt.Kernel.toDomNode(r);v.replaceChild(r,v.lastChild)}};function J(r,v,D){if(plt.Kernel.pair_question_(r)){D=plt.Kernel.first(r);
v=plt.Kernel.rest(r);if(D.nodeType==Node.TEXT_NODE&&!plt.Kernel.empty_question_(v))throw new I(plt.Kernel.format("on-draw: the text node ~s must not have children.  It has ~s",[D,v]));for(D=2;!plt.Kernel.empty_question_(v);){J(plt.Kernel.first(v),r,D);v=plt.Kernel.rest(v);D++}}else throw new I(plt.Kernel.format("on-draw: expected a dom-s-expression, but received ~s instead.~a",[r,D!=undefined?plt.Kernel.format("the ~a element within ~s",[D,v]):""]));}function w(r,v,D){plt.Kernel.attachEvent(r,v,D)}
function e(r){if(r.preventDefault)r.preventDefault();else r.returnValue=false}function g(r){if(r.stopPropagation)r.stopPropagation();else r.cancelBubble=true}c.bigBang=function(r,v){var D=plt.types.Empty.EMPTY;plt.Kernel.arrayEach(v,function(F,k){plt.Kernel.check(F,function(h){return z(h)||C(h)},"js-big-bang","handler or attribute list",k+2)});var L=c.makeToplevelNode();L.tabIndex=0;w(L,"click",function(F){e(F);g(F);return false},false);for(var N=new plt.world.config.WorldConfig,P=0;P<v.length;P++)if(C(v[P]))D=
v[P];else if(z(v[P]))N=v[P](N);N=N.updateAll({changeWorld:c.updateWorld,shutdownWorld:c.shutdownWorld});plt.world.config.CONFIG=N;v=[];if(N.lookup("onDraw")){wrappedRedraw=function(F){F=N.lookup("onDraw")([F]);plt.Kernel.setLastLoc(undefined);J(F,F,undefined);return F=[L,u(F)]};P=function(F){F=u(N.lookup("onDrawCss")([F]));plt.Kernel.setLastLoc(undefined);return F};v.push(l.on_draw(wrappedRedraw,P))}else if(N.lookup("onRedraw")){var S=undefined,V=undefined;wrappedRedraw=function(F){F=N.lookup("onRedraw")([F]);
if(F!=null&&F!=undefined&&F instanceof plt.world.Kernel.BaseImage){var k=plt.world.Kernel.imageWidth(F).toInteger(),h=plt.world.Kernel.imageHeight(F).toInteger();if(!S){S=plt.world.Kernel.makeCanvas(k,h);S.jsworldOpaque=true;V=l.node_to_tree(S)}S.width=k;S.height=h;k=S.getContext("2d");F.render(k,0,0);return[L,V]}else return[L,l.node_to_tree(plt.Kernel.toDomNode(F))]};P=function(){return[[S,["width",S.width+"px"],["height",S.height+"px"]]]};v.push(l.on_draw(wrappedRedraw,P))}else v.push(l.on_world_change(function(F){c.printWorldHook(F,
L)}));if(N.lookup("tickDelay")){P=function(F){setTimeout(function(){plt.world.stimuli.onTick()},0);return F};var Z=N.lookup("tickDelay");v.push(l.on_tick(Z,P))}N.lookup("stopWhen")&&v.push(l.stop_when(function(F){return N.lookup("stopWhen")([F])}));if(N.lookup("onKey")){w(L,"keydown",function(F){plt.world.stimuli.onKey(F);e(F);g(F);return false});w(L,"keypress",function(F){e(F);g(F);return false});L.focus()}if(N.lookup("initialEffect")){Z=plt.world.Kernel.applyEffect(N.lookup("initialEffect"));for(P=
0;P<Z.length;P++)if(N.lookup("stopWhen")&&N.lookup("stopWhen")([r]))break;else r=Z[P](r)}return l.big_bang(L,r,v,B(D))};c.updateWorld=function(r){function v(D){try{return r(D)}catch(L){plt.Kernel.reportError(L);plt.Kernel.reportError("Shutting down jsworld computations");plt.world.stimuli.onShutdown();return D}}l.change_world(v)};c.shutdownWorld=function(){l.shutdown()};function y(r){if(r.length==0)return[];if(r.length==1)return B(r[0]);else throw new Error;}c.p=function(r){r=y(r);var v=l.p(r);v.toWrittenString=
function(){return plt.Kernel.format("(js-p)",[])};v.toDisplayedString=v.toWrittenString;v.toDomNode=function(){return v};return v};c.div=function(r){r=y(r);var v=l.div(r);v.toWrittenString=function(){return plt.Kernel.format("(js-div)",[])};v.toDisplayedString=v.toWrittenString;v.toDomNode=function(){return v};return v};c.button=function(r,v){function D(){return make_dash_effect_colon_none()}var L=c.buttonStar(r,D,v);L.toWrittenString=function(){return"(js-button ...)"};L.toDisplayedString=L.toWrittenString;
L.toDomNode=function(){return L};return L};c.buttonStar=function(r,v,D){D=y(D);function L(P){try{var S=v([P]),V=r([P]);plt.world.Kernel.applyEffect(S);return V}catch(Z){plt.Kernel.reportError(Z);return P}}var N=l.button(L,D);N.toWrittenString=function(){return"(js-button ...)"};N.toDisplayedString=N.toWrittenString;N.toDomNode=function(){return N};return N};c.input=function(r,v,D){plt.Kernel.check(r,plt.Kernel.isString,"js-input","string",1);plt.Kernel.check(v,plt.Kernel.isFunction,"js-input","(world string -> world)",
1);D=y(D);var L=l.input(r,function(N,P){return v([N,P])},D);L.toWrittenString=function(){return"(js-input ...)"};L.toDisplayedString=L.toWrittenString;L.toDomNode=function(){return L};return L};c.get_dash_input_dash_value=function(r){plt.Kernel.check(r,function(){return plt.Kernel.isString(r)||r.nodeType==Node.ELEMENT_NODE},"get-input-value","dom-node",1);return plt.Kernel.isString(r)?plt.types.String.makeInstance(document.getElementById(r).value||""):plt.types.String.makeInstance(r.value||"")};c.img=
function(r,v){v=y(v);var D=l.img(r,v);D.toWrittenString=function(){return"(js-img ...)"};D.toDisplayedString=D.toWrittenString;D.toDomNode=function(){return D};return D};c.text=function(r){var v=l.text(r,[]);v.toWrittenString=function(){return"(js-img ...)"};v.toDisplayedString=v.toWrittenString;v.toDomNode=function(){return v};return v};c.rawNode=function(r,v){v=y(v);var D=l.raw_node(plt.Kernel.toDomNode(r),v);D.toWrittenString=function(){return"(js-img ...)"};D.toDisplayedString=D.toWrittenString;
D.toDomNode=function(){return D};return D}})();if(typeof plt=="undefined")plt={};plt.world=plt.world||{};
(function(){var c={};plt.world.stimuli=c;function l(A,C,J){var w=[];u(function(g){var y=[g].concat(J);if(A){var r=A(y);w=B(r)}return C?C(y):g});for(var e=0;e<w.length;e++)u(w[e])}c.onTilt=function(A,C,J){var w=z("onTilt"),e=z("onTiltEffect");l(e,w,[I(A),I(C),I(J)])};c.onAcceleration=function(A,C,J){var w=z("onAcceleration"),e=z("onAccelerationEffect");l(e,w,[I(A),I(C),I(J)])};c.onShake=function(){var A=z("onShake"),C=z("onShakeEffect");l(C,A,[])};c.onLocation=function(A,C){var J=z("onLocationChange"),
w=z("onLocationChangeEffect");l(w,J,[I(A),I(C)])};c.onKey=function(A){function C(e){e=e.charCode||e.keyCode;return e=e==37?"left":e==38?"up":e==39?"right":e==40?"down":e==32?"space":e==13?"enter":String.fromCharCode(e)}A=C(A);var J=z("onKey"),w=z("onKeyEffect");l(w,J,[A])};c.onTick=function(){var A=z("onTick"),C=z("onTickEffect");l(C,A,[])};c.onAnnounce=function(A,C){for(var J=plt.types.Empty.EMPTY,w=0;w<C.length;w++)J=plt.types.Cons.makeInstance(C[C.length-w-1],J);C=z("onAnnounce");w=z("onAnnounceEffect");
l(C,w,[A,J])};c.onShutdown=function(){var A=z("shutdownWorld");A&&A()};var I=plt.types.FloatPoint.makeInstance;function z(A){return plt.world.config.CONFIG.lookup(A)}function u(A){z("changeWorld")(A)}function B(A){return plt.world.Kernel.applyEffect(A)}})();function permission_colon_location(){plt.Kernel.Struct.call(this,"make-permission:location",[])}permission_colon_location.prototype=new plt.Kernel.Struct;function make_dash_permission_colon_location(){return new permission_colon_location}
function permission_colon_location_question_(c){return c!=null&&c!=undefined&&c instanceof permission_colon_location}function permission_colon_send_dash_sms(){plt.Kernel.Struct.call(this,"make-permission:send-sms",[])}permission_colon_send_dash_sms.prototype=new plt.Kernel.Struct;function make_dash_permission_colon_send_dash_sms(){return new permission_colon_send_dash_sms}
function permission_colon_send_dash_sms_question_(c){return c!=null&&c!=undefined&&c instanceof permission_colon_send_dash_sms}function permission_colon_receive_dash_sms(){plt.Kernel.Struct.call(this,"make-permission:receive-sms",[])}permission_colon_receive_dash_sms.prototype=new plt.Kernel.Struct;function make_dash_permission_colon_receive_dash_sms(){return new permission_colon_receive_dash_sms}
function permission_colon_receive_dash_sms_question_(c){return c!=null&&c!=undefined&&c instanceof permission_colon_receive_dash_sms}function permission_colon_tilt(){plt.Kernel.Struct.call(this,"make-permission:tilt",[])}permission_colon_tilt.prototype=new plt.Kernel.Struct;function make_dash_permission_colon_tilt(){return new permission_colon_tilt}function permission_colon_tilt_question_(c){return c!=null&&c!=undefined&&c instanceof permission_colon_tilt}
function permission_colon_shake(){plt.Kernel.Struct.call(this,"make-permission:shake",[])}permission_colon_shake.prototype=new plt.Kernel.Struct;function make_dash_permission_colon_shake(){return new permission_colon_shake}function permission_colon_shake_question_(c){return c!=null&&c!=undefined&&c instanceof permission_colon_shake}function permission_colon_internet(){plt.Kernel.Struct.call(this,"make-permission:internet",[])}permission_colon_internet.prototype=new plt.Kernel.Struct;
function make_dash_permission_colon_internet(){return new permission_colon_internet}function permission_colon_internet_question_(c){return c!=null&&c!=undefined&&c instanceof permission_colon_internet}function permission_colon_telephony(){plt.Kernel.Struct.call(this,"make-permission:telephony",[])}permission_colon_telephony.prototype=new plt.Kernel.Struct;function make_dash_permission_colon_telephony(){return new permission_colon_telephony}
function permission_colon_telephony_question_(c){return c!=null&&c!=undefined&&c instanceof permission_colon_telephony}function permission_colon_wake_dash_lock(){plt.Kernel.Struct.call(this,"make-permission:wake-lock",[])}permission_colon_wake_dash_lock.prototype=new plt.Kernel.Struct;function make_dash_permission_colon_wake_dash_lock(){return new permission_colon_wake_dash_lock}
function permission_colon_wake_dash_lock_question_(c){return c!=null&&c!=undefined&&c instanceof permission_colon_wake_dash_lock}function permission_colon_open_dash_image_dash_url(c){plt.Kernel.Struct.call(this,"make-permission:open-image-url",[c]);this.url=c}permission_colon_open_dash_image_dash_url.prototype=new plt.Kernel.Struct;function make_dash_permission_colon_open_dash_image_dash_url(c){return new permission_colon_open_dash_image_dash_url(c)}
function permission_colon_open_dash_image_dash_url_dash_url(c){if(permission_colon_open_dash_image_dash_url_question_(c))return c.url;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("permission:open-image-url-url: not a permission:open-image-url: ~s",[c]));}
function set_dash_permission_colon_open_dash_image_dash_url_dash_url_bang_(c,l){if(permission_colon_open_dash_image_dash_url_question_(c)){c.url=l;c._fields[0]=l}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_permission_colon_open_dash_image_dash_url_dash_url_bang_: not a permission:open-image-url: ~s",[c]));}function permission_colon_open_dash_image_dash_url_question_(c){return c!=null&&c!=undefined&&c instanceof permission_colon_open_dash_image_dash_url}
function permission_question_(c){return plt.Kernel.setLastLoc('offset=512 line=17 span=28 id="permission.ss"')&&permission_colon_location_question_(c)||plt.Kernel.setLastLoc('offset=547 line=18 span=28 id="permission.ss"')&&permission_colon_send_dash_sms_question_(c)||plt.Kernel.setLastLoc('offset=582 line=19 span=31 id="permission.ss"')&&permission_colon_receive_dash_sms_question_(c)||plt.Kernel.setLastLoc('offset=620 line=20 span=24 id="permission.ss"')&&permission_colon_tilt_question_(c)||plt.Kernel.setLastLoc('offset=651 line=21 span=25 id="permission.ss"')&&
permission_colon_shake_question_(c)||plt.Kernel.setLastLoc('offset=683 line=22 span=28 id="permission.ss"')&&permission_colon_internet_question_(c)||plt.Kernel.setLastLoc('offset=718 line=23 span=29 id="permission.ss"')&&permission_colon_telephony_question_(c)||plt.Kernel.setLastLoc('offset=754 line=24 span=29 id="permission.ss"')&&permission_colon_wake_dash_lock_question_(c)||plt.Kernel.setLastLoc('offset=790 line=25 span=34 id="permission.ss"')&&permission_colon_open_dash_image_dash_url_question_(c)}
var PERMISSION_colon_LOCATION,PERMISSION_colon_SEND_dash_SMS,PERMISSION_colon_RECEIVE_dash_SMS,PERMISSION_colon_TILT,PERMISSION_colon_SHAKE,PERMISSION_colon_INTERNET,PERMISSION_colon_TELEPHONY,PERMISSION_colon_WAKE_dash_LOCK;
function permission_dash__greaterthan_string(c){return plt.Kernel.setLastLoc('offset=1465 line=42 span=35 id="permission.ss"')&&permission_colon_location_question_(c)?plt.types.String.makeInstance("PERMISSION:LOCATION"):plt.Kernel.setLastLoc('offset=1534 line=44 span=35 id="permission.ss"')&&permission_colon_send_dash_sms_question_(c)?plt.types.String.makeInstance("PERMISSION:SEND-SMS"):plt.Kernel.setLastLoc('offset=1603 line=46 span=38 id="permission.ss"')&&permission_colon_receive_dash_sms_question_(c)?
plt.types.String.makeInstance("PERMISSION:RECEIVE-SMS"):plt.Kernel.setLastLoc('offset=1678 line=48 span=31 id="permission.ss"')&&permission_colon_tilt_question_(c)?plt.types.String.makeInstance("PERMISSION:TILT"):plt.Kernel.setLastLoc('offset=1739 line=50 span=32 id="permission.ss"')&&permission_colon_shake_question_(c)?plt.types.String.makeInstance("PERMISSION:SHAKE"):plt.Kernel.setLastLoc('offset=1802 line=52 span=35 id="permission.ss"')&&permission_colon_internet_question_(c)?plt.types.String.makeInstance("PERMISSION:INTERNET"):
plt.Kernel.setLastLoc('offset=1871 line=54 span=36 id="permission.ss"')&&permission_colon_telephony_question_(c)?plt.types.String.makeInstance("PERMISSION:TELEPHONY"):plt.Kernel.setLastLoc('offset=1942 line=56 span=36 id="permission.ss"')&&permission_colon_wake_dash_lock_question_(c)?plt.types.String.makeInstance("PERMISSION:WAKE-LOCK"):plt.Kernel.setLastLoc('offset=2013 line=58 span=41 id="permission.ss"')&&permission_colon_open_dash_image_dash_url_question_(c)?plt.Kernel.setLastLoc('offset=2060 line=59 span=84 id="permission.ss"')&&
plt.Kernel.format(plt.types.String.makeInstance("PERMISSION:OPEN-IMAGE-URL ~a"),[plt.Kernel.setLastLoc('offset=2099 line=59 span=44 id="permission.ss"')&&permission_colon_open_dash_image_dash_url_dash_url(c)]):plt.Kernel.setLastLoc('offset=1454 line=41 span=692 id="permission.ss"')&&plt.Kernel.error(plt.types.Symbol.makeInstance("cond"),plt.types.String.makeInstance('cond: fell out of cond around "offset=1454 line=41 span=692 id=\\"permission.ss\\""'))}
function string_dash__greaterthan_permission(c){return plt.Kernel.setLastLoc('offset=2242 line=65 span=38 id="permission.ss"')&&plt.Kernel.string_equal__question_(c,plt.types.String.makeInstance("PERMISSION:LOCATION"),[])?PERMISSION_colon_LOCATION:plt.Kernel.setLastLoc('offset=2312 line=67 span=38 id="permission.ss"')&&plt.Kernel.string_equal__question_(c,plt.types.String.makeInstance("PERMISSION:SEND-SMS"),[])?PERMISSION_colon_SEND_dash_SMS:plt.Kernel.setLastLoc('offset=2387 line=69 span=41 id="permission.ss"')&&
plt.Kernel.string_equal__question_(c,plt.types.String.makeInstance("PERMISSION:RECEIVE-SMS"),[])?PERMISSION_colon_RECEIVE_dash_SMS:plt.Kernel.setLastLoc('offset=2463 line=71 span=34 id="permission.ss"')&&plt.Kernel.string_equal__question_(c,plt.types.String.makeInstance("PERMISSION:TILT"),[])?PERMISSION_colon_TILT:plt.Kernel.setLastLoc('offset=2525 line=73 span=35 id="permission.ss"')&&plt.Kernel.string_equal__question_(c,plt.types.String.makeInstance("PERMISSION:SHAKE"),[])?PERMISSION_colon_SHAKE:
plt.Kernel.setLastLoc('offset=2589 line=75 span=38 id="permission.ss"')&&plt.Kernel.string_equal__question_(c,plt.types.String.makeInstance("PERMISSION:INTERNET"),[])?PERMISSION_colon_INTERNET:plt.Kernel.setLastLoc('offset=2659 line=77 span=39 id="permission.ss"')&&plt.Kernel.string_equal__question_(c,plt.types.String.makeInstance("PERMISSION:TELEPHONY"),[])?PERMISSION_colon_TELEPHONY:plt.Kernel.setLastLoc('offset=2731 line=79 span=39 id="permission.ss"')&&plt.Kernel.string_equal__question_(c,plt.types.String.makeInstance("PERMISSION:WAKE-LOCK"),
[])?PERMISSION_colon_WAKE_dash_LOCK:plt.Kernel.setLastLoc('offset=2808 line=81 span=82 id="permission.ss"')&&plt.Kernel._greaterthan_(plt.Kernel.setLastLoc('offset=2811 line=81 span=21 id="permission.ss"')&&plt.Kernel.string_dash_length(c),plt.Kernel.setLastLoc('offset=2846 line=82 span=43 id="permission.ss"')&&plt.Kernel.string_dash_length(plt.types.String.makeInstance("PERMISSION:OPEN-IMAGE-URL")),[])&&plt.Kernel.setLastLoc('offset=2901 line=83 span=122 id="permission.ss"')&&plt.Kernel.string_equal__question_(plt.Kernel.setLastLoc('offset=2911 line=83 span=63 id="permission.ss"')&&
plt.Kernel.substring(c,plt.types.Rational.makeInstance(0,1),plt.Kernel.setLastLoc('offset=2930 line=83 span=43 id="permission.ss"')&&plt.Kernel.string_dash_length(plt.types.String.makeInstance("PERMISSION:OPEN-IMAGE-URL"))),plt.types.String.makeInstance("PERMISSION:OPEN-IMAGE-URL"),[])?plt.Kernel.setLastLoc('offset=3030 line=85 span=220 id="permission.ss"')&&make_dash_permission_colon_open_dash_image_dash_url(plt.Kernel.setLastLoc('offset=3062 line=85 span=187 id="permission.ss"')&&plt.Kernel.substring(c,
plt.Kernel.setLastLoc('offset=3128 line=86 span=50 id="permission.ss"')&&plt.Kernel.add1(plt.Kernel.setLastLoc('offset=3134 line=86 span=43 id="permission.ss"')&&plt.Kernel.string_dash_length(plt.types.String.makeInstance("PERMISSION:OPEN-IMAGE-URL"))),plt.Kernel.setLastLoc('offset=3227 line=87 span=21 id="permission.ss"')&&plt.Kernel.string_dash_length(c))):plt.Kernel.setLastLoc('offset=2231 line=64 span=1021 id="permission.ss"')&&plt.Kernel.error(plt.types.Symbol.makeInstance("cond"),plt.types.String.makeInstance('cond: fell out of cond around "offset=2231 line=64 span=1021 id=\\"permission.ss\\""'))}
function permission_dash__greaterthan_android_dash_permissions(c){return plt.Kernel.setLastLoc('offset=3392 line=95 span=35 id="permission.ss"')&&permission_colon_location_question_(c)?plt.Kernel.setLastLoc('offset=3433 line=96 span=103 id="permission.ss"')&&plt.Kernel.list([plt.types.String.makeInstance("android.permission.ACCESS_COARSE_LOCATION"),plt.types.String.makeInstance("android.permission.ACCESS_FINE_LOCATION")]):plt.Kernel.setLastLoc('offset=3543 line=98 span=35 id="permission.ss"')&&permission_colon_send_dash_sms_question_(c)?
plt.Kernel.setLastLoc('offset=3584 line=99 span=36 id="permission.ss"')&&plt.Kernel.list([plt.types.String.makeInstance("android.permission.SEND_SMS")]):plt.Kernel.setLastLoc('offset=3627 line=100 span=38 id="permission.ss"')&&permission_colon_receive_dash_sms_question_(c)?plt.Kernel.setLastLoc('offset=3671 line=101 span=39 id="permission.ss"')&&plt.Kernel.list([plt.types.String.makeInstance("android.permission.RECEIVE_SMS")]):plt.Kernel.setLastLoc('offset=3717 line=102 span=31 id="permission.ss"')&&
permission_colon_tilt_question_(c)?plt.Kernel.setLastLoc('offset=3754 line=103 span=6 id="permission.ss"')&&plt.Kernel.list([]):plt.Kernel.setLastLoc('offset=3767 line=104 span=32 id="permission.ss"')&&permission_colon_shake_question_(c)?plt.Kernel.setLastLoc('offset=3805 line=105 span=6 id="permission.ss"')&&plt.Kernel.list([]):plt.Kernel.setLastLoc('offset=3818 line=106 span=35 id="permission.ss"')&&permission_colon_internet_question_(c)?plt.Kernel.setLastLoc('offset=3859 line=107 span=36 id="permission.ss"')&&
plt.Kernel.list([plt.types.String.makeInstance("android.permission.INTERNET")]):plt.Kernel.setLastLoc('offset=3902 line=108 span=36 id="permission.ss"')&&permission_colon_telephony_question_(c)?plt.Kernel.setLastLoc('offset=3944 line=109 span=49 id="permission.ss"')&&plt.Kernel.list([plt.types.String.makeInstance("android.permission.ACCESS_COARSE_UPDATES")]):plt.Kernel.setLastLoc('offset=4000 line=110 span=36 id="permission.ss"')&&permission_colon_wake_dash_lock_question_(c)?plt.Kernel.setLastLoc('offset=4042 line=111 span=37 id="permission.ss"')&&
plt.Kernel.list([plt.types.String.makeInstance("android.permission.WAKE_LOCK")]):plt.Kernel.setLastLoc('offset=4086 line=112 span=41 id="permission.ss"')&&permission_colon_open_dash_image_dash_url_question_(c)?plt.Kernel.setLastLoc('offset=4133 line=113 span=6 id="permission.ss"')&&plt.Kernel.list([]):plt.Kernel.setLastLoc('offset=3381 line=94 span=760 id="permission.ss"')&&plt.Kernel.error(plt.types.Symbol.makeInstance("cond"),plt.types.String.makeInstance('cond: fell out of cond around "offset=3381 line=94 span=760 id=\\"permission.ss\\""'))}
function permission_dash__greaterthan_on_dash_start_dash_code(c){return plt.Kernel.setLastLoc('offset=4258 line=119 span=35 id="permission.ss"')&&permission_colon_location_question_(c)?plt.types.String.makeInstance("plt.platform.Platform.getInstance().getLocationService().startService();\n      plt.platform.Platform.getInstance().getLocationService().addLocationChangeListener(listener);"):plt.Kernel.setLastLoc('offset=4480 line=122 span=35 id="permission.ss"')&&permission_colon_send_dash_sms_question_(c)?
plt.types.String.makeInstance(""):plt.Kernel.setLastLoc('offset=4530 line=124 span=38 id="permission.ss"')&&permission_colon_receive_dash_sms_question_(c)?plt.types.String.makeInstance(""):plt.Kernel.setLastLoc('offset=4583 line=126 span=31 id="permission.ss"')&&permission_colon_tilt_question_(c)?plt.types.String.makeInstance("plt.platform.Platform.getInstance().getTiltService().startService();\n      plt.platform.Platform.getInstance().getTiltService().addOrientationChangeListener(listener);\n      plt.platform.Platform.getInstance().getTiltService().addAccelerationChangeListener(listener);\n      plt.platform.Platform.getInstance().getTiltService().addShakeListener(listener);"):
plt.Kernel.setLastLoc('offset=4988 line=132 span=32 id="permission.ss"')&&permission_colon_shake_question_(c)?plt.types.String.makeInstance(""):plt.Kernel.setLastLoc('offset=5042 line=135 span=35 id="permission.ss"')&&permission_colon_internet_question_(c)?plt.types.String.makeInstance(""):plt.Kernel.setLastLoc('offset=5092 line=137 span=36 id="permission.ss"')&&permission_colon_telephony_question_(c)?plt.types.String.makeInstance(""):plt.Kernel.setLastLoc('offset=5143 line=139 span=36 id="permission.ss"')&&
permission_colon_wake_dash_lock_question_(c)?plt.types.String.makeInstance(""):plt.Kernel.setLastLoc('offset=5194 line=141 span=41 id="permission.ss"')&&permission_colon_open_dash_image_dash_url_question_(c)?plt.types.String.makeInstance(""):plt.Kernel.setLastLoc('offset=4247 line=118 span=998 id="permission.ss"')&&plt.Kernel.error(plt.types.Symbol.makeInstance("cond"),plt.types.String.makeInstance('cond: fell out of cond around "offset=4247 line=118 span=998 id=\\"permission.ss\\""'))}
function permission_dash__greaterthan_on_dash_pause_dash_code(c){return plt.Kernel.setLastLoc('offset=5362 line=148 span=35 id="permission.ss"')&&permission_colon_location_question_(c)?plt.types.String.makeInstance("plt.platform.Platform.getInstance().getLocationService().shutdownService();"):plt.Kernel.setLastLoc('offset=5487 line=150 span=35 id="permission.ss"')&&permission_colon_send_dash_sms_question_(c)?plt.types.String.makeInstance(""):plt.Kernel.setLastLoc('offset=5537 line=152 span=38 id="permission.ss"')&&
permission_colon_receive_dash_sms_question_(c)?plt.types.String.makeInstance(""):plt.Kernel.setLastLoc('offset=5590 line=154 span=31 id="permission.ss"')&&permission_colon_tilt_question_(c)?plt.types.String.makeInstance("plt.platform.Platform.getInstance().getTiltService().shutdownService();"):plt.Kernel.setLastLoc('offset=5707 line=156 span=32 id="permission.ss"')&&permission_colon_shake_question_(c)?plt.types.String.makeInstance(""):plt.Kernel.setLastLoc('offset=5754 line=158 span=35 id="permission.ss"')&&
permission_colon_internet_question_(c)?plt.types.String.makeInstance(""):plt.Kernel.setLastLoc('offset=5804 line=160 span=36 id="permission.ss"')&&permission_colon_telephony_question_(c)?plt.types.String.makeInstance(""):plt.Kernel.setLastLoc('offset=5855 line=162 span=36 id="permission.ss"')&&permission_colon_wake_dash_lock_question_(c)?plt.types.String.makeInstance(""):plt.Kernel.setLastLoc('offset=5906 line=164 span=41 id="permission.ss"')&&permission_colon_open_dash_image_dash_url_question_(c)?
plt.types.String.makeInstance(""):plt.Kernel.setLastLoc('offset=5351 line=147 span=606 id="permission.ss"')&&plt.Kernel.error(plt.types.Symbol.makeInstance("cond"),plt.types.String.makeInstance('cond: fell out of cond around "offset=5351 line=147 span=606 id=\\"permission.ss\\""'))}
function permission_dash__greaterthan_on_dash_destroy_dash_code(c){return plt.Kernel.setLastLoc('offset=6078 line=171 span=35 id="permission.ss"')&&permission_colon_location_question_(c)?plt.types.String.makeInstance("plt.platform.Platform.getInstance().getLocationService().shutdownService();"):plt.Kernel.setLastLoc('offset=6203 line=173 span=35 id="permission.ss"')&&permission_colon_send_dash_sms_question_(c)?plt.types.String.makeInstance(""):plt.Kernel.setLastLoc('offset=6253 line=175 span=38 id="permission.ss"')&&
permission_colon_receive_dash_sms_question_(c)?plt.types.String.makeInstance(""):plt.Kernel.setLastLoc('offset=6306 line=177 span=31 id="permission.ss"')&&permission_colon_tilt_question_(c)?plt.types.String.makeInstance("plt.platform.Platform.getInstance().getTiltService().shutdownService();"):plt.Kernel.setLastLoc('offset=6423 line=179 span=32 id="permission.ss"')&&permission_colon_shake_question_(c)?plt.types.String.makeInstance(""):plt.Kernel.setLastLoc('offset=6470 line=181 span=35 id="permission.ss"')&&
permission_colon_internet_question_(c)?plt.types.String.makeInstance(""):plt.Kernel.setLastLoc('offset=6520 line=183 span=36 id="permission.ss"')&&permission_colon_telephony_question_(c)?plt.types.String.makeInstance(""):plt.Kernel.setLastLoc('offset=6571 line=185 span=36 id="permission.ss"')&&permission_colon_wake_dash_lock_question_(c)?plt.types.String.makeInstance(""):plt.Kernel.setLastLoc('offset=6622 line=187 span=41 id="permission.ss"')&&permission_colon_open_dash_image_dash_url_question_(c)?
plt.types.String.makeInstance(""):plt.Kernel.setLastLoc('offset=6067 line=170 span=606 id="permission.ss"')&&plt.Kernel.error(plt.types.Symbol.makeInstance("cond"),plt.types.String.makeInstance('cond: fell out of cond around "offset=6067 line=170 span=606 id=\\"permission.ss\\""'))}
(function(c){(function(){PERMISSION_colon_LOCATION=plt.Kernel.setLastLoc('offset=857 line=28 span=26 id="permission.ss"')&&make_dash_permission_colon_location();PERMISSION_colon_SEND_dash_SMS=plt.Kernel.setLastLoc('offset=913 line=29 span=26 id="permission.ss"')&&make_dash_permission_colon_send_dash_sms();PERMISSION_colon_RECEIVE_dash_SMS=plt.Kernel.setLastLoc('offset=972 line=30 span=26 id="permission.ss"')&&make_dash_permission_colon_send_dash_sms();PERMISSION_colon_TILT=plt.Kernel.setLastLoc('offset=1024 line=31 span=22 id="permission.ss"')&&
make_dash_permission_colon_tilt();PERMISSION_colon_SHAKE=plt.Kernel.setLastLoc('offset=1073 line=32 span=23 id="permission.ss"')&&make_dash_permission_colon_shake();PERMISSION_colon_INTERNET=plt.Kernel.setLastLoc('offset=1126 line=33 span=26 id="permission.ss"')&&make_dash_permission_colon_internet();PERMISSION_colon_TELEPHONY=plt.Kernel.setLastLoc('offset=1183 line=34 span=27 id="permission.ss"')&&make_dash_permission_colon_telephony();PERMISSION_colon_WAKE_dash_LOCK=plt.Kernel.setLastLoc('offset=1241 line=35 span=27 id="permission.ss"')&&
make_dash_permission_colon_wake_dash_lock()})(c||plt.Kernel.identity)})();if(typeof plt=="undefined")plt={};
(function(){plt.permission={};function c(w){return permission_colon_location_question_(w)}function l(w){return permission_colon_send_dash_sms_question_(w)}function I(w){return permission_colon_receive_dash_sms_question_(w)}function z(w){return permission_colon_tilt_question_(w)}function u(w){return permission_colon_shake_question_(w)}function B(w){return permission_colon_internet_question_(w)}function A(w){return permission_colon_telephony_question_(w)}function C(w){return permission_colon_wake_dash_lock_question_(w)}
function J(w){return permission_colon_open_dash_image_dash_url_question_(w)}plt.permission.startupAllPermissions=function(w,e){if(w.length>0){var g=w.pop();plt.permission._runStartupCode(g,w,e)}else e()};plt.permission._runStartupCode=function(w,e,g){var y=plt.platform.Platform.getInstance(),r=plt.world.stimuli;function v(){setTimeout(function(){plt.permission.startupAllPermissions(e,g)},0)}if(c(w)){y.getLocationService().startService();y.getLocationService().addLocationChangeListener(function(P,
S){r.onLocation(P,S)});v()}else if(l(w))v();else if(I(w))v();else if(z(w)){y.getTiltService().startService();y.getTiltService().addOrientationChangeListener(function(P,S,V){r.onTilt(P,S,V)});y.getTiltService().addAccelerationChangeListener(function(P,S,V){r.onAcceleration(P,S,V)});v()}else if(u(w)){y.getShakeService().startService();y.getShakeService().addListener(function(){r.onShake()});v()}else if(B(w))v();else if(A(w))v();else if(C(w))v();else if(J(w)){var D=permission_colon_open_dash_image_dash_url_dash_url(w),
L=new Image,N=function(){plt.Kernel.detachEvent(L,"load",N);plt.world.Kernel.FileImage.installInstance(D,L);v()};plt.Kernel.attachEvent(L,"load",N);plt.Kernel.attachEvent(L,"error",function(){L.src="http://www.wescheme.org/images/broken.png";plt.Kernel.detachEvent(L,"load",N);v()});L.src=D}else v()};plt.permission.runShutdownCode=function(w){var e=plt.platform.Platform.getInstance();c(w)&&e.getLocationService().shutdownService();l(w);I(w);z(w)&&e.getTiltService().shutdownService();u(w);B(w);A(w);
C(w);J(w)}})();
