(function(){if(window.google&&google.gears){return}var b=null;if(typeof GearsFactory!="undefined"){b=new GearsFactory()}else{try{b=new ActiveXObject("Gears.Factory");if(b.getBuildInfo().indexOf("ie_mobile")!=-1){b.privateSetGlobalObject(this)}}catch(c){if((typeof navigator.mimeTypes!="undefined")&&navigator.mimeTypes["application/x-googlegears"]){b=document.createElement("object");b.style.display="none";b.width=0;b.height=0;b.type="application/x-googlegears";document.documentElement.appendChild(b)}}}if(!b){return}if(!window.google){google={}}if(!google.gears){google.gears={factory:b}}})();if(!document.createElement("canvas").getContext){(function(){var w=Math;var x=w.round;var t=w.sin;var F=w.cos;var o=w.abs;var E=w.sqrt;var b=10;var p=b/2;function k(){return this.context_||(this.context_=new r(this))}var v=Array.prototype.slice;function G(j,m,H){var i=v.call(arguments,2);return function(){return j.apply(m,i.concat(v.call(arguments)))}}var l={init:function(i){if(/MSIE/.test(navigator.userAgent)&&!window.opera){var j=i||document;j.createElement("canvas");j.attachEvent("onreadystatechange",G(this.init_,this,j))}},init_:function(I){if(!I.namespaces.g_vml_){I.namespaces.add("g_vml_","urn:schemas-microsoft-com:vml","#default#VML")}if(!I.namespaces.g_o_){I.namespaces.add("g_o_","urn:schemas-microsoft-com:office:office","#default#VML")}if(!I.styleSheets.ex_canvas_){var H=I.createStyleSheet();H.owningElement.id="ex_canvas_";H.cssText="canvas{display:inline-block;overflow:hidden;text-align:left;width:300px;height:150px}g_vml_\\:*{behavior:url(#default#VML)}g_o_\\:*{behavior:url(#default#VML)}"}var m=I.getElementsByTagName("canvas");for(var j=0;j<m.length;j++){this.initElement(m[j])}},initElement:function(j){if(!j.getContext){j.getContext=k;j.innerHTML="";j.attachEvent("onpropertychange",D);j.attachEvent("onresize",c);var i=j.attributes;if(i.width&&i.width.specified){j.style.width=i.width.nodeValue+"px"}else{j.width=j.clientWidth}if(i.height&&i.height.specified){j.style.height=i.height.nodeValue+"px"}else{j.height=j.clientHeight}}return j}};function D(j){var i=j.srcElement;switch(j.propertyName){case"width":i.style.width=i.attributes.width.nodeValue+"px";i.getContext().clearRect();break;case"height":i.style.height=i.attributes.height.nodeValue+"px";i.getContext().clearRect();break}}function c(j){var i=j.srcElement;if(i.firstChild){i.firstChild.style.width=i.clientWidth+"px";i.firstChild.style.height=i.clientHeight+"px"}}l.init();var f=[];for(var A=0;A<16;A++){for(var z=0;z<16;z++){f[A*16+z]=A.toString(16)+z.toString(16)}}function s(){return[[1,0,0],[0,1,0],[0,0,1]]}function e(H,m){var j=s();for(var i=0;i<3;i++){for(var K=0;K<3;K++){var I=0;for(var J=0;J<3;J++){I+=H[i][J]*m[J][K]}j[i][K]=I}}return j}function y(j,i){i.fillStyle=j.fillStyle;i.lineCap=j.lineCap;i.lineJoin=j.lineJoin;i.lineWidth=j.lineWidth;i.miterLimit=j.miterLimit;i.shadowBlur=j.shadowBlur;i.shadowColor=j.shadowColor;i.shadowOffsetX=j.shadowOffsetX;i.shadowOffsetY=j.shadowOffsetY;i.strokeStyle=j.strokeStyle;i.globalAlpha=j.globalAlpha;i.arcScaleX_=j.arcScaleX_;i.arcScaleY_=j.arcScaleY_;i.lineScale_=j.lineScale_}function d(m){var J,I=1;m=String(m);if(m.substring(0,3)=="rgb"){var L=m.indexOf("(",3);var j=m.indexOf(")",L+1);var K=m.substring(L+1,j).split(",");J="#";for(var H=0;H<3;H++){J+=f[Number(K[H])]}if(K.length==4&&m.substr(3,1)=="a"){I=K[3]}}else{J=m}return{color:J,alpha:I}}function u(i){switch(i){case"butt":return"flat";case"round":return"round";case"square":default:return"square"}}function r(j){this.m_=s();this.mStack_=[];this.aStack_=[];this.currentPath_=[];this.strokeStyle="#000";this.fillStyle="#000";this.lineWidth=1;this.lineJoin="miter";this.lineCap="butt";this.miterLimit=b*1;this.globalAlpha=1;this.canvas=j;var i=j.ownerDocument.createElement("div");i.style.width=j.clientWidth+"px";i.style.height=j.clientHeight+"px";i.style.overflow="hidden";i.style.position="absolute";j.appendChild(i);this.element_=i;this.arcScaleX_=1;this.arcScaleY_=1;this.lineScale_=1}var n=r.prototype;n.clearRect=function(){this.element_.innerHTML=""};n.beginPath=function(){this.currentPath_=[]};n.moveTo=function(j,i){var m=this.getCoords_(j,i);this.currentPath_.push({type:"moveTo",x:m.x,y:m.y});this.currentX_=m.x;this.currentY_=m.y};n.lineTo=function(j,i){var m=this.getCoords_(j,i);this.currentPath_.push({type:"lineTo",x:m.x,y:m.y});this.currentX_=m.x;this.currentY_=m.y};n.bezierCurveTo=function(m,j,M,L,K,I){var i=this.getCoords_(K,I);var J=this.getCoords_(m,j);var H=this.getCoords_(M,L);q(this,J,H,i)};function q(i,H,m,j){i.currentPath_.push({type:"bezierCurveTo",cp1x:H.x,cp1y:H.y,cp2x:m.x,cp2y:m.y,x:j.x,y:j.y});i.currentX_=j.x;i.currentY_=j.y}n.quadraticCurveTo=function(K,m,j,i){var J=this.getCoords_(K,m);var I=this.getCoords_(j,i);var L={x:this.currentX_+2/3*(J.x-this.currentX_),y:this.currentY_+2/3*(J.y-this.currentY_)};var H={x:L.x+(I.x-this.currentX_)/3,y:L.y+(I.y-this.currentY_)/3};q(this,L,H,I)};n.arc=function(N,L,M,I,j,m){M*=b;var R=m?"at":"wa";var O=N+F(I)*M-p;var Q=L+t(I)*M-p;var i=N+F(j)*M-p;var P=L+t(j)*M-p;if(O==i&&!m){O+=0.125}var H=this.getCoords_(N,L);var K=this.getCoords_(O,Q);var J=this.getCoords_(i,P);this.currentPath_.push({type:R,x:H.x,y:H.y,radius:M,xStart:K.x,yStart:K.y,xEnd:J.x,yEnd:J.y})};n.rect=function(m,j,i,H){this.moveTo(m,j);this.lineTo(m+i,j);this.lineTo(m+i,j+H);this.lineTo(m,j+H);this.closePath()};n.strokeRect=function(m,j,i,H){var I=this.currentPath_;this.beginPath();this.moveTo(m,j);this.lineTo(m+i,j);this.lineTo(m+i,j+H);this.lineTo(m,j+H);this.closePath();this.stroke();this.currentPath_=I};n.fillRect=function(m,j,i,H){var I=this.currentPath_;this.beginPath();this.moveTo(m,j);this.lineTo(m+i,j);this.lineTo(m+i,j+H);this.lineTo(m,j+H);this.closePath();this.fill();this.currentPath_=I};n.createLinearGradient=function(j,H,i,m){var I=new B("gradient");I.x0_=j;I.y0_=H;I.x1_=i;I.y1_=m;return I};n.createRadialGradient=function(H,J,m,j,I,i){var K=new B("gradientradial");K.x0_=H;K.y0_=J;K.r0_=m;K.x1_=j;K.y1_=I;K.r1_=i;return K};n.drawImage=function(U,m){var N,L,P,ac,S,Q,X,ae;var O=U.runtimeStyle.width;var T=U.runtimeStyle.height;U.runtimeStyle.width="auto";U.runtimeStyle.height="auto";var M=U.width;var aa=U.height;U.runtimeStyle.width=O;U.runtimeStyle.height=T;if(arguments.length==3){N=arguments[1];L=arguments[2];S=Q=0;X=P=M;ae=ac=aa}else{if(arguments.length==5){N=arguments[1];L=arguments[2];P=arguments[3];ac=arguments[4];S=Q=0;X=M;ae=aa}else{if(arguments.length==9){S=arguments[1];Q=arguments[2];X=arguments[3];ae=arguments[4];N=arguments[5];L=arguments[6];P=arguments[7];ac=arguments[8]}else{throw Error("Invalid number of arguments")}}}var ad=this.getCoords_(N,L);var I=X/2;var j=ae/2;var ab=[];var i=10;var K=10;ab.push(" <g_vml_:group",' coordsize="',b*i,",",b*K,'"',' coordorigin="0,0"',' style="width:',i,"px;height:",K,"px;position:absolute;");if(this.m_[0][0]!=1||this.m_[0][1]){var J=[];J.push("M11=",this.m_[0][0],",","M12=",this.m_[1][0],",","M21=",this.m_[0][1],",","M22=",this.m_[1][1],",","Dx=",x(ad.x/b),",","Dy=",x(ad.y/b),"");var Z=ad;var Y=this.getCoords_(N+P,L);var V=this.getCoords_(N,L+ac);var R=this.getCoords_(N+P,L+ac);Z.x=w.max(Z.x,Y.x,V.x,R.x);Z.y=w.max(Z.y,Y.y,V.y,R.y);ab.push("padding:0 ",x(Z.x/b),"px ",x(Z.y/b),"px 0;filter:progid:DXImageTransform.Microsoft.Matrix(",J.join(""),", sizingmethod='clip');")}else{ab.push("top:",x(ad.y/b),"px;left:",x(ad.x/b),"px;")}ab.push(' ">','<g_vml_:image src="',U.src,'"',' style="width:',b*P,"px;"," height:",b*ac,'px;"',' cropleft="',S/M,'"',' croptop="',Q/aa,'"',' cropright="',(M-S-X)/M,'"',' cropbottom="',(aa-Q-ae)/aa,'"'," />","</g_vml_:group>");this.element_.insertAdjacentHTML("BeforeEnd",ab.join(""))};n.stroke=function(ah){var M=[];var N=false;var at=d(ah?this.fillStyle:this.strokeStyle);var ad=at.color;var an=at.alpha*this.globalAlpha;var J=10;var P=10;M.push("<g_vml_:shape",' filled="',!!ah,'"',' style="position:absolute;width:',J,"px;height:",P,'px;"',' coordorigin="0 0" coordsize="',b*J," ",b*P,'"',' stroked="',!ah,'"',' path="');var O=false;var ar={x:null,y:null};var Z={x:null,y:null};for(var am=0;am<this.currentPath_.length;am++){var al=this.currentPath_[am];var aq;switch(al.type){case"moveTo":aq=al;M.push(" m ",x(al.x),",",x(al.y));break;case"lineTo":M.push(" l ",x(al.x),",",x(al.y));break;case"close":M.push(" x ");al=null;break;case"bezierCurveTo":M.push(" c ",x(al.cp1x),",",x(al.cp1y),",",x(al.cp2x),",",x(al.cp2y),",",x(al.x),",",x(al.y));break;case"at":case"wa":M.push(" ",al.type," ",x(al.x-this.arcScaleX_*al.radius),",",x(al.y-this.arcScaleY_*al.radius)," ",x(al.x+this.arcScaleX_*al.radius),",",x(al.y+this.arcScaleY_*al.radius)," ",x(al.xStart),",",x(al.yStart)," ",x(al.xEnd),",",x(al.yEnd));break}if(al){if(ar.x==null||al.x<ar.x){ar.x=al.x}if(Z.x==null||al.x>Z.x){Z.x=al.x}if(ar.y==null||al.y<ar.y){ar.y=al.y}if(Z.y==null||al.y>Z.y){Z.y=al.y}}}M.push(' ">');if(!ah){var Y=this.lineScale_*this.lineWidth;if(Y<1){an*=Y}M.push("<g_vml_:stroke",' opacity="',an,'"',' joinstyle="',this.lineJoin,'"',' miterlimit="',this.miterLimit,'"',' endcap="',u(this.lineCap),'"',' weight="',Y,'px"',' color="',ad,'" />')}else{if(typeof this.fillStyle=="object"){var Q=this.fillStyle;var V=0;var ak={x:0,y:0};var ae=0;var T=1;if(Q.type_=="gradient"){var S=Q.x0_/this.arcScaleX_;var m=Q.y0_/this.arcScaleY_;var R=Q.x1_/this.arcScaleX_;var au=Q.y1_/this.arcScaleY_;var ap=this.getCoords_(S,m);var ao=this.getCoords_(R,au);var L=ao.x-ap.x;var K=ao.y-ap.y;V=Math.atan2(L,K)*180/Math.PI;if(V<0){V+=360}if(V<0.000001){V=0}}else{var ap=this.getCoords_(Q.x0_,Q.y0_);var j=Z.x-ar.x;var I=Z.y-ar.y;ak={x:(ap.x-ar.x)/j,y:(ap.y-ar.y)/I};j/=this.arcScaleX_*b;I/=this.arcScaleY_*b;var aj=w.max(j,I);ae=2*Q.r0_/aj;T=2*Q.r1_/aj-ae}var ac=Q.colors_;ac.sort(function(H,i){return H.offset-i.offset});var X=ac.length;var ab=ac[0].color;var aa=ac[X-1].color;var ag=ac[0].alpha*this.globalAlpha;var af=ac[X-1].alpha*this.globalAlpha;var ai=[];for(var am=0;am<X;am++){var U=ac[am];ai.push(U.offset*T+ae+" "+U.color)}M.push('<g_vml_:fill type="',Q.type_,'"',' method="none" focus="100%"',' color="',ab,'"',' color2="',aa,'"',' colors="',ai.join(","),'"',' opacity="',af,'"',' g_o_:opacity2="',ag,'"',' angle="',V,'"',' focusposition="',ak.x,",",ak.y,'" />')}else{M.push('<g_vml_:fill color="',ad,'" opacity="',an,'" />')}}M.push("</g_vml_:shape>");this.element_.insertAdjacentHTML("beforeEnd",M.join(""))};n.fill=function(){this.stroke(true)};n.closePath=function(){this.currentPath_.push({type:"close"})};n.getCoords_=function(H,j){var i=this.m_;return{x:b*(H*i[0][0]+j*i[1][0]+i[2][0])-p,y:b*(H*i[0][1]+j*i[1][1]+i[2][1])-p}};n.save=function(){var i={};y(this,i);this.aStack_.push(i);this.mStack_.push(this.m_);this.m_=e(s(),this.m_)};n.restore=function(){y(this.aStack_.pop(),this);this.m_=this.mStack_.pop()};function h(i){for(var I=0;I<3;I++){for(var H=0;H<2;H++){if(!isFinite(i[I][H])||isNaN(i[I][H])){return false}}}return true}function C(j,i,H){if(!h(i)){return}j.m_=i;if(H){var I=i[0][0]*i[1][1]-i[0][1]*i[1][0];j.lineScale_=E(o(I))}}n.translate=function(m,j){var i=[[1,0,0],[0,1,0],[m,j,1]];C(this,e(i,this.m_),false)};n.rotate=function(j){var H=F(j);var m=t(j);var i=[[H,m,0],[-m,H,0],[0,0,1]];C(this,e(i,this.m_),false)};n.scale=function(m,j){this.arcScaleX_*=m;this.arcScaleY_*=j;var i=[[m,0,0],[0,j,0],[0,0,1]];C(this,e(i,this.m_),true)};n.transform=function(I,H,K,J,j,i){var m=[[I,H,0],[K,J,0],[j,i,1]];C(this,e(m,this.m_),true)};n.setTransform=function(J,I,L,K,H,j){var i=[[J,I,0],[L,K,0],[H,j,1]];C(this,i,true)};n.clip=function(){};n.arcTo=function(){};n.createPattern=function(){return new g};function B(i){this.type_=i;this.x0_=0;this.y0_=0;this.r0_=0;this.x1_=0;this.y1_=0;this.r1_=0;this.colors_=[]}B.prototype.addColorStop=function(j,i){i=d(i);this.colors_.push({offset:j,color:i.color,alpha:i.alpha})};function g(){}G_vmlCanvasManager=l;CanvasRenderingContext2D=r;CanvasGradient=B;CanvasPattern=g})()}var plt=plt||{};(function(){plt.types=plt.types||{};plt.types.Logic={TRUE:true,FALSE:false};Boolean.prototype.toWrittenString=function(){if(this.valueOf()){return"true"}return"false"};Boolean.prototype.toDisplayedString=Boolean.prototype.toWrittenString;Boolean.prototype.isEqual=function(l){return this==l};plt.types.Char=function(l){this.val=l};plt.types.Char.makeInstance=function(l){return new plt.types.Char(l)};plt.types.Char.prototype.toWrittenString=function(){return"#\\"+this.val};plt.types.Char.prototype.toDisplayedString=function(){return this.val};plt.types.Char.prototype.getValue=function(){return this.val};plt.types.Char.prototype.isEqual=function(l){return l instanceof plt.types.Char&&this.val==l.val};plt.types.Symbol=function(l){this.val=l};var e={};plt.types.Symbol.makeInstance=function(l){if(!(l in e)){e[l]=new plt.types.Symbol(l)}else{}return e[l]};plt.types.Symbol.prototype.isEqual=function(l){return l instanceof plt.types.Symbol&&this.val==l.val};plt.types.Symbol.prototype.toString=function(){return this.val};plt.types.Symbol.prototype.toWrittenString=function(){return this.val};plt.types.Symbol.prototype.toDisplayedString=function(){return this.val};plt.types.Empty=function(){};plt.types.Empty.EMPTY=new plt.types.Empty();plt.types.Empty.prototype.isEqual=function(l){return l instanceof plt.types.Empty};plt.types.Empty.prototype.first=function(){throw new plt.Kernel.MobyRuntimeError("first can't be applied on empty.")};plt.types.Empty.prototype.rest=function(){throw new plt.Kernel.MobyRuntimeError("rest can't be applied on empty.")};plt.types.Empty.prototype.isEmpty=function(){return true};plt.types.Empty.prototype.toWrittenString=function(){return"empty"};plt.types.Empty.prototype.toDisplayedString=function(){return"empty"};plt.types.Empty.prototype.append=function(l){return l};plt.types.Cons=function(m,l){this.f=m;this.r=l};plt.types.Cons.makeInstance=function(m,l){return new plt.types.Cons(m,l)};plt.types.Cons.prototype.isEqual=function(l){if(!(l instanceof plt.types.Cons)){return plt.types.Logic.FALSE}return(plt.Kernel.equal_question_(this.first(),l.first())&&plt.Kernel.equal_question_(this.rest(),l.rest()))};plt.types.Cons.prototype.first=function(){return this.f};plt.types.Cons.prototype.rest=function(){return this.r};plt.types.Cons.prototype.isEmpty=function(){return false};plt.types.Cons.prototype.append=function(m){if(m.isEmpty()){return this}var n=m;var l=plt.Kernel.reverse(this);while(!l.isEmpty()){n=plt.types.Cons.makeInstance(l.first(),n);l=l.rest()}return n};plt.types.Cons.prototype.toWrittenString=function(){var l=[];var m=this;while(!m.isEmpty()){l.push(plt.Kernel.toWrittenString(m.first()));m=m.rest()}return"("+l.join(" ")+")"};plt.types.Cons.prototype.toDisplayedString=function(){var l=[];var m=this;while(!m.isEmpty()){l.push(m.first().toDisplayedString());m=m.rest()}return"("+l.join(" ")+")"};var g=function(l,m){l.appendChild(m);if(m.afterAttach){m.afterAttach()}};plt.types.Cons.prototype.toDomNode=function(){var l=document.createElement("div");l.appendChild(document.createTextNode("("));var m=this;while(!m.isEmpty()){g(l,plt.Kernel.toDomNode(m.first()));m=m.rest();if(!m.isEmpty()){g(l,document.createTextNode(" "))}}l.appendChild(document.createTextNode(")"));return l};plt.types.Vector=function(o,m){this.elts=new Array(o);if(m){for(var l=0;l<o;l++){this.elts[l]=m[l]}}else{for(var l=0;l<o;l++){this.elts[l]=undefined}}};plt.types.Vector.makeInstance=function(m,l){return new plt.types.Vector(m,l)};plt.types.Vector.prototype.length=function(){return this.elts.length};plt.types.Vector.prototype.ref=function(l){return this.elts[l]};plt.types.Vector.prototype.set=function(m,l){this.elts[m]=l};plt.types.Vector.prototype.toWrittenString=function(){var m=[];for(var l=0;l<this.length();l++){m.push(plt.Kernel.toWrittenString(this.ref(l)))}return"#("+m.join(" ")+")"};plt.types.Vector.prototype.toDisplayedString=function(){var m=[];for(var l=0;l<this.length();l++){m.push(plt.Kernel.toDisplayedStringString(this.ref(l)))}return"#("+m.join(" ")+")"};plt.types.Vector.prototype.toDomNode=function(){var m=document.createElement("div");m.appendChild(document.createTextNode("#("));for(var l=0;l<this.length();l++){g(m,plt.Kernel.toDomNode(this.ref(l)))}m.appendChild(document.createTextNode(")"));return m};var i=function(m,l){var n;if(isNaN(m)||!isFinite(m)){throw new plt.Kernel.MobyRuntimeError("not a number: "+m)}if(isNaN(l)||!isFinite(l)){throw new plt.Kernel.MobyRuntimeError("not a number: "+l)}while(l!=0){n=m;m=l;l=n%l}return m};plt.types.Rational=function(o,l){if(l==undefined){l=1}if(l==0){throw new plt.Kernel.MobyRuntimeError("cannot have zero denominator.")}var m=i(Math.abs(o),Math.abs(l));this.n=o/m;this.d=l/m};plt.types.Rational.prototype.toWrittenString=function(){if(this.d==1){return this.n+""}else{return this.n+"/"+this.d}};plt.types.Rational.prototype.toDisplayedString=plt.types.Rational.prototype.toWrittenString;plt.types.Rational.prototype.level=function(){return 0};plt.types.Rational.prototype.lift=function(l){if(l.level()==1){return plt.types.FloatPoint.makeInstance(this.n/this.d)}if(l.level()==2){return plt.types.Complex.makeInstance(this,plt.types.Rational.ZERO)}throw new plt.Kernel.MobyRuntimeError("invalid level of Number")};plt.types.Rational.prototype.isFinite=function(){return true};plt.types.Rational.prototype.isEqual=function(l){return l instanceof plt.types.Rational&&this.n==l.n&&this.d==l.d};plt.types.Rational.prototype.isInteger=function(){return this.d==1};plt.types.Rational.prototype.isRational=function(){return true};plt.types.Rational.prototype.isReal=function(){return true};plt.types.Rational.prototype.add=function(l){return plt.types.Rational.makeInstance(this.n*l.d+this.d*l.n,this.d*l.d)};plt.types.Rational.prototype.subtract=function(l){return plt.types.Rational.makeInstance((this.n*l.d)-(this.d*l.n),(this.d*l.d))};plt.types.Rational.prototype.multiply=function(l){return plt.types.Rational.makeInstance(this.n*l.n,this.d*l.d)};plt.types.Rational.prototype.divide=function(l){if(this.d*l.n==0){throw new plt.Kernel.MobyRuntimeError("division by zero")}return plt.types.Rational.makeInstance(this.n*l.d,this.d*l.n)};plt.types.Rational.prototype.toExact=function(){return this};plt.types.Rational.prototype.isExact=function(){return true};plt.types.Rational.prototype.toInteger=function(){return Math.floor(this.n/this.d)};plt.types.Rational.prototype.numerator=function(){return plt.types.Rational.makeInstance(this.n)};plt.types.Rational.prototype.denominator=function(){return plt.types.Rational.makeInstance(this.d)};plt.types.Rational.prototype.toFloat=function(){return this.n/this.d};plt.types.Rational.prototype.toComplex=function(){return plt.types.Complex.makeInstance(this,plt.types.Rational.ZERO)};plt.types.Rational.prototype.greaterThan=function(l){return this.n*l.d>this.d*l.n};plt.types.Rational.prototype.greaterThanOrEqual=function(l){return this.n*l.d>=this.d*l.n};plt.types.Rational.prototype.lessThan=function(l){return this.n*l.d<this.d*l.n};plt.types.Rational.prototype.lessThanOrEqual=function(l){return this.n*l.d<=this.d*l.n};plt.types.Rational.prototype.sqrt=function(){if(this.n>=0){var m=Math.sqrt(this.n);var l=Math.sqrt(this.d);if(Math.floor(m)==m&&Math.floor(l)==l){return plt.types.Rational.makeInstance(m,l)}else{return plt.types.FloatPoint.makeInstance(m/l)}}else{var m=Math.sqrt(-this.n);var l=Math.sqrt(this.d);if(Math.floor(m)==m&&Math.floor(l)==l){return plt.types.Complex.makeInstance(plt.types.Rational.ZERO,plt.types.Rational.makeInstance(m,l))}else{return plt.types.Complex.makeInstance(plt.types.Rational.ZERO,plt.types.FloatPoint.makeInstance(m/l))}}};plt.types.Rational.prototype.abs=function(){return plt.types.Rational.makeInstance(Math.abs(this.n),this.d)};plt.types.Rational.prototype.floor=function(){return plt.types.Rational.makeInstance(Math.floor(this.n/this.d),1)};plt.types.Rational.prototype.ceiling=function(){return plt.types.Rational.makeInstance(Math.ceil(this.n/this.d),1)};plt.types.Rational.prototype.conjugate=plt.types.Rational.prototype.abs;plt.types.Rational.prototype.magnitude=plt.types.Rational.prototype.abs;plt.types.Rational.prototype.log=function(){return plt.types.FloatPoint.makeInstance(Math.log(this.n/this.d))};plt.types.Rational.prototype.angle=function(){if(0==this.n){return plt.types.Rational.ZERO}if(this.n>0){return plt.types.Rational.ZERO}else{return plt.Kernel.pi}};plt.types.Rational.prototype.atan=function(){return plt.types.FloatPoint.makeInstance(Math.atan(this.n/this.d))};plt.types.Rational.prototype.cos=function(){return plt.types.FloatPoint.makeInstance(Math.cos(this.n/this.d))};plt.types.Rational.prototype.sin=function(){return plt.types.FloatPoint.makeInstance(Math.sin(this.n/this.d))};plt.types.Rational.prototype.expt=function(l){return plt.types.FloatPoint.makeInstance(Math.pow(this.n/this.d,l.n/l.d))};plt.types.Rational.prototype.exp=function(){return plt.types.FloatPoint.makeInstance(Math.exp(this.n/this.d))};plt.types.Rational.prototype.acos=function(){return plt.types.FloatPoint.makeInstance(Math.acos(this.n/this.d))};plt.types.Rational.prototype.asin=function(){return plt.types.FloatPoint.makeInstance(Math.asin(this.n/this.d))};plt.types.Rational.prototype.imag_dash_part=function(){return plt.types.Rational.ZERO};plt.types.Rational.prototype.real_dash_part=function(){return this};plt.types.Rational.prototype.timesI=function(){return plt.types.Complex.makeInstance(plt.types.Rational.ZERO,this)};plt.types.Rational.prototype.round=function(){if(this.d==2){var l=this.n/this.d;var m=Math.floor(l);var n=Math.ceil(l);if(m%2==0){return plt.types.Rational.makeInstance(m)}else{return plt.types.Rational.makeInstance(n)}}else{return plt.types.Rational.makeInstance(Math.round(this.n/this.d))}};plt.types.Rational.prototype.half=function(){return plt.types.Rational.makeInstance(this.n,this.d*2)};plt.types.Rational.prototype.minus=function(){return plt.types.Rational.makeInstance(0-this.n,this.d)};var h={};plt.types.Rational.makeInstance=function(m,l){if(m==undefined){throw new plt.Kernel.MobyRuntimeError("n undefined")}if(l==undefined){l=1}if(l<0){m=-m;l=-l}if(l==1&&m in h){return h[m]}else{return new plt.types.Rational(m,l)}};h={};(function(){var l;for(l=-500;l<500;l++){h[l]=new plt.types.Rational(l,1)}})();plt.types.Rational.NEGATIVE_ONE=h[-1];plt.types.Rational.ZERO=h[0];plt.types.Rational.ONE=h[1];plt.types.Rational.TWO=h[2];plt.types.FloatPoint=function(l){this.n=l};plt.types.FloatPoint.makeInstance=function(l){return new plt.types.FloatPoint(l)};var j=plt.types.FloatPoint.makeInstance(Number.NaN);var b=plt.types.FloatPoint.makeInstance(Number.POSITIVE_INFINITY);var c=plt.types.FloatPoint.makeInstance(Number.NEGATIVE_INFINITY);plt.types.FloatPoint.prototype.isFinite=function(){return isFinite(this.n)};plt.types.FloatPoint.prototype.toExact=function(){return plt.types.Rational.makeInstance(Math.floor(this.n),1)};plt.types.FloatPoint.prototype.isExact=function(){return false};plt.types.FloatPoint.prototype.level=function(){return 1};plt.types.FloatPoint.prototype.lift=function(l){return plt.types.Complex.makeInstance(this,plt.types.Rational.ZERO)};plt.types.FloatPoint.prototype.toWrittenString=function(){if(this.n==Number.POSITIVE_INFINITY){return"+inf.0"}else{if(this.n==Number.NEGATIVE_INFINITY){return"-inf.0"}else{if(this.n==Number.NaN){return"+nan.0"}else{return this.n.toString()}}}};plt.types.FloatPoint.prototype.toDisplayedString=plt.types.FloatPoint.prototype.toWrittenString;plt.types.FloatPoint.prototype.isEqual=function(l){return((l instanceof plt.types.FloatPoint)&&((this.n==l.n)||(isNaN(this.n)&&isNaN(l.n))))};plt.types.FloatPoint.prototype.isRational=function(){return this.isFinite()&&this.n==Math.floor(this.n)};plt.types.FloatPoint.prototype.isInteger=function(){return this.isFinite()&&this.n==Math.floor(this.n)};plt.types.FloatPoint.prototype.isReal=function(){return true};var d=function(l){if(plt.types.NumberTower.lessThan(l,plt.types.Rational.ZERO)){return -1}else{if(plt.types.NumberTower.greaterThan(l,plt.types.Rational.ZERO)){return 1}else{return 0}}};plt.types.FloatPoint.prototype.add=function(l){if(this.isFinite()&&l.isFinite()){return plt.types.FloatPoint.makeInstance(this.n+l.n)}else{if(isNaN(this.n)||isNaN(l.n)){return j}else{if(this.isFinite()&&!l.isFinite()){return l}else{if(!this.isFinite()&&l.isFinite()){return this}else{return((d(this)*d(l)==1)?this:j)}}}}};plt.types.FloatPoint.prototype.subtract=function(l){if(this.isFinite()&&l.isFinite()){return plt.types.FloatPoint.makeInstance(this.n-l.n)}else{if(isNaN(this.n)||isNaN(l.n)){return j}else{if(!this.isFinite()&&!l.isFinite()){if(d(this)==d(l)){return j}else{return this}}else{if(this.isFinite()){return plt.types.NumberTower.multiply(l,plt.types.Rational.NEGATIVE_ONE)}else{return this}}}}};plt.types.FloatPoint.prototype.multiply=function(l){if(this.n==0||l.n==0){return plt.types.Rational.ZERO}if(this.isFinite()&&l.isFinite()){return plt.types.FloatPoint.makeInstance(this.n*l.n)}else{if(isNaN(this.n)||isNaN(l.n)){return j}else{return((d(this)*d(l)==1)?b:c)}}};plt.types.FloatPoint.prototype.divide=function(l){if(this.isFinite()&&l.isFinite()){if(l.n==0){throw new plt.Kernel.MobyRuntimeError("division by zero")}return plt.types.FloatPoint.makeInstance(this.n/l.n)}else{if(isNaN(this.n)||isNaN(l.n)){return j}else{if(!this.isFinite()&&!l.isFinite()){return j}else{if(this.isFinite()&&!l.isFinite()){return plt.types.FloatPoint.makeInstance(0)}else{if(!this.isFinite()&&l.isFinite()){return((d(this)*d(l)==1)?b:c)}}}}}};plt.types.FloatPoint.prototype.toInteger=function(){return Math.floor(this.n)};plt.types.FloatPoint.prototype.numerator=function(){var m=this.n.toString();var l=m.match(/^(.*)\.(.*)$/);if(l){return plt.types.FloatPoint.makeInstance(parseFloat(l[1]+l[2]))}else{return this}};plt.types.FloatPoint.prototype.denominator=function(){var m=this.n.toString();var l=m.match(/^(.*)\.(.*)$/);if(l){return plt.types.FloatPoint.makeInstance(Math.pow(10,l[2].length))}else{return plt.types.FloatPoint.makeInstance(1)}};plt.types.FloatPoint.prototype.toFloat=function(){return this.n};plt.types.FloatPoint.prototype.toComplex=function(){return plt.types.Complex.makeInstance(this,plt.types.Rational.ZERO)};plt.types.FloatPoint.prototype.floor=function(){if(!isFinite(this.n)){return this}return plt.types.Rational.makeInstance(Math.floor(this.n),1)};plt.types.FloatPoint.prototype.ceiling=function(){if(!isFinite(this.n)){return this}return plt.types.Rational.makeInstance(Math.ceil(this.n),1)};plt.types.FloatPoint.prototype.greaterThan=function(l){return this.n>l.n};plt.types.FloatPoint.prototype.greaterThanOrEqual=function(l){return this.n>=l.n};plt.types.FloatPoint.prototype.lessThan=function(l){return this.n<l.n};plt.types.FloatPoint.prototype.lessThanOrEqual=function(l){return this.n<=l.n};plt.types.FloatPoint.prototype.sqrt=function(){if(this.n<0){var l=plt.types.Complex.makeInstance(plt.types.Rational.ZERO,plt.types.FloatPoint.makeInstance(Math.sqrt(-this.n)));return l}else{return plt.types.FloatPoint.makeInstance(Math.sqrt(this.n))}};plt.types.FloatPoint.prototype.abs=function(){return plt.types.FloatPoint.makeInstance(Math.abs(this.n))};plt.types.FloatPoint.prototype.log=function(){if(this.n<0){return this.toComplex().log()}else{return plt.types.FloatPoint.makeInstance(Math.log(this.n))}};plt.types.FloatPoint.prototype.angle=function(){if(0==this.n){return plt.types.Rational.ZERO}if(this.n>0){return plt.types.Rational.ZERO}else{return plt.Kernel.pi}};plt.types.FloatPoint.prototype.atan=function(){return plt.types.FloatPoint.makeInstance(Math.atan(this.n))};plt.types.FloatPoint.prototype.cos=function(){return plt.types.FloatPoint.makeInstance(Math.cos(this.n))};plt.types.FloatPoint.prototype.sin=function(){return plt.types.FloatPoint.makeInstance(Math.sin(this.n))};plt.types.FloatPoint.prototype.expt=function(l){if(this.n==1){if(l.isFinite()){return this}else{if(isNaN(l.n)){return this}else{return this}}}else{return plt.types.FloatPoint.makeInstance(Math.pow(this.n,l.n))}};plt.types.FloatPoint.prototype.exp=function(){return plt.types.FloatPoint.makeInstance(Math.exp(this.n))};plt.types.FloatPoint.prototype.acos=function(){return plt.types.FloatPoint.makeInstance(Math.acos(this.n))};plt.types.FloatPoint.prototype.asin=function(){return plt.types.FloatPoint.makeInstance(Math.asin(this.n))};plt.types.FloatPoint.prototype.imag_dash_part=function(){return plt.types.Rational.ZERO};plt.types.FloatPoint.prototype.real_dash_part=function(){return this};plt.types.FloatPoint.prototype.round=function(){if(isFinite(this.n)){if(Math.abs(Math.floor(this.n)-this.n)==0.5){if(Math.floor(this.n)%2==0){return plt.types.Rational.makeInstance(Math.floor(this.n))}return plt.types.Rational.makeInstance(Math.ceil(this.n))}else{return plt.types.Rational.makeInstance(Math.round(this.n))}}else{return this}};plt.types.FloatPoint.prototype.conjugate=plt.types.FloatPoint.prototype.abs;plt.types.FloatPoint.prototype.magnitude=plt.types.FloatPoint.prototype.abs;plt.types.FloatPoint.prototype.minus=function(){return plt.types.FloatPoint.makeInstance(0-this.n)};plt.types.FloatPoint.prototype.half=function(){return plt.types.FloatPoint.makeInstance(this.n/2)};plt.types.FloatPoint.prototype.timesI=function(){return plt.types.Complex.makeInstance(plt.types.Rational.ZERO,this)};plt.types.Complex=function(m,l){this.r=m;this.i=l};plt.types.Complex.makeInstance=function(n,m){if(typeof(n)=="number"){n=(n==Math.floor(n)?plt.types.Rational.makeInstance(n):plt.types.FloatPoint.makeInstance(n))}if(typeof(m)=="number"){m=(m==Math.floor(m)?plt.types.Rational.makeInstance(m):plt.types.FloatPoint.makeInstance(m))}var l=new plt.types.Complex(n,m);return l};plt.types.Complex.prototype.toWrittenString=function(){if(plt.types.NumberTower.greaterThanOrEqual(this.i,plt.types.Rational.ZERO)){return plt.Kernel.toWrittenString(this.r)+"+"+plt.Kernel.toWrittenString(this.i)+"i"}else{return plt.Kernel.toWrittenString(this.r)+plt.Kernel.toWrittenString(this.i)+"i"}};plt.types.Complex.prototype.toDisplayedString=plt.types.Complex.prototype.toWrittenString;plt.types.Complex.prototype.isFinite=function(){return this.r.isFinite()&&this.i.isFinite()};plt.types.Complex.prototype.isRational=function(){return this.r.isRational()&&plt.types.NumberTower.equal(this.i,plt.types.Rational.ZERO)};plt.types.Complex.prototype.isInteger=function(){return this.r.isInteger()&&plt.types.NumberTower.equal(this.i,plt.types.Rational.ZERO)};plt.types.Complex.prototype.toExact=function(){if(!this.isReal()){throw new plt.Kernel.MobyRuntimeError("inexact->exact: expects argument of type real number")}return this.r.toExact()};plt.types.Complex.prototype.isExact=function(){return this.r.isExact()&&this.i.isExact()};plt.types.Complex.prototype.level=function(){return 2};plt.types.Complex.prototype.lift=function(l){throw new plt.Kernel.MobyRuntimeError("Don't know how to lift Complex number")};plt.types.Complex.prototype.isEqual=function(m){var l=((m instanceof plt.types.Complex)&&(plt.types.NumberTower.equal(this.r,m.r))&&(plt.types.NumberTower.equal(this.i,m.i)));return l};plt.types.Complex.prototype.greaterThan=function(l){if(!this.isReal()||!l.isReal()){throw new plt.Kernel.MobyRuntimeError(">: expects argument of type real number")}return plt.types.NumberTower.greaterThan(this.r,l.r)};plt.types.Complex.prototype.greaterThanOrEqual=function(l){if(!this.isReal()||!l.isReal()){throw new plt.Kernel.MobyRuntimeError(">: expects argument of type real number")}return plt.types.NumberTower.greaterThanOrEqual(this.r,l.r)};plt.types.Complex.prototype.lessThan=function(l){if(!this.isReal()||!l.isReal()){throw new plt.Kernel.MobyRuntimeError(">: expects argument of type real number")}return plt.types.NumberTower.lessThan(this.r,l.r)};plt.types.Complex.prototype.lessThanOrEqual=function(l){if(!this.isReal()||!l.isReal()){throw new plt.Kernel.MobyRuntimeError(">: expects argument of type real number")}return plt.types.NumberTower.lessThanOrEqual(this.r,l.r)};plt.types.Complex.prototype.abs=function(){if(!plt.types.NumberTower.equal(this.i,plt.types.Rational.ZERO).valueOf()){throw new plt.Kernel.MobyRuntimeError("abs: expects argument of type real number")}return this.r.abs()};plt.types.Complex.prototype.toInteger=function(){if(!plt.types.NumberTower.equal(this.i,plt.types.Rational.ZERO).valueOf()){throw new plt.Kernel.MobyRuntimeError("toInteger: expects argument of type real number")}return this.r.toInteger()};plt.types.Complex.prototype.numerator=function(){if(!this.isReal()){throw new plt.Kernel.MobyRuntimeError("numerator: can only be applied to real number")}return this.n.numerator()};plt.types.Complex.prototype.denominator=function(){if(!this.isReal()){throw new plt.Kernel.MobyRuntimeError("floor: can only be applied to real number")}return this.n.denominator()};plt.types.Complex.prototype.toFloat=function(){if(!plt.types.NumberTower.equal(this.i,plt.types.Rational.ZERO).valueOf()){throw new plt.Kernel.MobyRuntimeError("toFloat: expects argument of type real number")}return this.r.toFloat()};plt.types.Complex.prototype.toComplex=function(){return this};plt.types.Complex.prototype.add=function(l){return plt.types.Complex.makeInstance(plt.types.NumberTower.add(this.r,l.r),plt.types.NumberTower.add(this.i,l.i))};plt.types.Complex.prototype.subtract=function(l){return plt.types.Complex.makeInstance(plt.types.NumberTower.subtract(this.r,l.r),plt.types.NumberTower.subtract(this.i,l.i))};plt.types.Complex.prototype.multiply=function(l){if(l.isReal()){return plt.types.Complex.makeInstance(plt.types.NumberTower.multiply(this.r,l.r),plt.types.NumberTower.multiply(this.i,l.r))}var n=plt.types.NumberTower.subtract(plt.types.NumberTower.multiply(this.r,l.r),plt.types.NumberTower.multiply(this.i,l.i));var m=plt.types.NumberTower.add(plt.types.NumberTower.multiply(this.r,l.i),plt.types.NumberTower.multiply(this.i,l.r));if(plt.types.NumberTower.equal(m,plt.types.Rational.ZERO)){return n}return plt.types.Complex.makeInstance(n,m)};plt.types.Complex.prototype.divide=function(n){if(n.isReal()){return plt.types.Complex.makeInstance(plt.types.NumberTower.divide(this.r,n.r),plt.types.NumberTower.divide(this.i,n.r))}var o=n.conjugate();var m=plt.types.NumberTower.multiply(this,o).toComplex();var p=plt.types.NumberTower.multiply(n,o);var l=plt.types.Complex.makeInstance(plt.types.NumberTower.divide(m.r,p),plt.types.NumberTower.divide(m.i,p));return l};plt.types.Complex.prototype.conjugate=function(){var l=plt.types.Complex.makeInstance(this.r,plt.types.NumberTower.subtract(plt.types.Rational.ZERO,this.i));return l};plt.types.Complex.prototype.magnitude=function(){var l=plt.types.NumberTower.add(plt.types.NumberTower.multiply(this.r,this.r),plt.types.NumberTower.multiply(this.i,this.i));return l.sqrt()};plt.types.Complex.prototype.isReal=function(){return plt.types.NumberTower.equal(this.i,plt.types.Rational.ZERO)};plt.types.Complex.prototype.sqrt=function(){if(this.isReal()){return this.r.sqrt()}var l=plt.types.NumberTower.add(this.magnitude(),this.r);var n=l.half().sqrt();var m=plt.types.NumberTower.divide(this.i,plt.types.NumberTower.multiply(l,plt.types.FloatPoint.makeInstance(2)).sqrt());return plt.types.Complex.makeInstance(n,m)};plt.types.Complex.prototype.log=function(){var n=this.magnitude();var o=this.angle();var l=plt.types.NumberTower.add(n.log(),o.timesI());return l};plt.types.Complex.prototype.angle=function(){if(this.isReal()){return this.r.angle()}if(plt.types.NumberTower.equal(plt.types.Rational.ZERO,this.r)){var l=plt.Kernel.pi.half();return plt.types.NumberTower.greaterThan(this.i,plt.types.Rational.ZERO)?l:l.minus()}else{var l=plt.types.NumberTower.divide(this.i.abs(),this.r.abs()).atan();if(plt.types.NumberTower.greaterThan(this.r,plt.types.Rational.ZERO)){return plt.types.NumberTower.greaterThan(this.i,plt.types.Rational.ZERO)?l:l.minus()}else{return plt.types.NumberTower.greaterThan(this.i,plt.types.Rational.ZERO)?plt.Kernel.pi.subtract(l):l.subtract(plt.Kernel.pi)}}};var f=plt.types.Complex.makeInstance(plt.types.Rational.ZERO,plt.types.Rational.ONE);var k=plt.types.Complex.makeInstance(plt.types.Rational.ZERO,plt.types.Rational.NEGATIVE_ONE);plt.types.Complex.prototype.atan=function(){if(plt.types.NumberTower.equal(this,f)||plt.types.NumberTower.equal(this,k)){return plt.types.FloatPoint.makeInstance(Number.NEGATIVE_INFINITY)}return plt.types.NumberTower.multiply(f,plt.types.NumberTower.multiply(plt.types.FloatPoint.makeInstance(0.5),(plt.types.NumberTower.divide(plt.types.NumberTower.add(f,this),plt.types.NumberTower.add(f,plt.types.NumberTower.subtract(plt.types.Rational.ZERO,this)))).log()))};plt.types.Complex.prototype.cos=function(){if(this.isReal()){return this.r.cos()}var m=this.timesI();var l=m.minus();return plt.types.NumberTower.add(m.exp(),l.exp()).half()};plt.types.Complex.prototype.sin=function(){if(this.isReal()){return this.r.sin()}var p=this.timesI();var o=p.minus();var n=plt.types.Complex.makeInstance(plt.types.Rational.ZERO,plt.types.Rational.TWO);var m=plt.types.NumberTower.subtract(p.exp(),o.exp());var l=plt.types.NumberTower.divide(m,n);return l};plt.types.Complex.prototype.expt=function(m){var l=plt.types.NumberTower.multiply(m,this.log());return l.exp()};plt.types.Complex.prototype.exp=function(){var n=this.r.exp();var l=this.i.cos();var m=this.i.sin();return plt.types.NumberTower.multiply(n,plt.types.NumberTower.add(l,m.timesI()))};plt.types.Complex.prototype.acos=function(){if(this.isReal()){return this.r.acos()}var o=plt.Kernel.pi.half();var p=this.timesI();var n=plt.types.NumberTower.subtract(plt.types.Rational.ONE,this.multiply(this)).sqrt();var m=plt.types.NumberTower.add(p,n).log().timesI();return plt.types.NumberTower.add(o,m)};plt.types.Complex.prototype.asin=function(){if(this.isReal()){return this.r.asin()}var n=this.timesI();var l=plt.types.NumberTower.subtract(plt.types.Rational.ONE,this.multiply(this)).sqrt();var m=plt.types.NumberTower.add(n,l).log().timesI().minus();throw new plt.Kernel.MobyRuntimeError("")};plt.types.Complex.prototype.ceiling=function(){if(!this.isReal()){throw new plt.Kernel.MobyRuntimeError("ceiling: can only be applied to real number")}return this.r.ceiling()};plt.types.Complex.prototype.floor=function(){if(!this.isReal()){throw new plt.Kernel.MobyRuntimeError("floor: can only be applied to real number")}return this.r.floor()};plt.types.Complex.prototype.imag_dash_part=function(){return this.i};plt.types.Complex.prototype.real_dash_part=function(){return this.r};plt.types.Complex.prototype.round=function(){return this.r.round()};plt.types.Complex.prototype.timesI=function(){return this.multiply(plt.types.Complex.makeInstance(plt.types.Rational.ZERO,plt.types.Rational.ONE))};plt.types.Complex.prototype.minus=function(){return plt.types.Complex.makeInstance(plt.types.NumberTower.subtract(plt.types.Rational.ZERO,this.r),plt.types.NumberTower.subtract(plt.types.Rational.ZERO,this.i))};plt.types.Complex.prototype.half=function(){return plt.types.Complex.makeInstance(this.r.half(),this.i.half())};plt.types.NumberTower={};plt.types.NumberTower.toInteger=function(l){return l.toInteger()};plt.types.NumberTower.toFloat=function(l){return l.toFloat()};plt.types.NumberTower.abs=function(l){return l.abs()};plt.types.NumberTower.isFinite=function(l){return l.isFinite()};plt.types.NumberTower.toExact=function(l){return l.toExact()};plt.types.NumberTower.add=function(l,m){if(l.level()<m.level()){l=l.lift(m)}if(m.level()<l.level()){m=m.lift(l)}return l.add(m)};plt.types.NumberTower.subtract=function(l,m){if(l.level()<m.level()){l=l.lift(m)}if(m.level()<l.level()){m=m.lift(l)}return l.subtract(m)};plt.types.NumberTower.multiply=function(l,m){if(l.level()<m.level()){l=l.lift(m)}if(m.level()<l.level()){m=m.lift(l)}return l.multiply(m)};plt.types.NumberTower.divide=function(l,m){if(l.level()<m.level()){l=l.lift(m)}if(m.level()<l.level()){m=m.lift(l)}return l.divide(m)};plt.types.NumberTower.equal=function(l,m){if(l.level()<m.level()){l=l.lift(m)}if(m.level()<l.level()){m=m.lift(l)}return l.isEqual(m)};plt.types.NumberTower.approxEqual=function(l,n,m){return plt.types.NumberTower.lessThan(plt.types.NumberTower.abs(plt.types.NumberTower.subtract(l,n)),m)};plt.types.NumberTower.greaterThanOrEqual=function(l,m){if(l.level()<m.level()){l=l.lift(m)}if(m.level()<l.level()){m=m.lift(l)}if(!(l.isReal()&&m.isReal())){throw new plt.Kernel.MobyRuntimeError("greaterThanOrEqual: couldn't be applied to complex number")}return l.greaterThanOrEqual(m)};plt.types.NumberTower.lessThanOrEqual=function(l,m){if(l.level()<m.level()){l=l.lift(m)}if(m.level()<l.level()){m=m.lift(l)}if(!(l.isReal()&&m.isReal())){throw new plt.Kernel.MobyRuntimeError("lessThanOrEqual: couldn't be applied to complex number")}return l.lessThanOrEqual(m)};plt.types.NumberTower.greaterThan=function(l,m){if(l.level()<m.level()){l=l.lift(m)}if(m.level()<l.level()){m=m.lift(l)}if(!(l.isReal()&&m.isReal())){throw new plt.Kernel.MobyRuntimeError("greaterThan: couldn't be applied to complex number")}return l.greaterThan(m)};plt.types.NumberTower.lessThan=function(l,m){if(l.level()<m.level()){l=l.lift(m)}if(m.level()<l.level()){m=m.lift(l)}if(!(l.isReal()&&m.isReal())){throw new plt.Kernel.MobyRuntimeError("lessThan: couldn't be applied to complex number")}return l.lessThan(m)};plt.types.NumberTower.modulo=function(o,p){var l=plt.types.Rational.makeInstance(o.toInteger()%p.toInteger(),1);if(plt.types.NumberTower.lessThan(p,plt.types.Rational.ZERO)){if(plt.types.NumberTower.lessThanOrEqual(l,plt.types.Rational.ZERO)){return l}return plt.types.NumberTower.add(l,p)}else{if(plt.types.NumberTower.lessThan(l,plt.types.Rational.ZERO)){return plt.types.NumberTower.add(l,p)}return l}};plt.types.NumberTower.sqr=function(l){return plt.types.NumberTower.multiply(l,l)};plt.types.NumberTower.expt=function(l,m){if(l.level()<m.level()){l=l.lift(m)}if(m.level()<l.level()){m=m.lift(l)}return l.expt(m)};plt.types.String=String;plt.types.String.makeInstance=function(l){return l.valueOf()};plt.types.String.prototype.isEqual=function(l){return this==l};plt.types.String.prototype.toWrittenString=function(){return'"'+this.replace(/["\\]/g,function(m,n,l){return"\\"+m})+'"'};plt.types.String.prototype.toDisplayedString=function(){return this}})();var plt=plt||{};(function(){var f=function(aa,Y,Z){if(aa.addEventListener){aa.addEventListener(Y,Z,false)}else{aa.attachevent("on"+event,Z,false)}};var y=function(Z){var Y=function(){};Y.prototype=Z;return new Y()};var w=function(Y){this.msg=Y};w.prototype.name="MobyError";w.prototype.toString=function(){return this.name+": "+this.msg};var V=function(Z,Y){w.call(this,Z);this.loc=Y};V.prototype=y(w.prototype);V.prototype.name="MobyParserError";var L=function(Z,Y){w.call(this,Z);this.stx=Y};L.prototype=y(w.prototype);L.prototype.name="MobySyntaxError";var F=function(Y){w.call(this,Y)};F.prototype=y(w.prototype);F.prototype.name="MobyTypeError";var B=function(Y){w.call(this,Y)};B.prototype=y(w.prototype);B.prototype.name="MobyRuntimeError";var P=function(Y){w.call(this,Y)};P.prototype=y(B.prototype);P.prototype.name="MobyTestingError";var I=function(Z,Y){while(Y!=0){var aa=Z;Z=Y;Y=aa%Y}return Math.abs(Z)};var e=function(Z,Y){return Math.abs(Z*Y/I(Z,Y))};var U=function(Y){return(Y!=null&&Y!=undefined&&(Y instanceof plt.types.Rational||Y instanceof plt.types.FloatPoint||Y instanceof plt.types.Complex))};var i=function(Y){return(Y!=null&&Y!=undefined&&Y instanceof plt.types.Symbol)};var o=function(Y){return Y!=null&&Y!=undefined&&Y instanceof plt.types.Char};var M=function(Y){return stx_question_(Y)};var h=function(Y){return typeof(Y)=="string"};var E=function(Y){return(Y==plt.types.Logic.TRUE||Y==plt.types.Logic.FALSE)};var R=function(Y){return Y!=null&&Y!=undefined&&Y instanceof plt.types.Cons};var q=function(Y){return Y!=null&&Y!=undefined&&Y instanceof plt.types.Empty};var T=function(Y){return(U(Y)&&Y.isReal())};var C=function(Y){return U(Y)&&Y.isRational()};var D=function(Y){return U(Y)};var p=function(Y){return typeof(Y)=="function"};var m=function(Y){return(U(Y)&&Y.isInteger())};var k=function(Y){return U(Y)&&Y.isInteger()&&Y.toInteger()>=0};var r=function(Z){for(var Y=0;Y<Z.length;Y++){if(!((Z[Y]>="a"&&Z[Y]<="z")||(Z[Y]>="A"&&Z[Y]<="Z"))){return false}}return true};var J=(function(){var Y=new RegExp("^\\s*$");return function(Z){return(Z.match(Y)?true:false)}}());var u=function(Y){return((Y!=null)&&(Y!=undefined)&&(Y instanceof X))};var c=function(Y){return Y!=null&&Y!=undefined&&(Y instanceof plt.types.Vector)};var g=function(Y,aa){for(var Z=0;Z<Y.length;Z++){aa.apply(Y[Z],[Y[Z],Z])}};var H=function(ac,ab,Y,aa){if(!ac(ab,Y).valueOf()){return false}if(aa.length==0){return true}if(!ac(Y,aa[0]).valueOf()){return false}for(var Z=0;Z<aa.length-1;Z++){if(!ac(aa[Z],aa[Z+1]).valueOf()){return false}}return true};var j=function(Y,ac,aa){var Z;var ab=ac;for(Z=0;Z<aa.length;Z++){if(!(Y(ab,aa[Z])).valueOf()){ab=aa[Z]}}return ab};var b=function(Y){return Y!=null&&Y!=undefined&&((Y instanceof plt.types.Cons)||(Y instanceof plt.types.Empty))};var z=function(ac,Z,Y,ab){var aa=["th","st","nd","rd","th","th","th","th"];return plt.Kernel.format("~a: expects type <~a> as ~a argument, given: ~s",[ac,Z,Y+aa[Math.min(aa.length-1,Y)],ab])};var v=function(Z,ac,ab,aa,Y){if(!ac(Z)){throw new F(z(ab,aa,Y,Z))}};var G=function(Z,aa,Y){if(!b(Z)){throw new F(z(aa,"list",Y,Z))}};var Q=function(Z,ac,ab,aa,Y){if(!b(Z)){throw new F(z(ab,"listof "+aa,Y,Z))}while(!Z.isEmpty()){if(!ac(Z.first())){throw new F(z(ab,"listof "+aa,Y,Z))}Z=Z.rest()}};var x=function(ab,Z,aa,Y){return function(ae,ac,ad){v(ae,ab,Y,Z,1);v(ac,ab,Y,Z,2);g(ad,function(af,ag){v(af,ab,Y,Z,ag+3)});return aa(ae,ac,ad)}};var l=function(Z,Y){return x(U,"number",function(ac,aa,ab){return H(Z,ac,aa,ab)},Y)};var W=function(Z,Y){return x(o,"char",function(ac,aa,ab){return H(Z,ac,aa,ab)},Y)};var n=function(Z,Y){return x(h,"string",function(ac,aa,ab){return H(Z,ac,aa,ab)},Y)};plt.Kernel={_heir:y,pi:plt.types.FloatPoint.makeInstance(Math.PI),e:plt.types.FloatPoint.makeInstance(Math.E),Struct:function(Z,Y){this._constructorName=Z;this._fields=Y},struct_question_:function(Y){return(Y!=null&&Y!=undefined&&Y instanceof plt.Kernel.Struct)},number_question_:function(Y){return U(Y)},equal_question_:function(Y,Z){if(plt.Kernel.number_question_(Y)&&plt.Kernel.number_question_(Z)){if("isEqual" in Y){return plt.types.NumberTower.equal(Y,Z)}else{if("isEqual" in Z){return plt.types.NumberTower.equal(Z,Y)}else{return(Y==Z)}}}else{return Y.isEqual(Z)}},equal_tilde__question_:function(Y,aa,Z){v(Z,U,"equal~?","number",3);if(plt.Kernel.number_question_(Y).valueOf()&&plt.Kernel.number_question_(aa).valueOf()){if("isEqual" in Y){return plt.types.NumberTower.approxEqual(Y,aa,Z)}else{if("isEqual" in aa){return plt.types.NumberTower.approxEqual(aa,Y,Z)}else{return(Y==aa)}}}else{return Y.isEqual(aa)}},eq_question_:function(Y,Z){return(Y==Z)},eqv_question_:function(Y,Z){if(U(Y)&&U(Z)&&Y.level()==Z.level()){return plt.types.NumberTower.equal(Y,Z)}else{if(o(Y)&&o(Z)){return Y.getValue()==Z.getValue()}}return Y===Z},identity:function(Y){return Y},cons:function(Y,Z){G(Z,"cons",2);return plt.types.Cons.makeInstance(Y,Z)},first:function(Y){G(Y,"first",1);return Y.first()},rest:function(Y){G(Y,"rest",1);return Y.rest()},second:function(Y){G(Y,"second",1);return Y.rest().first()},third:function(Y){G(Y,"third",1);return Y.rest().rest().first()},fourth:function(Y){G(Y,"fourth",1);return Y.rest().rest().rest().first()},fifth:function(Y){G(Y,"fifth",1);return Y.rest().rest().rest().rest().first()},random:function(Y){v(Y,m,"random","integer",1);return plt.types.Rational.makeInstance(Math.floor(plt.types.NumberTower.toInteger(Y)*Math.random()),1)},current_dash_seconds:function(){return plt.types.Rational.makeInstance(new Date().getMilliseconds()/1000)},floor:function(Y){v(Y,U,"floor","number",1);return Y.floor()},ceiling:function(Y){v(Y,U,"ceiling","number",1);return Y.ceiling()},sqrt:function(Y){v(Y,U,"sqrt","number",1);return Y.sqrt()},integer_dash_sqrt:function(Z){v(Z,m,"integer-sqrt","integer",1);var Y=Z.sqrt();if(C(Y)){return plt.types.Rational.makeInstance(Y.toInteger())}else{if(T(Y)){return plt.types.Rational.makeInstance(Y.toInteger())}else{return plt.types.Complex.makeInstance(plt.types.Rational.makeInstance(plt.Kernel.real_dash_part(Y).toInteger()),plt.types.Rational.makeInstance(plt.Kernel.imag_dash_part(Y).toInteger()))}}},sqr:function(Y){v(Y,U,"sqr","number",1);return plt.types.NumberTower.sqr(Y)},sin:function(Y){v(Y,U,"sin","number",1);return Y.sin()},cos:function(Y){v(Y,U,"cos","number",1);return Y.cos()},modulo:function(Y,Z){v(Y,U,"modulo","number",1);v(Z,U,"modulo","number",2);return plt.types.NumberTower.modulo(Y,Z)},zero_question_:function(Y){v(Y,U,"zero?","number",1);return plt.types.NumberTower.equal(Y,plt.types.Rational.ZERO)},_equal__tilde_:function(Y,aa,Z){v(Y,U,"=~","number",1);v(aa,U,"=~","number",2);v(Z,U,"=~","number",3);return plt.types.NumberTower.approxEqual(Y,aa,Z)},abs:function(Y){v(Y,U,"abs","number",1);return plt.types.NumberTower.abs(Y)},add1:function(Y){v(Y,U,"add1","number",1);return plt.types.NumberTower.add(Y,plt.types.Rational.ONE)},sub1:function(Y){v(Y,U,"sub1","number",1);return plt.types.NumberTower.subtract(Y,plt.types.Rational.ONE)},_plus_:function(Y){g(Y,function(ab,ac){v(ab,U,"+","number",ac+1)});var Z,aa=plt.types.Rational.ZERO;for(Z=0;Z<Y.length;Z++){aa=plt.types.NumberTower.add(aa,Y[Z])}return aa},_dash_:function(ab,Y){v(ab,U,"-","number",1);g(Y,function(ac,ad){v(ac,U,"-","number",ad+2)});if(Y.length==0){return plt.types.NumberTower.subtract(plt.types.Rational.ZERO,ab)}var Z,aa=ab;for(Z=0;Z<Y.length;Z++){aa=plt.types.NumberTower.subtract(aa,Y[Z])}return aa},_star_:function(Z){g(Z,function(ab,ac){v(ab,U,"*","number",ac+1)});var aa,Y=plt.types.Rational.ONE;for(aa=0;aa<Z.length;aa++){Y=plt.types.NumberTower.multiply(Y,Z[aa])}return Y},_slash_:function(aa,Y){v(aa,U,"/","number",1);g(Y,function(ac,ad){v(ac,U,"/","number",ad+2)});var Z,ab=aa;if(Y.length==0){return plt.types.NumberTower.divide(plt.types.Rational.ONE,ab)}else{for(Z=0;Z<Y.length;Z++){ab=plt.types.NumberTower.divide(ab,Y[Z])}return ab}},_equal_:l(plt.types.NumberTower.equal,"="),_greaterthan__equal_:l(plt.types.NumberTower.greaterThanOrEqual,">="),_lessthan__equal_:l(plt.types.NumberTower.lessThanOrEqual,"<="),_greaterthan_:l(plt.types.NumberTower.greaterThan,">"),_lessthan_:l(plt.types.NumberTower.lessThan,"<"),min:function(Z,Y){v(Z,U,"min","number",1);g(Y,function(aa,ab){v(this,U,"min","number",ab+2)});return j(plt.types.NumberTower.lessThanOrEqual,Z,Y)},max:function(Z,Y){v(Z,U,"max","number",1);g(Y,function(aa,ab){v(this,U,"max","number",ab+2)});return j(plt.types.NumberTower.greaterThanOrEqual,Z,Y)},lcm:function(ab,aa){v(ab,m,"lcm","number",1);g(aa,function(ac,ad){v(this,m,"lcm","number",ad+2)});var Y=Math.abs(ab.toInteger());if(Y==0){return plt.types.Rational.ZERO}for(var Z=0;Z<aa.length;Z++){if(aa[Z].toInteger()==0){return plt.types.Rational.ZERO}Y=e(Y,aa[Z].toInteger())}return plt.types.Rational.makeInstance(Y)},gcd:function(ab,aa){v(ab,m,"gcd","number",1);g(aa,function(ac,ad){v(this,m,"gcd","number",ad+2)});var Y=Math.abs(ab.toInteger());for(var Z=0;Z<aa.length;Z++){Y=I(Y,aa[Z].toInteger())}return plt.types.Rational.makeInstance(Y)},exact_dash__greaterthan_inexact:function(Y){v(Y,U,"exact->inexact","number",1);return plt.types.FloatPoint.makeInstance(Y.toFloat())},inexact_dash__greaterthan_exact:function(Y){v(Y,U,"inexact->exact","number",1);return plt.types.NumberTower.toExact(Y)},exact_question_:function(Y){v(Y,U,"exact?","number",1);return Y.isExact()},inexact_question_:function(Y){v(Y,U,"inexact?","number",1);return !Y.isExact()},rational_question_:function(Y){return(plt.Kernel.number_question_(Y)&&Y.isRational())},number_dash__greaterthan_string:function(Y){v(Y,U,"number->string","number",1);return plt.types.String.makeInstance(plt.Kernel.toWrittenString(Y))},conjugate:function(Y){v(Y,U,"conjugate","number",1);return Y.conjugate()},magnitude:function(Y){v(Y,U,"magnitude","number",1);return Y.magnitude()},log:function(Y){v(Y,U,"log","number",1);return Y.log()},angle:function(Y){v(Y,U,"angle","number",1);return Y.angle()},atan:function(Y,Z){if(Z.length==0){v(Y,U,"atan","number",1);return Y.atan()}else{if(Z.length==1){v(Y,T,"atan","number",1);v(Z[0],T,"atan","number",2);return plt.types.FloatPoint.makeInstance(Math.atan2(plt.types.NumberTower.toFloat(Y),plt.types.NumberTower.toFloat(Z[0])))}else{throw new B(plt.Kernel.format("atan: expects 1 to 2 arguments, given ~a.",[plt.types.Rational.makeInstance(Z.length)]))}}},expt:function(Y,Z){v(Y,U,"expt","number",1);v(Z,U,"expt","number",2);return plt.types.NumberTower.expt(Y,Z)},exp:function(Y){v(Y,U,"exp","number",1);return Y.exp()},acos:function(Y){v(Y,U,"acos","number",1);return Y.acos()},asin:function(Y){v(Y,U,"asin","number",1);return Y.asin()},tan:function(Y){v(Y,U,"tan","number",1);return plt.types.NumberTower.divide(Y.sin(),Y.cos())},complex_question_:function(Y){return D(Y)},cosh:function(Y){v(Y,U,"cosh","number",1);return this._plus_([this.exp(Y),this.exp(Y.minus())]).half()},sinh:function(Y){v(Y,U,"sinh","number",1);return plt.types.NumberTower.subtract(this.exp(Y),this.exp(Y.minus())).half()},denominator:function(Y){v(Y,C,"denominator","rational",1);return Y.denominator()},numerator:function(Y){v(Y,C,"numerator","rational",1);return Y.numerator()},odd_question_:function(Y){v(Y,U,"odd?","number",1);return(Math.abs((Y.toInteger()%2))==1)},even_question_:function(Y){v(Y,U,"even?","number",1);return(Math.abs((Y.toInteger()%2))==0)},positive_question_:function(Y){v(Y,U,"positive?","number",1);return this._greaterthan_(Y,plt.types.Rational.ZERO,[])},negative_question_:function(Y){v(Y,U,"negative?","number",1);return this._lessthan_(Y,plt.types.Rational.ZERO,[])},imag_dash_part:function(Y){v(Y,U,"imag-part","number",1);return Y.imag_dash_part()},real_dash_part:function(Y){v(Y,U,"real-part","number",1);return Y.real_dash_part()},make_dash_polar:function(aa,Z){if(plt.types.NumberTower.equal(Z,plt.types.Rational.ZERO)){return aa}var Y=plt.types.NumberTower.multiply(aa,Z.cos());var ab=plt.types.NumberTower.multiply(aa,Z.sin());return plt.types.Complex.makeInstance(Y,ab)},integer_question_:function(Y){return(m(Y))},make_dash_rectangular:function(Y,Z){return plt.types.Complex.makeInstance(Y,Z)},quotient:function(Y,aa){v(Y,m,"quotient","integer",1);v(aa,m,"quotient","integer",2);var Z=plt.types.NumberTower.divide(Y,aa);if(plt.Kernel.positive_question_(Z)){return plt.types.Rational.makeInstance(Z.floor().toInteger(),1)}else{return plt.types.Rational.makeInstance(Z.ceiling().toInteger(),1)}},remainder:function(Y,Z){v(Y,U,"remainder","number",1);v(Z,U,"remainder","number",2);return plt.types.Rational.makeInstance(Y.toInteger()%Z.toInteger(),1)},real_question_:function(Y){return T(Y)},round:function(Y){v(Y,U,"round","number",1);return Y.round()},sgn:function(Y){v(Y,U,"sgn","number",1);if(this.positive_question_(Y).valueOf()){return plt.types.Rational.ONE}if(this.negative_question_(Y).valueOf()){return plt.types.Rational.NEGATIVE_ONE}else{return plt.types.Rational.ZERO}},boolean_equal__question_:function(Y,Z){v(Y,E,"boolean=?","boolean",1);v(Z,E,"boolean=?","boolean",2);return Y==Z},boolean_question_:function(Y){return E(Y)},false_question_:function(Y){return(Y==plt.types.Logic.FALSE)},not:function(Y){if(!Y||Y===plt.types.Logic.FALSE){return plt.types.Logic.TRUE}return plt.types.Logic.FALSE},symbol_dash__greaterthan_string:function(Y){v(Y,i,"symbol->string","symbol",1);return plt.types.String.makeInstance(Y.val)},symbol_equal__question_:function(Y,Z){v(Y,i,"symbol=?","symbol",1);v(Z,i,"symbol=?","symbol",2);return(Y.val==Z.val)},symbol_question_:function(Y){return i(Y)},append:function(ab,aa){G(ab,"append",1);var Y=ab;var Z;for(Z=0;Z<aa.length;Z++){G(aa[Z],"append",Z+2);Y=Y.append(aa[Z])}return Y},reverse:function(Y){G(Y,"reverse",1);var Z=plt.types.Empty.EMPTY;while(!Y.isEmpty()){Z=plt.types.Cons.makeInstance(Y.first(),Z);Y=Y.rest()}return Z},assq:function(Z,Y){G(Y,"assq",2);while(!Y.isEmpty()&&!plt.Kernel.eq_question_(Z,Y.first().first())){Y=Y.rest()}if(Y.isEmpty()){return plt.types.Logic.FALSE}else{return Y.first()}},caaar:function(Y){G(Y,"caaar",1);return Y.first().first().first()},caadr:function(Y){G(Y,"caadr",1);return Y.first().first().rest()},caar:function(Y){G(Y,"caar",1);return Y.first().first()},cadar:function(Y){G(Y,"cadar",1);return Y.first().rest().first()},cadddr:function(Y){G(Y,"cadddr",1);return Y.rest().rest().rest().first()},caddr:function(Y){G(Y,"caddr",1);return Y.rest().rest().first()},cadr:function(Y){G(Y,"cadr",1);return Y.rest().first()},car:function(Y){G(Y,"car",1);return Y.first()},cdaar:function(Y){G(Y,"cdaar",1);return Y.first().first().rest()},cdadr:function(Y){G(Y,"cdadr",1);return Y.rest().first().rest()},cdar:function(Y){G(Y,"cdar",1);return Y.first().rest()},cddar:function(Y){G(Y,"cddar",1);return Y.first().rest().rest()},cdddr:function(Y){G(Y,"cdddr",1);return Y.rest().rest().rest()},cddr:function(Y){G(Y,"cddr",1);return Y.rest().rest()},cdr:function(Y){G(Y,"cdr",1);return Y.rest()},null_question_:function(Y){return q(Y)},empty_question_:function(Y){return q(Y)},pair_question_:function(Y){return R(Y)},cons_question_:function(Y){return R(Y)},sixth:function(Y){G(Y,"sixth",1);return Y.rest().rest().rest().rest().rest().first()},seventh:function(Y){G(Y,"seventh",1);return Y.rest().rest().rest().rest().rest().rest().first()},eighth:function(Y){G(Y,"eighth",1);return Y.rest().rest().rest().rest().rest().rest().rest().first()},set_dash_car_bang_:function(Y,Z){G(Y,"set-car!",1);Y.f=Z;return undefined},set_dash_cdr_bang_:function(Y,Z){G(Y,"set-cdr!",1);G(Z,"set-cdr!",2);Y.r=Z;return undefined},length:function(Y){G(Y,"length",1);var Z=plt.types.Rational.ZERO;for(;!Y.isEmpty();Y=Y.rest()){Z=plt.Kernel.add1(Z)}return Z},list:function(Y){var Z=plt.types.Empty.EMPTY;for(var aa=Y.length-1;aa>=0;aa--){Z=plt.types.Cons.makeInstance(Y[aa],Z)}return Z},list_star_:function(Y,aa){var Z=aa.pop();if(Z==undefined||!Z instanceof plt.types.Cons){throw new F("list*: "+Z+" not a list")}aa.unshift(Y);return plt.Kernel.append(plt.Kernel.list(aa),[Z])},list_dash_ref:function(Z,Y){G(Z,"list-ref",1);v(Y,k,"list-ref","natural",2);var aa=plt.types.Rational.ZERO;for(;plt.Kernel._lessthan_(aa,Y,[]);aa=plt.Kernel.add1(aa)){if(Z.isEmpty()){throw new B("list-ref: index too small")}else{Z=Z.rest()}}return Z.first()},remove:function(ab,Z){G(Z,"member",2);var aa=Z;var Y=plt.types.Empty.EMPTY;while(!Z.isEmpty()){if(plt.Kernel.equal_question_(ab,Z.first()).valueOf()){return plt.Kernel.append(plt.Kernel.reverse(Y),[Z.rest()])}else{Y=plt.types.Cons.makeInstance(Z.first(),Y);Z=Z.rest()}}return aa},member:function(Z,Y){G(Y,"member",2);while(!Y.isEmpty()){if(plt.Kernel.equal_question_(Z,Y.first()).valueOf()){return plt.types.Logic.TRUE}Y=Y.rest()}return plt.types.Logic.FALSE},memq:function(Z,Y){G(Y,"memq",2);while(!Y.isEmpty()){if(plt.Kernel.eq_question_(Z,Y.first()).valueOf()){return Y}Y=Y.rest()}return plt.types.Logic.FALSE},memv:function(Z,Y){G(Y,"memv",2);while(!Y.isEmpty()){if(plt.Kernel.eqv_question_(Z,Y.first()).valueOf()){return Y}Y=Y.rest()}return plt.types.Logic.FALSE},memf:function(Z,Y){v(Z,p,"memf","function",1);G(Y,"memf",2);while(!Y.isEmpty()){if(Z([Y.first()])){return Y}Y=Y.rest()}return plt.types.Logic.FALSE},compose:function(Y){return function(Z){var ab=Z;for(var aa=Y.length-1;aa>=0;aa--){ab=[Y[aa](ab)]}return ab[0]}},string_dash__greaterthan_number:function(ab){v(ab,h,"string->number","string",1);try{var Z=plt.reader.readSchemeExpressions(ab,"");if(plt.types.NumberTower.equal(plt.Kernel.length(Z),plt.types.Rational.ONE)){var Y=stx_dash_e(Z.first());if(U(Y)){return Y}else{return plt.types.Logic.FALSE}}else{return plt.types.Logic.FALSE}}catch(aa){return plt.types.Logic.FALSE}},string_dash__greaterthan_symbol:function(Y){v(Y,h,"string->symbol","string",1);return plt.types.Symbol.makeInstance(Y)},string_dash__greaterthan_int:function(Y){v(Y,h,"string->int","string",1);return plt.types.Rational.makeInstance(Y.toString().charCodeAt(0),1)},string_dash_append:function(Y){g(Y,function(Z,aa){v(Z,h,"string-append","string",aa+1)});return plt.types.String.makeInstance(Y.join(""))},replicate:function(ab,aa){v(ab,k,"replicate","natural",1);v(aa,h,"replicate","string",2);var Y=[];for(var Z=0;Z<ab.toInteger();Z++){Y.push(aa)}return plt.types.String.makeInstance(Y.join(""))},string_equal__question_:n(function(Y,Z){return Y==Z},"string=?"),string_lessthan__equal__question_:n(function(Y,Z){return Y<=Z},"string<=?"),string_lessthan__question_:n(function(Y,Z){return Y<Z},"string<?"),string_greaterthan__equal__question_:n(function(Y,Z){return Y>=Z},"string>=?"),string_greaterthan__question_:n(function(Y,Z){return Y>Z},"string>?"),string_dash_ci_equal__question_:n(function(Y,Z){return Y.toUpperCase()==Z.toUpperCase()},"string-ci=?"),string_dash_ci_lessthan__equal__question_:n(function(Y,Z){return Y.toUpperCase()<=Z.toUpperCase()},"string-ci<=?"),string_dash_ci_lessthan__question_:n(function(Y,Z){return Y.toUpperCase()<Z.toUpperCase()},"string-ci<?"),string_dash_ci_greaterthan__question_:n(function(Y,Z){return Y.toUpperCase()>Z.toUpperCase()},"string-ci>?"),string_dash_ci_greaterthan__equal__question_:n(function(Y,Z){return Y.toUpperCase()>=Z.toUpperCase()},"string-ci>=?"),string_dash_copy:function(Y){v(Y,h,"string-copy","string",1);return Y.substring(0,Y.length)},string_dash_length:function(Y){v(Y,h,"string-length","string",1);return plt.types.Rational.makeInstance(Y.length,1)},string_dash_ref:function(Z,Y){v(Z,h,"string-ref","string",1);v(Y,k,"string-ref","natural",2);if(Y.toInteger()>=Z.length){throw new B("string-ref: index >= length")}return plt.types.String.makeInstance(Z.charAt(Y.toInteger()))},string_dash_ith:function(Z,Y){v(Z,h,"string-ith","string",1);v(Y,k,"string-ith","natural",2);if(Y.toInteger()>=Z.length){throw new B("string-ith: index >= string length")}return plt.types.String.makeInstance(Z.substring(Y.toInteger(),Y.toInteger()+1))},int_dash__greaterthan_string:function(Y){v(Y,m,"int->string","integer",1);return plt.types.String.makeInstance(String.fromCharCode(Y.toInteger()))},string_question_:function(Y){return h(Y)},substring:function(aa,Z,Y){v(aa,h,"substring","string",1);v(Z,k,"substring","natural",2);v(Y,k,"substring","natural",3);if(Z.toInteger()>Y.toInteger()){throw new B("substring: begin > end")}if(Y.toInteger()>aa.length){throw new B("substring: end > length")}return String.makeInstance(aa.substring(Z.toInteger(),Y.toInteger()))},char_question_:function(Y){return o(Y)},char_dash__greaterthan_integer:function(Y){v(Y,o,"char->integer","char",1);var Z=new String(Y.val);return plt.types.Rational.makeInstance(Z.charCodeAt(0),1)},integer_dash__greaterthan_char:function(Z){v(Z,m,"integer->char","integer",1);var Y=String.fromCharCode(Z.toInteger());return plt.types.Char.makeInstance(Y)},char_equal__question_:W(function(Y,Z){return Y.val==Z.val},"char=?"),char_lessthan__question_:W(function(Y,Z){return Y.val<Z.val},"char<?"),char_lessthan__equal__question_:W(function(Y,Z){return Y.val<=Z.val},"char<=?"),char_greaterthan__question_:W(function(Y,Z){return Y.val>Z.val},"char>?"),char_greaterthan__equal__question_:W(function(Y,Z){return Y.val>=Z.val},"char>=?"),char_dash_ci_equal__question_:W(function(Y,Z){return Y.val.toUpperCase()==Z.val.toUpperCase()},"char-ci=?"),char_dash_ci_lessthan__question_:W(function(Y,Z){return Y.val.toUpperCase()<Z.val.toUpperCase()},"char-ci<?"),char_dash_ci_lessthan__equal__question_:W(function(Y,Z){return Y.val.toUpperCase()<=Z.val.toUpperCase()},"char-ci<=?"),char_dash_ci_greaterthan__question_:W(function(Y,Z){return Y.val.toUpperCase()>Z.val.toUpperCase()},"char-ci>?"),char_dash_ci_greaterthan__equal__question_:W(function(Y,Z){return Y.val.toUpperCase()>=Z.val.toUpperCase()},"char-ci>=?"),char_dash_numeric_question_:function(Y){v(Y,o,"char-numeric?","char",1);var Z=Y.val;return(Z>="0"&&Z<="9")},char_dash_alphabetic_question_:function(Y){v(Y,o,"char-alphabetic?","char",1);var Z=Y.val;return r(Z)},char_dash_whitespace_question_:function(Y){v(Y,o,"char-whitespace?","char",1);var Z=Y.val;return J(Z)},char_dash_upper_dash_case_question_:function(Y){v(Y,o,"char-upper-case?","char",1);return r(Y.val)&&Y.val.toUpperCase()==Y.val},char_dash_lower_dash_case_question_:function(Y){v(Y,o,"char-lower-case?","char",1);return r(Y.val)&&Y.val.toLowerCase()==Y.val},char_dash_upcase:function(Y){v(Y,o,"char-upcase","char",1);return plt.types.Char.makeInstance(Y.val.toUpperCase())},char_dash_downcase:function(Y){v(Y,o,"char-downcase","char",1);return plt.types.Char.makeInstance(Y.val.toLowerCase())},list_dash__greaterthan_string:function(Y){Q(Y,o,"list->string","char",1);var Z="";while(!Y.isEmpty()){Z+=Y.first().val;Y=Y.rest()}return plt.types.String.makeInstance(Z)},implode:function(Y){Q(Y,h,"implode","string",1);var Z=[];while(!Y.isEmpty()){Z.push(Y.first().toString());Y=Y.rest()}return plt.types.String.makeInstance(Z.join(""))},string_dash_numeric_question_:function(Z){v(Z,h,"string-numeric?","string",1);for(var Y=0;Y<Z.length;Y++){if(Z[Y]<"0"||Z[Y]>"9"){return plt.types.Logic.FALSE}}return plt.types.Logic.TRUE},string_dash_alphabetic_question_:function(Y){v(Y,h,"string-alphabetic?","string",1);return r(Y)?plt.types.Logic.TRUE:plt.types.Logic.FALSE},string_dash_whitespace_question_:function(Y){v(Y,h,"string-whitespace?","string",1);return J(Y)?plt.types.Logic.TRUE:plt.types.Logic.FALSE},string_dash_upper_dash_case_question_:function(Y){v(Y,h,"string-upper-case?","string",1);return r(Y)&&Y.toUpperCase()==Y},string_dash_lower_dash_case_question_:function(Y){v(Y,h,"string-lower-case?","string",1);return r(Y)&&Y.toLowerCase()==Y},string:function(aa){g(aa,function(ab,ac){v(this,o,"string","char",ac+1)});var Y=[];for(var Z=0;Z<aa.length;Z++){Y.push(aa[Z].val)}return String.makeInstance(Y.join(""))},make_dash_string:function(ac,aa){v(ac,k,"make-string","natural",1);v(aa,o,"make-string","char",2);var Y="";var ab=aa.val;var Z=plt.types.Rational.ZERO;for(;plt.Kernel._lessthan_(Z,ac,[]);Z=plt.Kernel.add1(Z)){Y+=ab}return plt.types.String.makeInstance(Y)},string_dash__greaterthan_list:function(ab){v(ab,h,"string->list","string",1);var aa=ab;var Y=plt.types.Empty.EMPTY;for(var Z=aa.length-1;Z>=0;Z--){Y=plt.types.Cons.makeInstance(plt.types.Char.makeInstance(aa.charAt(Z)),Y)}return Y},explode:function(ab){v(ab,h,"explode","string",1);var aa=ab;var Y=plt.types.Empty.EMPTY;for(var Z=aa.length-1;Z>=0;Z--){Y=plt.types.Cons.makeInstance(plt.types.String.makeInstance(aa.charAt(Z)),Y)}return Y}};plt.Kernel._dumpKernelSymbols=function(){var Y=plt.types.Empty.EMPTY;for(var Z in plt.Kernel){Y=plt.types.Cons.makeInstance(plt.types.Symbol.makeInstance(Z),Y)}return Y};var s=function(Y){this.hash=Y};plt.Kernel.openInputStx=function(Y){throw new B("open-input-stx currently unsupported")},plt.Kernel._kernelMakeImmutableHashEq=function(ac){var Z={};while(!ac.isEmpty()){var aa=ac.first();var ab=aa.first();var Y=aa.rest();Z[ab]=Y;ac=ac.rest()}return new s(Z)};plt.Kernel._kernelHashSet=function(ac,Z,ad){var aa={};var ab=ac.hash;for(var Y in ab){aa[Y]=ab[Y]}aa[Z]=ad;return new s(aa)};plt.Kernel._kernelHashRef=function(Z,Y,aa){if(Y in Z.hash){return Z.hash[Y]}else{if(p(aa)){return aa([])}return aa}};plt.Kernel._kernelHashRemove=function(ac,Z){var aa={};var ab=ac.hash;for(var Y in ab){if(Y!=Z){aa[Y]=ab[Y]}}return new s(aa)};plt.Kernel._kernelHashMap=function(Z,ab){var Y=plt.types.Empty.EMPTY;var aa;for(aa in Z.hash){var ac=Z.hash[aa];Y=plt.Kernel.cons(ab([aa,ac]),Y)}return Y};plt.Kernel.apply=function(ad,ac,Y){var ab;var aa=[];v(ad,p,"apply","function",1);if(Y.length==0){ab=ac;G(ab,"apply",2);while(!ab.isEmpty()){var Z=ab.first();aa.push(Z);ab=ab.rest()}}else{ab=Y.pop();G(ab,"apply",3);while(!ab.isEmpty()){var Z=ab.first();aa.push(Z);ab=ab.rest()}while(Y.length>0){aa.unshift(Y.pop())}aa.unshift(ac)}return ad(aa)};plt.Kernel.map=function(ab,ac){v(ab,p,"map","function",1);g(ac,function(ad,ae){G(ad,"map",ae+2)});var aa=plt.types.Empty.EMPTY;while(!ac[0].isEmpty()){var Y=[];for(var Z=0;Z<ac.length;Z++){Y.push(ac[Z].first());ac[Z]=ac[Z].rest()}aa=plt.Kernel.cons(ab(Y),aa)}return plt.Kernel.reverse(aa)};plt.Kernel.for_dash_each=function(aa,ab){v(aa,p,"for-each","function",1);g(ab,function(ac,ad){G(ac,"for-each",ad+2)});while(!ab[0].isEmpty()){var Y=[];for(var Z=0;Z<ab.length;Z++){Y.push(ab[Z].first());ab[Z]=ab[Z].rest()}aa(Y)}return undefined};plt.Kernel.andmap=function(aa,ab){v(aa,p,"andmap","function",1);g(ab,function(ac,ad){G(ac,"andmap",ad+2)});while(!ab[0].isEmpty()){var Y=[];for(var Z=0;Z<ab.length;Z++){Y.push(ab[Z].first());ab[Z]=ab[Z].rest()}if(!aa(Y)){return plt.types.Logic.FALSE}}return plt.types.Logic.TRUE};plt.Kernel.ormap=function(aa,ab){v(aa,p,"ormap","function",1);g(ab,function(ac,ad){G(ac,"ormap",ad+2)});while(!ab[0].isEmpty()){var Y=[];for(var Z=0;Z<ab.length;Z++){Y.push(ab[Z].first());ab[Z]=ab[Z].rest()}if(aa(Y)){return plt.types.Logic.TRUE}}return plt.types.Logic.FALSE};plt.Kernel.filter=function(Z,aa){v(Z,p,"filter","function",1);v(aa,b,"filter","list",2);var Y=plt.types.Empty.EMPTY;while(!aa.isEmpty()){if(Z([aa.first()])){Y=plt.types.Cons.makeInstance(aa.first(),Y)}aa=aa.rest()}return plt.Kernel.reverse(Y)};plt.Kernel.foldl=function(ac,ab,ad){v(ac,p,"foldl","function",1);g(ad,function(ae,af){v(ae,b,"foldl","list",af+3)});var Y=ab;while(!ad[0].isEmpty()){var Z=[];for(var aa=0;aa<ad.length;aa++){Z.push(ad[aa].first());ad[aa]=ad[aa].rest()}Z.push(Y);Y=ac(Z)}return Y};plt.Kernel.foldr=function(ac,ab,ad){v(ac,p,"foldr","function",1);g(ad,function(ae,af){v(ae,b,"foldr","list",af+3)});var Y=ab;for(var aa=0;aa<ad.length;aa++){ad[aa]=plt.Kernel.reverse(ad[aa])}while(!ad[0].isEmpty()){var Z=[];for(var aa=0;aa<ad.length;aa++){Z.push(ad[aa].first());ad[aa]=ad[aa].rest()}Z.push(Y);Y=ac(Z)}return Y};plt.Kernel.argmin=function(aa,ac){v(aa,p,"argmin","function",1);v(ac,R,"argmin","nonempty list",2);var Z=ac.first();var Y=aa([ac.first()]).toFloat();ac=ac.rest();while(!ac.isEmpty()){var ab=aa([ac.first()]).toFloat();if(ab<Y){Z=ac.first();Y=ab}ac=ac.rest()}return Z};plt.Kernel.argmax=function(aa,ac){v(aa,p,"argmax","function",1);v(ac,R,"argmax","nonempty list",2);var Z=ac.first();var Y=aa([ac.first()]).toFloat();ac=ac.rest();while(!ac.isEmpty()){var ab=aa([ac.first()]).toFloat();if(ab>Y){Z=ac.first();Y=ab}ac=ac.rest()}return Z};plt.Kernel.sort=function(Z,aa){v(Z,b,"sort","list",1);v(aa,p,"sort","function",2);var Y=[];while(!Z.isEmpty()){Y.push(Z.first());Z=Z.rest()}Y.sort(function(ab,ac){return aa([ab,ac])?-1:1});return plt.Kernel.list(Y)};plt.Kernel.quicksort=plt.Kernel.sort;plt.Kernel.build_dash_list=function(ab,aa){v(ab,k,"build-list","natural",1);v(aa,p,"build-list","function",2);var Y=plt.types.Empty.EMPTY;for(var Z=0;Z<ab.toInteger();Z++){Y=plt.Kernel.cons(aa([plt.types.Rational.makeInstance(Z,1)]),Y)}return plt.Kernel.reverse(Y)};plt.Kernel.build_dash_string=function(ac,ab){v(ac,k,"build-string","natural",1);v(ab,p,"build-string","function",2);var aa=[];for(var Y=0;Y<ac.toInteger();Y++){var Z=ab([plt.types.Rational.makeInstance(Y,1)]);aa.push(Z.val)}return plt.types.String.makeInstance(aa.join(""))};plt.Kernel.format=function(aa,ab){v(aa,h,"format","string",1);var ad=new RegExp("~[sSaAn%~]","g");var Z=ab;function ac(ae){if(ae=="~~"){return"~"}else{if(ae=="~n"||ae=="~%"){return"\n"}else{if(ae=="~s"||ae=="~S"){if(Z.length==0){throw new B("format: fewer arguments passed than expected")}return plt.Kernel.toWrittenString(Z.shift())}else{if(ae=="~a"||ae=="~A"){if(Z.length==0){throw new B("format: fewer arguments passed than expected")}return plt.Kernel.toDisplayedString(Z.shift())}else{throw new B("Unimplemented format "+ae)}}}}}var Y=plt.types.String.makeInstance(aa.replace(ad,ac));if(Z.length>0){throw new B("format: More arguments passed than expected")}return Y};plt.Kernel.string=function(Y){var aa=[];for(var Z=0;Z<Y.length;Z++){aa.push(Y[Z].getValue())}return plt.types.String.makeInstance(aa.join(""))};plt.Kernel.procedure_question_=function(Y){return p(Y)};plt.Kernel.xml_dash__greaterthan_s_dash_exp=function(aa){v(aa,h,"xml->s-exp","string",1);if(aa.length==0){return plt.types.String.makeInstance("")}var ab;try{ab=new ActiveXObject("Microsoft.XMLDOM");ab.async="false";ab.loadXML(aa)}catch(ac){var ae=new DOMParser();ab=ae.parseFromString(aa,"text/xml")}var Z=function(ag){var af=plt.types.Empty.EMPTY;for(var ah=0;ah<ag.length;ah++){var ai=plt.types.Cons.makeInstance(plt.types.Symbol.makeInstance(ag.item(ah).nodeName),plt.types.Cons.makeInstance(ag.item(ah).nodeValue,plt.types.Empty.EMPTY));af=plt.types.Cons.makeInstance(ai,af)}return plt.types.Cons.makeInstance(plt.types.Symbol.makeInstance("@"),plt.Kernel.reverse(af))};var ad=function(ah){if(ah.nodeType==Node.ELEMENT_NODE){var af=plt.types.Empty.EMPTY;var ai=ah.firstChild;while(ai!=null){var ag=ad(ai);if(h(ag)&&!af.isEmpty()&&h(af.first())){af=plt.types.Cons.makeInstance(af.first()+ag,af.rest())}else{af=plt.types.Cons.makeInstance(ag,af)}ai=ai.nextSibling}af=plt.Kernel.reverse(af);af=plt.types.Cons.makeInstance(Z(ah.attributes),af);af=plt.types.Cons.makeInstance(plt.types.Symbol.makeInstance(ah.nodeName),af);return af}else{if(ah.nodeType==Node.TEXT_NODE){return ah.textContent}else{if(ah.nodeType==Node.CDATA_SECTION_NODE){return ah.data}else{return plt.types.Empty.EMPTY}}}};var Y=ad(ab.firstChild);return Y};plt.Kernel.split_dash_whitespace=function(Y){Y=Y.replace(/^\s+/,"");Y=Y.replace(/\s+$/,"");return plt.Kernel.list(Y.split(/\s+/))};var S=function(Y){plt.Kernel.Struct.call(this,"box",[Y])};S.prototype=y(plt.Kernel.Struct.prototype);plt.Kernel.box=function(Y){return new S(Y)};plt.Kernel.unbox=function(Y){v(Y,plt.Kernel.box_question_,"unbox","box",1);return Y._fields[0]};plt.Kernel.box_question_=function(Y){return Y!=null&&Y!=undefined&&Y instanceof S};plt.Kernel.set_dash_box_bang_=function(Z,Y){v(Z,plt.Kernel.box_question_,"set-box!","box",1);Z._fields[0]=Y;return undefined};var t=function(Y,Z){plt.Kernel.Struct.call(this,"make-posn",[Y,Z])};t.prototype=y(plt.Kernel.Struct.prototype);var A=function(Z,Y){return new t(Z,Y)};var O=function(Y){v(Y,K,"posn-x","posn",1);return Y._fields[0]};var N=function(Y){v(Y,K,"posn-y","posn",1);return Y._fields[1]};var K=function(Y){return Y!=null&&Y!=undefined&&Y instanceof t};plt.Kernel.make_dash_posn=A;plt.Kernel.posn_question_=K;plt.Kernel.posn_dash_x=O;plt.Kernel.posn_dash_y=N;plt.Kernel.error=function(Y,Z){v(Y,i,"error","symbol",1);v(Z,h,"error","string",2);throw new B(plt.Kernel.format("~a: ~a",[Y,Z]).toString())};plt.Kernel.syntax_dash_error=function(Z,Y){v(Z,h,"syntax-error","string",1);v(Y,M,"syntax-error","stx",2);throw new L(Z,Y)};var X=function(Z,Y){this.pinholeX=Z;this.pinholeY=Y};plt.Kernel.BaseImage=X;X.prototype.updatePinhole=function(Y,aa){var Z={};for(attr in this){Z[attr]=this[attr]}Z.__proto__=this.__proto__;Z.pinholeX=Y;Z.pinholeY=aa;return Z};X.prototype.render=function(Z,Y,aa){throw new B("Unimplemented method render")};plt.Kernel._makeCanvas=function(aa,Y){var Z=document.createElement("canvas");Z.width=aa;Z.height=Y;Z.style.width=Z.width+"px";Z.style.height=Z.height+"px";if(typeof window.G_vmlCanvasManager!="undefined"){Z=window.G_vmlCanvasManager.initElement(Z)}return Z};X.prototype.toDomNode=function(){var ac=this;var ab=plt.world.Kernel.imageWidth(ac).toInteger();var Y=plt.world.Kernel.imageHeight(ac).toInteger();var aa=plt.Kernel._makeCanvas(ab,Y);var ad=aa.style.display;aa.style.setProperty("display","none","");document.body.appendChild(aa);var Z=aa.getContext("2d");ac.render(Z,0,0);document.body.removeChild(aa);aa.style.removeProperty("display");return aa};X.prototype.toWrittenString=function(){return"<image>"};X.prototype.toDisplayedString=function(){return"<image>"};plt.Kernel.image_question_=function(Y){return u(Y)};plt.Kernel.image_equal__question_=function(Z,Y){v(Z,u,"image=?","image",1);v(Y,u,"image=?","image",2);return Z==Y?plt.types.Logic.TRUE:plt.types.Logic.FALSE};plt.Kernel.toWrittenString=function(Y){if(Y==undefined||Y==null){return"<undefined>"}if(typeof(Y)=="string"){return Y.toWrittenString()}if(typeof(Y)!="object"&&typeof(Y)!="function"){return Y.toString()}if("toWrittenString" in Y){return Y.toWrittenString()}if("toDisplayedString" in Y){return Y.toDisplayedString()}else{return Y.toString()}};plt.Kernel.toDisplayedString=function(Y){if(Y==undefined||Y==null){return"<undefined>"}if(typeof(Y)=="string"){return Y.toDisplayedString()}if(typeof(Y)!="object"&&typeof(Y)!="function"){return Y.toString()}if("toWrittenString" in Y){return Y.toWrittenString()}if("toDisplayedString" in Y){return Y.toDisplayedString()}else{return Y.toString()}};plt.Kernel.toDomNode=function(Y){if(Y==undefined||Y==null){var Z=document.createTextNode("<undefined>");return Z}if(typeof(Y)=="string"){var Z=document.createTextNode(Y.toWrittenString());return Z}if(typeof(Y)!="object"&&typeof(Y)!="function"){var Z=document.createTextNode(Y.toString());return Z}if(Y.nodeType){return Y}if("toDomNode" in Y){return Y.toDomNode()}if("toWrittenString" in Y){var Z=document.createTextNode(Y.toWrittenString());return Z}if("toDisplayedString" in Y){var Z=document.createTextNode(Y.toDisplayedString());return Z}else{var Z=document.createTextNode(Y.toString());return Z}};plt.Kernel.Struct.prototype.toWrittenString=function(){var Y=[];Y.push("(");Y.push(this._constructorName);for(var Z=0;Z<this._fields.length;Z++){Y.push(" ");Y.push(plt.Kernel.toWrittenString(this._fields[Z]))}Y.push(")");return plt.types.String.makeInstance(Y.join(""))};plt.Kernel.Struct.prototype.toDisplayedString=plt.Kernel.Struct.prototype.toWrittenString;var d=function(Y,Z){Y.appendChild(Z);if(Z.afterAttach){Z.afterAttach()}};plt.Kernel.Struct.prototype.toDomNode=function(){var Z=document.createElement("div");Z.appendChild(document.createTextNode("("));Z.appendChild(document.createTextNode(this._constructorName));for(var Y=0;Y<this._fields.length;Y++){Z.appendChild(document.createTextNode(" "));d(Z,plt.Kernel.toDomNode(this._fields[Y]))}Z.appendChild(document.createTextNode(")"));return Z};plt.Kernel.Struct.prototype.isEqual=function(Y){if(typeof(Y)!="object"){return false}if(!Y._constructorName){return false}if(Y._constructorName!=this._constructorName){return false}if(!"_fields" in Y){return false}if(this._fields.length!=Y._fields.length){return false}for(var Z=0;Z<this._fields.length;Z++){if(!plt.Kernel.equal_question_(this._fields[Z],Y._fields[Z])){return false}}return true};plt.Kernel.reportError=function(Z){var Y;if(typeof(console)!="undefined"&&typeof(console.log)!="undefined"){Y=(function(aa){console.log(aa)})}else{Y=(function(aa){alert(aa)})}if(typeof Z=="string"){Y(Z)}else{if(Z.msg){Y(Z.msg)}else{Y(Z.toString())}}if(plt.Kernel.lastLoc){Y("Error was raised around "+plt.Kernel.lastLoc)}};plt.Kernel._void_=function(Y){return undefined};plt.Kernel.build_dash_vector=function(ab,Z){v(ab,k,"build-vector","natural",1);v(Z,p,"build-vector","function",2);var aa=[];for(var Y=0;Y<ab.toInteger();Y++){aa[Y]=Z([plt.types.Rational.makeInstance(Y,1)])}return plt.types.Vector.makeInstance(ab.toInteger(),aa)};plt.Kernel.make_dash_vector=function(Y){v(Y,k,"make-vector","natural",1);return plt.types.Vector.makeInstance(Y.toInteger())};plt.Kernel.vector=function(Y){return plt.types.Vector.makeInstance(Y.length,Y)};plt.Kernel.vector_dash_length=function(Y){v(Y,c,"vector-length","vector",1);return plt.types.Rational.makeInstance(Y.length())};plt.Kernel.vector_dash_ref=function(Z,Y){v(Z,c,"vector-ref","vector",1);v(Y,function(aa){return k(aa)&&aa.toInteger()<Z.length()},"vector-ref","natural < vector length",2);return Z.ref(Y.toInteger())};plt.Kernel.vector_dash_set_bang_=function(aa,Z,Y){v(aa,c,"vector-set!","vector",1);v(Z,function(ab){return k(ab)&&ab.toInteger()<aa.length()},"vector-set!","natural < vector length",2);return aa.set(Z.toInteger(),Y)};plt.Kernel.vector_question_=function(Y){return c(Y)?plt.types.Logic.TRUE:plt.types.Logic.FALSE};plt.Kernel.check_dash_expect=function(aa,Y){var ab=aa([]);var Z=Y([]);if(!plt.Kernel.equal_question_(ab,Z)){throw new P(plt.Kernel.format("~s doesn't match the expected value ~s",[ab,Z]))}};plt.Kernel.check_dash_within=function(ac,Z,ab){var ad=ac([]);var aa=Z([]);var Y=ab([]);if(!plt.Kernel._equal__tilde_(ad,aa,Y)){throw new P(plt.Kernel.format("~s doesn't match the expected value ~s within ~s",[ad,aa,Y]))}};plt.Kernel.check_dash_error=function(Y,aa){var ac=aa([]);var ab;try{ab=Y([])}catch(Z){if(!plt.Kernel.equal_question_(Z.msg,ac)){throw new P(plt.Kernel.format("check-error encountered the error ~s instead of the expected error ~s.",[Z.msg,ac]))}else{return}}throw new P(plt.Kernel.format("check-error expected the error ~s, but instead received the value ~s.",[ac,ab]))};plt.Kernel.lastLoc=undefined;plt.Kernel.setLastLoc=function(Y){plt.Kernel.lastLoc=Y;return true};plt.Kernel.printf=function(Y,Z){var aa=plt.Kernel.format(Y,Z);plt.Kernel.printHook(aa);return undefined};plt.Kernel.printHook=function(Y){};plt.Kernel.isSymbol=i;plt.Kernel.isChar=o;plt.Kernel.isString=h;plt.Kernel.isBoolean=E;plt.Kernel.isPair=R;plt.Kernel.isEmpty=q;plt.Kernel.isReal=T;plt.Kernel.isRational=C;plt.Kernel.isComplex=D;plt.Kernel.isInteger=m;plt.Kernel.isNatural=k;plt.Kernel.isNumber=U;plt.Kernel.isAlphabeticString=r;plt.Kernel.isWhitespaceString=J;plt.Kernel.isImage=u;plt.Kernel.isList=b;plt.Kernel.isVector=c;plt.Kernel.isFunction=p;plt.Kernel.arrayEach=g;plt.Kernel.check=v;plt.Kernel.checkList=G;plt.Kernel.checkListof=Q;plt.Kernel.MobyError=w;plt.Kernel.MobyParserError=V;plt.Kernel.MobySyntaxError=L;plt.Kernel.MobyTypeError=F;plt.Kernel.MobyRuntimeError=B})();var plt=plt||{};plt.reader={};(function(){var d=function(g){return g.replace(/\\./g,function(i,j,h){switch(i){case"\\b":return"\b";case"\\f":return"\f";case"\\n":return"\n";case"\\r":return"\r";case"\\t":return"\t";case"\\v":return"\v";default:return i.substring(1)}})};var b=function(h){var g;var j=0;for(g=0;g<h.length;g++){if(h[g]=="\n"){j++}}return j};var c=[["whitespace",/^(\s+)/],["#;",/^([#][;])/],["comment",new RegExp("^([#][|](?:(?:\\|[^\\#])|[^\\|])*[|][#])")],["comment",/(^;[^\n]*)/],["(",/^(\(|\[|\{)/],[")",/^(\)|\]|\})/],["'",/^(\')/],["`",/^(`)/],[",@",/^(,@)/],[",",/^(,)/],["char",/^\#\\(newline|backspace)/],["char",/^\#\\(.)/],["complex",/^((?:\#[ei])?[+\-]?(?:\d+\/\d+|\d+\.\d+|\d+\.|\.\d+|\d+)?[+\-](?:\d+\/\d+|\d+\.\d+|\d+\.|\.\d+|\d+)i)/],["number",/^((?:\#[ei])?[+-]inf.0)/],["number",/^((?:\#[ei])?[+-]nan.0)/],["number",/^((?:\#[ei])?[+\-]?(?:\d+\/\d+|\d+\.\d+|\d+\.|\.\d+|\d+))/],["string",new RegExp('^"((?:([^\\\\"]|(\\\\.)))*)"')],["symbol",/^([a-zA-Z\:\+\=\~\_\?\!\@\#\$\%\^\&\*\-\/\.\>\<][\w\:\+\=\~\_\?\!\@\#\$\%\^\&\*\-\/\.\>\<]*)/]];var f=function(p,g){var h=0;var q=1;var n=[];if(!g){g=""}while(true){var l=false;for(var j=0;j<c.length;j++){var k=c[j][0];var m=c[j][1];var o=p.match(m);if(o!=null){if(k=="string"){o[1]=d(o[1])}if(k!="whitespace"&&k!="comment"){n.push([k,o[1],new Loc(h,q,o[0].length,g)])}h=h+o[0].length;q=q+b(o[0]);p=p.substring(o[0].length);l=true;break}}if(!l){break}}return[n,p]};var e=function(u,y){var x=make_dash_stx_colon_list;var A=make_dash_stx_colon_atom;var h=f(u,y);var v=h[0];var z=undefined;if(h[1].length>0){throw new plt.Kernel.MobyParserError("Error while tokenizing: the rest of the stream is: "+h[1],new Loc(u.length-h[1].length,b(u.substring(0,u.length-h[1].length)),h[1].length,y))}var q=plt.types.Symbol.makeInstance("quote");var g=plt.types.Symbol.makeInstance("quasiquote");var w=plt.types.Symbol.makeInstance("unquote");var i=plt.types.Symbol.makeInstance("unquote-splicing");var n=plt.types.Empty.EMPTY;var k=function(s){return(v.length>0&&v[0][0]==s)};var o=function(B){if(v.length==0){if(z){throw new plt.Kernel.MobyParserError("token stream exhausted while trying to eat "+B,z[2])}else{throw new plt.Kernel.MobyParserError("token stream exhausted while trying to eat "+B,new Loc(0,0,u.length,y))}}var s=v.shift();z=s;if(s[0]==B){return s}else{throw new plt.Kernel.MobyParserError("Unexpected token "+s,s[2])}};var m;var r;var j;j=function(B,D){var s=o(B);var C=m();return x(plt.Kernel.cons(A(D,s[2]),plt.Kernel.cons(C,n)),new Loc(s[2].offset,s[2].line,(C.loc.offset-s[2].offset+C.loc.span),""))};var l=function(s){switch(s){case"(":return")";case"[":return"]";case"{":return"}";default:throw new Error()}};var t=function(D,C){var B=D.match(/([+\-]?\d+)\/(\d+)/);if(D=="+inf.0"){return plt.types.FloatPoint.makeInstance(Number.POSITIVE_INFINITY)}else{if(D=="-inf.0"){return plt.types.FloatPoint.makeInstance(Number.NEGATIVE_INFINITY)}else{if(D=="+nan.0"||D=="-nan.0"){return plt.types.FloatPoint.makeInstance(Number.NaN)}else{if(D.match(/\./)){if(C){var s=D.match("^(.*)[.](.*)$");return plt.types.NumberTower.add(plt.types.Rational.makeInstance(parseInt(s[1]||"0")),plt.types.Rational.makeInstance(parseInt(s[2]),Math.pow(10,s[2].length)))}else{return plt.types.FloatPoint.makeInstance(parseFloat(D))}}else{if(B){if(C){return plt.types.Rational.makeInstance(parseInt(B[1]),parseInt(B[2]))}else{return plt.types.FloatPoint.makeInstance(parseInt(B[1])/parseInt(B[2]))}}else{if(C){return plt.types.Rational.makeInstance(parseInt(D),1)}else{return plt.types.FloatPoint.makeInstance(parseInt(D))}}}}}}};m=function(){if(v.length==0){if(z){throw new plt.Kernel.MobyParserError("Parse broke with empty token stream",z[2])}else{throw new plt.Kernel.MobyParserError("Parse broke with empty token stream",new Loc(0,0,u.length,y))}}switch(v[0][0]){case"(":var L=o("(");var H=L[1];var F=l(L[1]);var N=r();if(v.length==0){throw new plt.Kernel.MobyParserError("Expected a "+F+" to close "+H,L[2])}else{if(v[0][1]!=F){throw new plt.Kernel.MobyParserError("Expected a "+F+" to close "+H,v[0][2])}}var J=o(")");return make_dash_stx_colon_list(N,new Loc(L[2].offset,L[2].line,J[2].offset-L[2].offset+1,""));case"#;":var E=o("#;");var D=m();return m();case"'":return j("'",q);case"`":return j("`",g);case",":return j(",",w);case",@":return j(",@",i);case"number":var M=o("number");var K=M[1].match(/^(\#[ie])(.+)$/);if(K){if(K[1]=="#i"){return A(t(K[2],false),M[2])}else{return A(t(K[2],true),M[2])}}else{return A(t(M[1],true),M[2])}case"complex":var M=o("complex");var C=M[1].match(/^((?:\#[ei])?)([+\-]?(?:\d+\/\d+|\d+\.\d+|\d+\.|\.\d+|\d+)?)([+\-](?:\d+\/\d+|\d+\.\d+|\d+\.|\.\d+|\d+))i/);var B=(C[1]=="#i"?false:true);var I=(C[2]!=""?t(C[2],B):plt.types.Rational.ZERO);var G=t(C[3],B);var s=A(plt.types.Complex.makeInstance(I,G));return s;case"string":var M=o("string");return A(plt.types.String.makeInstance(M[1]),M[2]);case"char":var M=o("char");if(M[1]=="newline"){return A(plt.types.Char.makeInstance("\n"),M[2])}else{if(M[1]=="backspace"){return A(plt.types.Char.makeInstance(String.fromCharCode(8)),M[2])}else{return A(plt.types.Char.makeInstance(M[1]),M[2])}}case"symbol":var M=o("symbol");if(M[1]=="."){throw new plt.Kernel.MobyParserError("Dotted pairs are not currently accepted by Moby",M[2])}return A(plt.types.Symbol.makeInstance(M[1]),M[2]);default:throw new plt.Kernel.MobyParserError("Parse broke with token stream "+v,v[0][2])}};r=function(){var s=plt.types.Empty.EMPTY;while(true){if(v.length==0||k(")")){break}else{if(k("#;")){o("#;");var B=m()}else{var C=m();s=plt.types.Cons.makeInstance(C,s)}}}return plt.Kernel.reverse(s)};var p=r();if(v.length>0){throw new plt.Kernel.MobyParserError("More elements in the program's token stream than expected: the next unconsumed token is: "+v[0][1],v[0][2])}return p};plt.reader.tokenize=f;plt.reader.readSchemeExpressions=e}());var stx_colon_atom=function(b,c){plt.Kernel.Struct.call(this,"make-stx:atom",[b,c]);this.datum=b;this.loc=c};stx_colon_atom.prototype=new plt.Kernel.Struct();var make_dash_stx_colon_atom=function(d,b){var c=new stx_colon_atom(d,b);return c};var stx_colon_atom_dash_datum=function(b){if(stx_colon_atom_question_(b)){return b.datum}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("stx_colon_atom_dash_datum: not a stx:atom: ~s",[b]))}};var stx_colon_atom_dash_loc=function(b){if(stx_colon_atom_question_(b)){return b.loc}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("stx_colon_atom_dash_loc: not a stx:atom: ~s",[b]))}};var set_dash_stx_colon_atom_dash_datum_bang_=function(c,b){if(stx_colon_atom_question_(c)){c.datum=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_stx_colon_atom_dash_datum_bang_: not a stx:atom: ~s",[c]))}};var set_dash_stx_colon_atom_dash_loc_bang_=function(c,b){if(stx_colon_atom_question_(c)){c.loc=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_stx_colon_atom_dash_loc_bang_: not a stx:atom: ~s",[c]))}};var stx_colon_atom_question_=function(b){return(b!=null&&b!=undefined&&b instanceof stx_colon_atom)};var stx_colon_list=function(b,c){plt.Kernel.Struct.call(this,"make-stx:list",[b,c]);this.elts=b;this.loc=c};stx_colon_list.prototype=new plt.Kernel.Struct();var make_dash_stx_colon_list=function(c,b){return new stx_colon_list(c,b)};var stx_colon_list_dash_elts=function(b){if(stx_colon_list_question_(b)){return b.elts}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("stx_colon_list_dash_elts: not a stx:list: ~s",[b]))}};var stx_colon_list_dash_loc=function(b){if(stx_colon_list_question_(b)){return b.loc}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("stx_colon_list_dash_loc: not a stx:list: ~s",[b]))}};var set_dash_stx_colon_list_dash_elts_bang_=function(c,b){if(stx_colon_list_question_(c)){c.elts=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_stx_colon_list_dash_elts_bang_: not a stx:list: ~s",[c]))}};var set_dash_stx_colon_list_dash_loc_bang_=function(c,b){if(stx_colon_list_question_(c)){c.loc=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_stx_colon_list_dash_loc_bang_: not a stx:list: ~s",[c]))}};var stx_colon_list_question_=function(b){return b!=null&&b!=undefined&&b instanceof stx_colon_list};var Loc=function(d,b,c,e){plt.Kernel.Struct.call(this,"make-Loc",[d,b,c,e]);this.offset=d;this.line=b;this.span=c;this.id=e};Loc.prototype=new plt.Kernel.Struct();var make_dash_Loc=function(e,d,c,b){return new Loc(e,d,c,b)};var Loc_dash_offset=function(b){if(Loc_question_(b)){return b.offset}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("Loc_dash_offset: not a Loc: ~s",[b]))}};var Loc_dash_line=function(b){if(Loc_question_(b)){return b.line}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("Loc_dash_line: not a Loc: ~s",[b]))}};var Loc_dash_span=function(b){if(Loc_question_(b)){return b.span}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("Loc_dash_span: not a Loc: ~s",[b]))}};var Loc_dash_id=function(b){if(Loc_question_(b)){return b.id}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("Loc_dash_id: not a Loc: ~s",[b]))}};var set_dash_Loc_dash_offset_bang_=function(c,b){if(Loc_question_(c)){c.offset=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_Loc_dash_offset_bang_: not a Loc: ~s",[c]))}};var set_dash_Loc_dash_line_bang_=function(c,b){if(Loc_question_(c)){c.line=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_Loc_dash_line_bang_: not a Loc: ~s",[c]))}};var set_dash_Loc_dash_span_bang_=function(c,b){if(Loc_question_(c)){c.span=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_Loc_dash_span_bang_: not a Loc: ~s",[c]))}};var set_dash_Loc_dash_id_bang_=function(c,b){if(Loc_question_(c)){c.id=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_Loc_dash_id_bang_: not a Loc: ~s",[c]))}};var Loc_question_=function(b){return b!=null&&b!=undefined&&b instanceof Loc};var Loc_dash__greaterthan_string=function(b){return(plt.Kernel.setLastLoc('offset=284 line=14 span=154 id="stx.ss"')&&plt.Kernel.format((plt.types.String.makeInstance("offset=~a line=~a span=~a id=~s")),[(plt.Kernel.setLastLoc('offset=337 line=15 span=18 id="stx.ss"')&&Loc_dash_offset(b)),(plt.Kernel.setLastLoc('offset=367 line=16 span=16 id="stx.ss"')&&Loc_dash_line(b)),(plt.Kernel.setLastLoc('offset=395 line=17 span=16 id="stx.ss"')&&Loc_dash_span(b)),(plt.Kernel.setLastLoc('offset=423 line=18 span=14 id="stx.ss"')&&Loc_dash_id(b))]))};var stx_question_=function(b){return((plt.Kernel.setLastLoc('offset=489 line=23 span=13 id="stx.ss"')&&stx_colon_atom_question_(b))||(plt.Kernel.setLastLoc('offset=509 line=24 span=13 id="stx.ss"')&&stx_colon_list_question_(b)))};var stx_dash_e=function(b){return((plt.Kernel.setLastLoc('offset=635 line=31 span=17 id="stx.ss"')&&stx_colon_atom_question_(b))?(plt.Kernel.setLastLoc('offset=658 line=32 span=22 id="stx.ss"')&&stx_colon_atom_dash_datum(b)):((plt.Kernel.setLastLoc('offset=687 line=33 span=17 id="stx.ss"')&&stx_colon_list_question_(b))?(plt.Kernel.setLastLoc('offset=710 line=34 span=21 id="stx.ss"')&&stx_colon_list_dash_elts(b)):(plt.Kernel.setLastLoc('offset=624 line=30 span=109 id="stx.ss"')&&plt.Kernel.error((plt.types.Symbol.makeInstance("cond")),(plt.types.String.makeInstance('cond: fell out of cond around "offset=624 line=30 span=109 id=\\"stx.ss\\""'))))))};var stx_dash_loc=function(b){return((plt.Kernel.setLastLoc('offset=797 line=40 span=17 id="stx.ss"')&&stx_colon_atom_question_(b))?(plt.Kernel.setLastLoc('offset=820 line=41 span=20 id="stx.ss"')&&stx_colon_atom_dash_loc(b)):((plt.Kernel.setLastLoc('offset=847 line=42 span=17 id="stx.ss"')&&stx_colon_list_question_(b))?(plt.Kernel.setLastLoc('offset=870 line=43 span=20 id="stx.ss"')&&stx_colon_list_dash_loc(b)):(plt.Kernel.setLastLoc('offset=786 line=39 span=106 id="stx.ss"')&&plt.Kernel.error((plt.types.Symbol.makeInstance("cond")),(plt.types.String.makeInstance('cond: fell out of cond around "offset=786 line=39 span=106 id=\\"stx.ss\\""'))))))};var stx_dash_begins_dash_with_question_=function(c,b){return((plt.Kernel.setLastLoc('offset=991 line=49 span=17 id="stx.ss"')&&stx_colon_atom_question_(c))?plt.types.Logic.FALSE:((plt.Kernel.setLastLoc('offset=1023 line=51 span=17 id="stx.ss"')&&stx_colon_list_question_(c))?((plt.Kernel.setLastLoc('offset=1051 line=52 span=36 id="stx.ss"')&&plt.Kernel.not((plt.Kernel.setLastLoc('offset=1056 line=52 span=30 id="stx.ss"')&&plt.Kernel.empty_question_((plt.Kernel.setLastLoc('offset=1064 line=52 span=21 id="stx.ss"')&&stx_colon_list_dash_elts(c))))))&&(plt.Kernel.setLastLoc('offset=1098 line=53 span=47 id="stx.ss"')&&plt.Kernel.symbol_question_((plt.Kernel.setLastLoc('offset=1107 line=53 span=37 id="stx.ss"')&&stx_dash_e((plt.Kernel.setLastLoc('offset=1114 line=53 span=29 id="stx.ss"')&&plt.Kernel.first((plt.Kernel.setLastLoc('offset=1121 line=53 span=21 id="stx.ss"')&&stx_colon_list_dash_elts(c))))))))&&(plt.Kernel.setLastLoc('offset=1156 line=54 span=74 id="stx.ss"')&&plt.Kernel.symbol_equal__question_((plt.Kernel.setLastLoc('offset=1166 line=54 span=37 id="stx.ss"')&&stx_dash_e((plt.Kernel.setLastLoc('offset=1173 line=54 span=29 id="stx.ss"')&&plt.Kernel.first((plt.Kernel.setLastLoc('offset=1180 line=54 span=21 id="stx.ss"')&&stx_colon_list_dash_elts(c)))))),b))):(plt.Kernel.setLastLoc('offset=980 line=48 span=253 id="stx.ss"')&&plt.Kernel.error((plt.types.Symbol.makeInstance("cond")),(plt.types.String.makeInstance('cond: fell out of cond around "offset=980 line=48 span=253 id=\\"stx.ss\\""'))))))};var datum_dash__greaterthan_stx=function(b,c){return((plt.Kernel.setLastLoc('offset=1461 line=65 span=14 id="stx.ss"')&&stx_question_(b))?b:(((plt.Kernel.setLastLoc('offset=1499 line=67 span=15 id="stx.ss"')&&plt.Kernel.pair_question_(b))||(plt.Kernel.setLastLoc('offset=1515 line=67 span=16 id="stx.ss"')&&plt.Kernel.empty_question_(b)))?(plt.Kernel.setLastLoc('offset=1538 line=68 span=89 id="stx.ss"')&&make_dash_stx_colon_list((plt.Kernel.setLastLoc('offset=1553 line=68 span=47 id="stx.ss"')&&plt.Kernel.map(((function(){plt.Kernel.setLastLoc('offset=1558 line=68 span=33 id="stx.ss"');var d=(function(f){var e=f[0];return(plt.Kernel.setLastLoc('offset=1570 line=68 span=20 id="stx.ss"')&&datum_dash__greaterthan_stx(e,c))});d.toWrittenString=function(){return"<function:lambda>"};d.toDisplayedString=d.toWrittenString;return d})()),[b])),c)):(plt.types.Logic.TRUE?(plt.Kernel.setLastLoc('offset=1644 line=71 span=29 id="stx.ss"')&&make_dash_stx_colon_atom(b,c)):(plt.Kernel.setLastLoc('offset=1450 line=64 span=225 id="stx.ss"')&&plt.Kernel.error((plt.types.Symbol.makeInstance("cond")),(plt.types.String.makeInstance('cond: fell out of cond around "offset=1450 line=64 span=225 id=\\"stx.ss\\""')))))))};var stx_dash__greaterthan_datum=function(b){return((plt.Kernel.setLastLoc('offset=1787 line=84 span=17 id="stx.ss"')&&stx_colon_atom_question_(b))?(plt.Kernel.setLastLoc('offset=1810 line=85 span=22 id="stx.ss"')&&stx_colon_atom_dash_datum(b)):((plt.Kernel.setLastLoc('offset=1839 line=86 span=17 id="stx.ss"')&&stx_colon_list_question_(b))?(plt.Kernel.setLastLoc('offset=1862 line=87 span=38 id="stx.ss"')&&plt.Kernel.map((function(){var c=(function(d){return stx_dash__greaterthan_datum(d[0])});c.toWrittenString=function(){return"<function:stx->datum>"};c.toDisplayedString=function(){return"<function:stx->datum>"};return c})(),[(plt.Kernel.setLastLoc('offset=1878 line=87 span=21 id="stx.ss"')&&stx_colon_list_dash_elts(b))])):(plt.Kernel.setLastLoc('offset=1776 line=83 span=126 id="stx.ss"')&&plt.Kernel.error((plt.types.Symbol.makeInstance("cond")),(plt.types.String.makeInstance('cond: fell out of cond around "offset=1776 line=83 span=126 id=\\"stx.ss\\""'))))))};(function(){((function(b){}))(arguments[0]||plt.Kernel.identity)})();var plt=plt||{};plt.world=plt.world||{};plt.world.config=plt.world.config||{};(function(){var d=function(i,g){var f={};for(var h in i){f[h]=i[h]}for(var h in g){f[h]=g[h]}return f};var e=function(){this.vals={changeWorld:false,shutdownWorld:false,initialEffect:false,onRedraw:false,onDraw:false,onDrawCss:false,tickDelay:false,onTick:false,onTickEffect:false,onKey:false,onKeyEffect:false,onTilt:false,onTiltEffect:false,onAcceleration:false,onAccelerationEffect:false,onShake:false,onShakeEffect:false,onLocationChange:false,onLocationChangeEffect:false,onAnnounce:false,onAnnounceEffect:false,stopWhen:false,stopWhenEffect:false}};e.prototype.lookup=function(f){plt.Kernel.check(f,plt.Kernel.isString,"WorldConfig.lookup","string",1);if(f in this.vals){return this.vals[f]}else{throw Error("Can't find "+f+" in the configuration")}};e.prototype.updateAll=function(g){var f=new e();f.vals=d(this.vals,g);return f};plt.world.config.WorldConfig=e;plt.world.config.CONFIG=new e();var c=function(){return make_dash_effect_colon_none()};var b=function(h,g){h.toWrittenString=function(){return"("+g+" ...)"};h.toDisplayedString=h.toWrittenString;return h};plt.world.config.Kernel=plt.world.config.Kernel||{};plt.world.config.Kernel.onRedraw=function(g){plt.Kernel.check(g,plt.Kernel.isFunction,"on-redraw","function",1);return b(function(f){return f.updateAll({onRedraw:g})},"on-redraw")};plt.world.config.Kernel.initialEffect=function(f){return b(function(g){return g.updateAll({initialEffect:f})},"initial-effect")};plt.world.config.Kernel.onDraw=function(g,f){plt.Kernel.check(g,plt.Kernel.isFunction,"on-draw","function",1);plt.Kernel.check(f,plt.Kernel.isFunction,"on-draw","function",2);return b(function(h){return h.updateAll({onDraw:g,onDrawCss:f})},"on-draw")};plt.world.config.Kernel.onTick=function(g,h){plt.Kernel.check(g,plt.Kernel.isNumber,"on-tick","number",1);plt.Kernel.check(h,plt.Kernel.isFunction,"on-tick","function",2);return plt.world.config.Kernel.onTick_star_(g,h,function(f){return c()})};plt.world.config.Kernel.onTick_star_=function(f,h,g){plt.Kernel.check(f,plt.Kernel.isNumber,"on-tick*","number",1);plt.Kernel.check(h,plt.Kernel.isFunction,"on-tick*","function",2);plt.Kernel.check(g,plt.Kernel.isFunction,"on-tick*","function",3);return b(function(i){var j={onTick:h,onTickEffect:g,tickDelay:(plt.types.NumberTower.toInteger(plt.types.NumberTower.multiply(plt.types.Rational.makeInstance(1000,1),f)))};return i.updateAll(j)},"on-tick")};plt.world.config.Kernel.onTilt=function(f){plt.Kernel.check(f,plt.Kernel.isFunction,"on-tilt","function",1);return plt.world.config.Kernel.onTilt_star_(f,function(h,g,j,i){return c()})};plt.world.config.Kernel.onTilt_star_=function(g,f){plt.Kernel.check(g,plt.Kernel.isFunction,"on-tilt*","function",1);plt.Kernel.check(f,plt.Kernel.isFunction,"on-tilt*","function",2);return b(function(h){return h.updateAll({onTilt:g,onTiltEffect:f})},"on-tilt")};plt.world.config.Kernel.onAnnounce=function(f){plt.Kernel.check(f,plt.Kernel.isFunction,"on-announce","function",1);return plt.world.config.Kernel.onAnnounce_star_(f,function(g,h,i){return c()})};plt.world.config.Kernel.onAnnounce_star_=function(g,f){plt.Kernel.check(g,plt.Kernel.isFunction,"on-announce*","function",1);plt.Kernel.check(f,plt.Kernel.isFunction,"on-announce*","function",2);return b(function(h){return h.updateAll({onAnnounce:g,onAnnounceEffect:f})},"on-announce")};plt.world.config.Kernel.onAcceleration=function(f){plt.Kernel.check(f,plt.Kernel.isFunction,"on-acceleration","function",1);return plt.world.config.Kernel.onAcceleration_star_(f,function(h,g,j,i){return c()})};plt.world.config.Kernel.onAcceleration_star_=function(g,f){plt.Kernel.check(g,plt.Kernel.isFunction,"on-acceleration*","function",1);plt.Kernel.check(f,plt.Kernel.isFunction,"on-acceleration*","function",2);return b(function(h){return h.updateAll({onAcceleration:g,onAccelerationEffect:f})},"on-acceleration")};plt.world.config.Kernel.onShake=function(f){plt.Kernel.check(f,plt.Kernel.isFunction,"on-shake","function",1);return plt.world.config.Kernel.onShake_star_(f,function(h,g,j,i){return c()})};plt.world.config.Kernel.onShake_star_=function(g,f){plt.Kernel.check(g,plt.Kernel.isFunction,"on-shake*","function",1);plt.Kernel.check(f,plt.Kernel.isFunction,"on-shake*","function",2);return b(function(h){return h.updateAll({onShake:g,onShakeEffect:f})},"on-shake")};plt.world.config.Kernel.onKey=function(f){plt.Kernel.check(f,plt.Kernel.isFunction,"on-key","function",1);return plt.world.config.Kernel.onKey_star_(f,function(g,h){return c()})};plt.world.config.Kernel.onKey_star_=function(g,f){plt.Kernel.check(g,plt.Kernel.isFunction,"on-key*","function",1);plt.Kernel.check(f,plt.Kernel.isFunction,"on-key*","function",2);return b(function(h){return h.updateAll({onKey:g,onKeyEffect:f})},"on-key")};plt.world.config.Kernel.onLocationChange=function(f){plt.Kernel.check(f,plt.Kernel.isFunction,"on-location-change","function",1);return plt.world.config.Kernel.onLocationChange_star_(f,function(g,i,h){return c()})};plt.world.config.Kernel.onLocationChange_star_=function(g,f){plt.Kernel.check(g,plt.Kernel.isFunction,"on-location-change*","function",1);plt.Kernel.check(f,plt.Kernel.isFunction,"on-location-change*","function",2);return b(function(h){return h.updateAll({onLocationChange:g,onLocationChangeEffect:f})},"on-location-change")};plt.world.config.Kernel.stopWhen=function(f){plt.Kernel.check(f,plt.Kernel.isFunction,"stop-when","function",1);return plt.world.config.Kernel.stopWhen_star_(f,function(g){return c()})};plt.world.config.Kernel.stopWhen_star_=function(g,f){plt.Kernel.check(g,plt.Kernel.isFunction,"stop-when*","function",1);plt.Kernel.check(f,plt.Kernel.isFunction,"stop-when*","function",2);return b(function(h){return h.updateAll({stopWhen:g,stopWhenEffect:f})},"stop-when")}})();var plt=plt||{};plt.platform={};(function(){plt.platform.Platform={};var y=false;plt.platform.Platform.getInstance=function(){if(!y){y=new r()}return y};var r=function(){this.tiltService=m;this.shakeService=u();this.locationService=I();this.telephonyService=D();this.networkService=C();this.soundService=G();this.powerService=J();this.smsService=p();this.pickPlaylistService=i()};r.prototype.getTiltService=function(){return this.tiltService};r.prototype.getShakeService=function(){return this.shakeService};r.prototype.getLocationService=function(){return this.locationService};r.prototype.getTelephonyService=function(){return this.telephonyService};r.prototype.getNetworkService=function(){return this.networkService};r.prototype.getSoundService=function(){return this.soundService};r.prototype.getPowerService=function(){return this.powerService};r.prototype.getSmsService=function(){return this.smsService};r.prototype.getPickPlaylistService=function(){return this.pickPlaylistService};var I=function(){if(N()){return new l()}else{if(f()){return new x()}else{if(n()){return new k()}else{return new b()}}}};var N=function(){return(typeof Device!="undefined")};var f=function(){return(window.google&&window.google.gears&&true)};var n=function(){return(typeof(navigator)!="undefined"&&typeof(navigator.geolocation)!="undefined")};var K=function(W,V,U,T){var S=function(X){return X*Math.PI/180};var R=function(X,Y){return Math.pow(Math.sin((S(X)-S(Y))/2),2)};return 6378000*2*Math.asin(Math.min(1,Math.sqrt(R(W,U)+(Math.cos(S(W))*Math.cos(S(U))*R(V,T)))))};var x=function(){this.geo=google.gears.factory.create("beta.geolocation");this.listeners=[];this.currentPosition={latitude:0,longitude:0,altitude:0,bearing:0,speed:0};this.watchId=false};x.prototype.startService=function(){var R=this;function S(T){R.currentPosition.latitude=T.latitude;R.currentPosition.longitude=T.longitude;R.currentPosition.altitude=T.altitude;for(var U=0;U<R.listeners.length;U++){R.listeners[U](T.latitude,T.longitude)}}this.watchId=this.geo.watchPosition(S)};x.prototype.shutdownService=function(){this.geo.clearWatch(this.watchId)};x.prototype.addLocationChangeListener=function(R){this.listeners.push(R)};x.prototype.getLatitude=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.latitude)};x.prototype.getLongitude=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.longitude)};x.prototype.getAltitude=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.altitude)};x.prototype.getBearing=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.bearing)};x.prototype.getSpeed=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.speed)};x.prototype.getDistanceBetween=function(U,T,S,R){return plt.types.FloatPoint.makeInstance(K(U.toFloat(),T.toFloat(),S.toFloat(),R.toFloat()))};var b=function(){};b.prototype.startService=function(){};b.prototype.shutdownService=function(){};b.prototype.addLocationChangeListener=function(R){};b.prototype.getLatitude=function(){return plt.types.Rational.ZERO};b.prototype.getLongitude=function(){return plt.types.Rational.ZERO};b.prototype.getAltitude=function(){return plt.types.Rational.ZERO};b.prototype.getBearing=function(){return plt.types.Rational.ZERO};b.prototype.getSpeed=function(){return plt.types.Rational.ZERO};b.prototype.getDistanceBetween=function(U,T,S,R){return plt.types.FloatPoint.makeInstance(K(U.toFloat(),T.toFloat(),S.toFloat(),R.toFloat()))};var l=function(){this.locationListeners=[];this.currentPosition={latitude:0,longitude:0,atttitude:0,bearing:0,speed:0};this.watchId=false};l.prototype.startService=function(){var S=this;var R=function(V){S.currentPosition.latitude=parseFloat(V.latitude);S.currentPosition.longitude=parseFloat(V.longitude);for(var T=0;T<S.locationListeners.length;T++){var U=S.locationListeners[T];U(S.currentPosition.latitude,S.currentPosition.longitude)}};this.watchId=navigator.geolocation.watchPosition(R,function(){},{})};l.prototype.shutdownService=function(){navigator.geolocation.clearWatch(this.watchId)};l.prototype.addLocationChangeListener=function(R){this.locationListeners.push(R)};l.prototype.getLatitude=function(){return plt.types.FloatPoint.makeInstance(navigator.geolocation.lastPosition.latitude)};l.prototype.getLongitude=function(){return plt.types.FloatPoint.makeInstance(navigator.geolocation.lastPosition.longitude)};l.prototype.getAltitude=function(){return plt.types.Rational.ZERO};l.prototype.getBearing=function(){return plt.types.Rational.ZERO};l.prototype.getSpeed=function(){return plt.types.Rational.ZERO};l.prototype.getDistanceBetween=function(U,T,S,R){return plt.types.FloatPoint.makeInstance(navigator.geolocation.getDistanceBetween(U.toFloat(),T.toFloat(),S.toFloat(),R.toFloat()))};var k=function(){this.locationListeners=[];this.currentPosition={latitude:0,longitude:0,atttitude:0,bearing:0,speed:0};this.watchId=false};k.prototype.startService=function(){var T=this;var R=function(W){T.currentPosition.latitude=W.coords.latitude;T.currentPosition.longitude=W.coords.longitude;for(var U=0;U<T.locationListeners.length;U++){var V=T.locationListeners[U];V(W.coords.latitude,W.coords.longitude)}};var S=function(){};if(typeof navigator.geolocation!="undefined"&&typeof navigator.geolocation.getCurrentPosition!="undefined"){navigator.geolocation.watchPosition(R)}setTimeout(function(){navigator.geolocation.getCurrentPosition(R)},10000)};k.prototype.shutdownService=function(){if(this.watchId){navigator.geolocation.clearWatch(this.watchId);this.watchId=false}};k.prototype.addLocationChangeListener=function(R){this.locationListeners.push(R)};k.prototype.getLatitude=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.latitude)};k.prototype.getLongitude=function(){return plt.types.FloatPOint.makeInstance(this.currentPosition.longitude)};k.prototype.getAltitude=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.altitude)};k.prototype.getBearing=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.bearing)};k.prototype.getSpeed=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.speed)};k.prototype.getDistanceBetween=function(U,T,S,R){return plt.types.FloatPoint.makeInstance(K(U.toFloat(),T.toFloat(),S.toFloat(),R.toFloat()))};var j=[];var s=[];var q;var t;var F;var g=function(S){for(var R=0;R<j.length;R++){j[R](parseFloat(S.x),parseFloat(S.y),parseFloat(S.z))}};var z=function(R){for(var S=0;S<s.length;S++){s[S](parseFloat(R.azimuth),parseFloat(R.pitch),parseFloat(R.roll))}};var m={startService:function(){if(typeof Accelerometer!="undefined"){q=navigator.accelerometer.watchAcceleration(g,function(){});t=navigator.accelerometer.watchOrientation(z,function(){})}},shutdownService:function(){if(typeof Accelerometer!="undefined"){navigator.accelerometer.clearWatch(q);navigator.accelerometer.clearWatch(t);navigator.accelerometer.stopAllShakeWatches()}},addOrientationChangeListener:function(R){s.push(R)},addAccelerationChangeListener:function(R){j.push(R)}};var D=function(){if(N()){return new e()}else{return new A()}};var A=function(){};A.prototype.getSignalStrengths=function(){return plt.types.Empty.EMPTY};var e=function(){};e.prototype.getSignalStrengths=function(){var R=plt.types.Empty.EMPTY;var U=Device.getSignalStrengths();for(var S=0;S<U.length;S++){var T=U.get(S);R=plt.types.Cons.makeInstance(plt.Kernel.list([toNum(T.getId()),toNum(T.getStrength())]),R)}return R};var u=function(){if(N()){return new B()}else{return new H()}};var B=function(){this.listeners=[]};B.prototype.startService=function(){var S=this;var T=function(){for(var U=0;U<S.listeners.length;U++){S.listeners[U]()}};var R=function(){};this.shakeId=navigator.accelerometer.watchShake(T,R)};B.prototype.shutdownService=function(){navigator.accelerometer.stopAllShakeWatches()};B.prototype.addListener=function(R){this.listeners.push(R)};var H=function(){};H.prototype.startService=function(){};H.prototype.shutdownService=function(){};H.prototype.addListener=function(R){};var C=function(){if(N()){return new M()}else{return new Q()}};var M=function(){};M.prototype.getUrl=function(S){var R=Device.getUrl(S);return plt.types.String.makeInstance(""+R)};var Q=function(){};Q.prototype.getUrl=function(S){var T=new XMLHttpRequest();var R="/networkProxy?url="+encodeURIComponent(S);T.open("GET",R,false);T.send(null);return plt.types.String.makeInstance(T.responseText)};var G=function(){if(N()){return new P()}else{if(h()){return new d()}else{return new L()}}};var h=function(){return !!(document.createElement("audio").canPlayType)};var P=function(){};P.prototype.beep=function(){navigator.notification.beep(1)};P.prototype.playPlaylist=function(R){Device.playPlaylistRecord(R)};P.prototype.pausePlaylist=function(R){Device.pausePlaylistRecord(R)};P.prototype.stopPlaylist=function(R){Device.stopPlaylistRecord(R)};P.prototype.playSoundUrl=function(R){navigator.audio.playMusic(R)};P.prototype.playDtmfTone=function(S,R){navigator.audio.playDTMF(S);setTimeout(function(){navigator.audio.stopDTMF()},R)};P.prototype.stopSoundUrl=function(R){navigator.audio.stopMusic(R)};P.prototype.pauseSoundUrl=function(R){navigator.audio.pauseMusic(R)};P.prototype.setVolume=function(R){navigator.audio.setMusicVolume(R)};P.prototype.raiseVolume=function(){navigator.audio.increaseMusicVolume()};P.prototype.lowerVolume=function(){navigator.audio.decreaseMusicVolume()};var d=function(){this.cachedUrls={};this.baseVolume=100};d.prototype.beep=function(){alert("Beep")};d.prototype.playPlaylistSound=function(R){};d.prototype.pausePlaylistSound=function(R){};d.prototype.stopPlaylistSound=function(R){};d.prototype.playSoundUrl=function(R){if(!this.cachedUrls[R]){this.cachedUrls[R]=new Audio(R)}var S=this.cachedUrls[R];if(S.ended||S.paused){this.cachedUrls[R].play()}};d.prototype.playDtmfTone=function(S,R){alert("dtmf tone")};d.prototype.stopSoundUrl=function(R){if(this.cachedUrls[R]){this.cachedUrls[R].pause();this.cachedUrls[R].currentTime=0}};d.prototype.pauseSoundUrl=function(R){if(this.cachedUrls[R]){this.cachedUrls[R].pause()}};d.prototype.setVolume=function(S){for(var R in this.cachedUrls){this.cachedUrls[R].volume=S/100}this.baseVolume=S};d.prototype.raiseVolume=function(){this.setVolume(Math.min(this.baseVolume+5,100))};d.prototype.lowerVolume=function(){this.setVolume(Math.max(this.baseVolume-5,0))};var L=function(){};L.prototype.beep=function(){alert("Beep")};L.prototype.playPlaylistSound=function(R){};L.prototype.pausePlaylistSound=function(R){};L.prototype.stopPlaylistSound=function(R){};L.prototype.playSoundUrl=function(R){alert("sound url "+R)};L.prototype.playDtmfTone=function(S,R){alert("dtmf tone")};L.prototype.stopSoundUrl=function(R){};L.prototype.pauseSoundUrl=function(R){};L.prototype.setVolume=function(R){};L.prototype.raiseVolume=function(){};L.prototype.lowerVolume=function(){};var J=function(){if(N()){return new c()}else{return new O()}};var c=function(){this.currentLockFlags=-1};c.prototype.setWakeLock=function(R){if(R!=this.currentLockFlags){navigator.power.setWakeLock(R);this.currentLockFlags=R}};c.prototype.releaseWakeLock=function(){if(this.currentLockFlags!=-1){navigator.power.releaseWakeLock();this.currentLockFlags=-1}};var O=function(){};O.prototype.setWakeLock=function(R){};O.prototype.releaseWakeLock=function(){};var p=function(){if(N()){return new E()}else{return new w()}};var E=function(){};E.prototype.send=function(R,S){navigator.sms.send(R,S)};var w=function(){};w.prototype.send=function(R,S){alert("SMS should be sent to "+R+" with the content: "+S)};var i=function(){if(N()){return new v()}else{return new o()}};var v=function(){};v.prototype.pickPlaylist=function(S){var R=function(T){S(T)};navigator.dialogPickers.pickPlaylist(R)};var o=function(){};o.prototype.pickPlaylist=function(R){alert("pick playlist currently unavailable")}})();var plt=plt||{};plt.lib={};(function(){plt.lib.Telephony={};plt.lib.Telephony.getSignalStrengths=function(){return plt.platform.Platform.getInstance().getTelephonyService().getSignalStrengths()};plt.lib.Location={};plt.lib.Location.getLatitude=function(){return plt.platform.Platform.getInstance().getLocationService().getLatitude()};plt.lib.Location.getLongitude=function(){return plt.platform.Platform.getInstance().getLocationService().getLongitude()};plt.lib.Location.getAttitude=function(){return plt.platform.Platform.getInstance().getLocationService().getAttitude()};plt.lib.Location.getBearing=function(){return plt.platform.Platform.getInstance().getLocationService().getBearing()};plt.lib.Location.getSpeed=function(){return plt.platform.Platform.getInstance().getLocationService().getSpeed()};plt.lib.Location.getDistanceBetween=function(e,d,c,b){return plt.platform.Platform.getInstance().getLocationService().getDistanceBetween(e,d,c,b)};plt.lib.Net={};plt.lib.Net.getUrl=function(b){return plt.platform.Platform.getInstance().getNetworkService().getUrl(b)}}());var effect_colon_none=function(){plt.Kernel.Struct.call(this,"make-effect:none",[])};effect_colon_none.prototype=new plt.Kernel.Struct();var make_dash_effect_colon_none=function(){return new effect_colon_none()};var effect_colon_none_question_=function(b){return b!=null&&b!=undefined&&b instanceof effect_colon_none};var effect_colon_beep=function(){plt.Kernel.Struct.call(this,"make-effect:beep",[])};effect_colon_beep.prototype=new plt.Kernel.Struct();var make_dash_effect_colon_beep=function(){return new effect_colon_beep()};var effect_colon_beep_question_=function(b){return b!=null&&b!=undefined&&b instanceof effect_colon_beep};var effect_colon_play_dash_dtmf_dash_tone=function(c,b){plt.Kernel.Struct.call(this,"make-effect:play-dtmf-tone",[c,b]);this.tone=c;this.duration=b};effect_colon_play_dash_dtmf_dash_tone.prototype=new plt.Kernel.Struct();var make_dash_effect_colon_play_dash_dtmf_dash_tone=function(c,b){return new effect_colon_play_dash_dtmf_dash_tone(c,b)};var effect_colon_play_dash_dtmf_dash_tone_dash_tone=function(b){if(effect_colon_play_dash_dtmf_dash_tone_question_(b)){return b.tone}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:play-dtmf-tone-tone: not a effect:play-dtmf-tone: ~s",[b]))}};var effect_colon_play_dash_dtmf_dash_tone_dash_duration=function(b){if(effect_colon_play_dash_dtmf_dash_tone_question_(b)){return b.duration}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:play-dtmf-tone-duration: not a effect:play-dtmf-tone: ~s",[b]))}};var set_dash_effect_colon_play_dash_dtmf_dash_tone_dash_tone_bang_=function(c,b){if(effect_colon_play_dash_dtmf_dash_tone_question_(c)){c.tone=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_play_dash_dtmf_dash_tone_dash_tone_bang_: not a effect:play-dtmf-tone: ~s",[c]))}};var set_dash_effect_colon_play_dash_dtmf_dash_tone_dash_duration_bang_=function(c,b){if(effect_colon_play_dash_dtmf_dash_tone_question_(c)){c.duration=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_play_dash_dtmf_dash_tone_dash_duration_bang_: not a effect:play-dtmf-tone: ~s",[c]))}};var effect_colon_play_dash_dtmf_dash_tone_question_=function(b){return b!=null&&b!=undefined&&b instanceof effect_colon_play_dash_dtmf_dash_tone};var effect_colon_send_dash_sms=function(b,c){plt.Kernel.Struct.call(this,"make-effect:send-sms",[b,c]);this.address=b;this.msg=c};effect_colon_send_dash_sms.prototype=new plt.Kernel.Struct();var make_dash_effect_colon_send_dash_sms=function(c,b){return new effect_colon_send_dash_sms(c,b)};var effect_colon_send_dash_sms_dash_address=function(b){if(effect_colon_send_dash_sms_question_(b)){return b.address}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:send-sms-address: not a effect:send-sms: ~s",[b]))}};var effect_colon_send_dash_sms_dash_msg=function(b){if(effect_colon_send_dash_sms_question_(b)){return b.msg}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:send-sms-msg: not a effect:send-sms: ~s",[b]))}};var set_dash_effect_colon_send_dash_sms_dash_address_bang_=function(c,b){if(effect_colon_send_dash_sms_question_(c)){c.address=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_send_dash_sms_dash_address_bang_: not a effect:send-sms: ~s",[c]))}};var set_dash_effect_colon_send_dash_sms_dash_msg_bang_=function(c,b){if(effect_colon_send_dash_sms_question_(c)){c.msg=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_send_dash_sms_dash_msg_bang_: not a effect:send-sms: ~s",[c]))}};var effect_colon_send_dash_sms_question_=function(b){return b!=null&&b!=undefined&&b instanceof effect_colon_send_dash_sms};var playlist_dash_sound=function(b){plt.Kernel.Struct.call(this,"make-playlist-sound",[b]);this.playlist=b};playlist_dash_sound.prototype=new plt.Kernel.Struct();var make_dash_playlist_dash_sound=function(b){return new playlist_dash_sound(b)};var playlist_dash_sound_dash_playlist=function(b){if(playlist_dash_sound_question_(b)){return b.playlist}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("playlist-sound-playlist: not a playlist-sound: ~s",[b]))}};var set_dash_playlist_dash_sound_dash_playlist_bang_=function(c,b){if(playlist_dash_sound_question_(c)){c.playlist=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_playlist_dash_sound_dash_playlist_bang_: not a playlist-sound: ~s",[c]))}};var playlist_dash_sound_question_=function(b){return b!=null&&b!=undefined&&b instanceof playlist_dash_sound};var sound_question_=function(b){return((plt.Kernel.setLastLoc('offset=417 line=19 span=11 id="effect-struct.ss"')&&plt.Kernel.string_question_(b))||(plt.Kernel.setLastLoc('offset=435 line=20 span=19 id="effect-struct.ss"')&&playlist_dash_sound_question_(b)))};var effect_colon_play_dash_sound=function(b){plt.Kernel.Struct.call(this,"make-effect:play-sound",[b]);this.sound=b};effect_colon_play_dash_sound.prototype=new plt.Kernel.Struct();var make_dash_effect_colon_play_dash_sound=function(b){return new effect_colon_play_dash_sound(b)};var effect_colon_play_dash_sound_dash_sound=function(b){if(effect_colon_play_dash_sound_question_(b)){return b.sound}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:play-sound-sound: not a effect:play-sound: ~s",[b]))}};var set_dash_effect_colon_play_dash_sound_dash_sound_bang_=function(c,b){if(effect_colon_play_dash_sound_question_(c)){c.sound=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_play_dash_sound_dash_sound_bang_: not a effect:play-sound: ~s",[c]))}};var effect_colon_play_dash_sound_question_=function(b){return b!=null&&b!=undefined&&b instanceof effect_colon_play_dash_sound};var effect_colon_pause_dash_sound=function(b){plt.Kernel.Struct.call(this,"make-effect:pause-sound",[b]);this.sound=b};effect_colon_pause_dash_sound.prototype=new plt.Kernel.Struct();var make_dash_effect_colon_pause_dash_sound=function(b){return new effect_colon_pause_dash_sound(b)};var effect_colon_pause_dash_sound_dash_sound=function(b){if(effect_colon_pause_dash_sound_question_(b)){return b.sound}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:pause-sound-sound: not a effect:pause-sound: ~s",[b]))}};var set_dash_effect_colon_pause_dash_sound_dash_sound_bang_=function(c,b){if(effect_colon_pause_dash_sound_question_(c)){c.sound=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_pause_dash_sound_dash_sound_bang_: not a effect:pause-sound: ~s",[c]))}};var effect_colon_pause_dash_sound_question_=function(b){return b!=null&&b!=undefined&&b instanceof effect_colon_pause_dash_sound};var effect_colon_stop_dash_sound=function(b){plt.Kernel.Struct.call(this,"make-effect:stop-sound",[b]);this.sound=b};effect_colon_stop_dash_sound.prototype=new plt.Kernel.Struct();var make_dash_effect_colon_stop_dash_sound=function(b){return new effect_colon_stop_dash_sound(b)};var effect_colon_stop_dash_sound_dash_sound=function(b){if(effect_colon_stop_dash_sound_question_(b)){return b.sound}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:stop-sound-sound: not a effect:stop-sound: ~s",[b]))}};var set_dash_effect_colon_stop_dash_sound_dash_sound_bang_=function(c,b){if(effect_colon_stop_dash_sound_question_(c)){c.sound=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_stop_dash_sound_dash_sound_bang_: not a effect:stop-sound: ~s",[c]))}};var effect_colon_stop_dash_sound_question_=function(b){return b!=null&&b!=undefined&&b instanceof effect_colon_stop_dash_sound};var effect_colon_set_dash_sound_dash_volume=function(b){plt.Kernel.Struct.call(this,"make-effect:set-sound-volume",[b]);this.volume=b};effect_colon_set_dash_sound_dash_volume.prototype=new plt.Kernel.Struct();var make_dash_effect_colon_set_dash_sound_dash_volume=function(b){return new effect_colon_set_dash_sound_dash_volume(b)};var effect_colon_set_dash_sound_dash_volume_dash_volume=function(b){if(effect_colon_set_dash_sound_dash_volume_question_(b)){return b.volume}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:set-sound-volume-volume: not a effect:set-sound-volume: ~s",[b]))}};var set_dash_effect_colon_set_dash_sound_dash_volume_dash_volume_bang_=function(c,b){if(effect_colon_set_dash_sound_dash_volume_question_(c)){c.volume=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_set_dash_sound_dash_volume_dash_volume_bang_: not a effect:set-sound-volume: ~s",[c]))}};var effect_colon_set_dash_sound_dash_volume_question_=function(b){return b!=null&&b!=undefined&&b instanceof effect_colon_set_dash_sound_dash_volume};var effect_colon_raise_dash_sound_dash_volume=function(){plt.Kernel.Struct.call(this,"make-effect:raise-sound-volume",[])};effect_colon_raise_dash_sound_dash_volume.prototype=new plt.Kernel.Struct();var make_dash_effect_colon_raise_dash_sound_dash_volume=function(){return new effect_colon_raise_dash_sound_dash_volume()};var effect_colon_raise_dash_sound_dash_volume_question_=function(b){return b!=null&&b!=undefined&&b instanceof effect_colon_raise_dash_sound_dash_volume};var effect_colon_lower_dash_sound_dash_volume=function(){plt.Kernel.Struct.call(this,"make-effect:lower-sound-volume",[])};effect_colon_lower_dash_sound_dash_volume.prototype=new plt.Kernel.Struct();var make_dash_effect_colon_lower_dash_sound_dash_volume=function(){return new effect_colon_lower_dash_sound_dash_volume()};var effect_colon_lower_dash_sound_dash_volume_question_=function(b){return b!=null&&b!=undefined&&b instanceof effect_colon_lower_dash_sound_dash_volume};var effect_colon_set_dash_wake_dash_lock=function(b){plt.Kernel.Struct.call(this,"make-effect:set-wake-lock",[b]);this.locks=b};effect_colon_set_dash_wake_dash_lock.prototype=new plt.Kernel.Struct();var make_dash_effect_colon_set_dash_wake_dash_lock=function(b){return new effect_colon_set_dash_wake_dash_lock(b)};var effect_colon_set_dash_wake_dash_lock_dash_locks=function(b){if(effect_colon_set_dash_wake_dash_lock_question_(b)){return b.locks}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:set-wake-lock-locks: not a effect:set-wake-lock: ~s",[b]))}};var set_dash_effect_colon_set_dash_wake_dash_lock_dash_locks_bang_=function(c,b){if(effect_colon_set_dash_wake_dash_lock_question_(c)){c.locks=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_set_dash_wake_dash_lock_dash_locks_bang_: not a effect:set-wake-lock: ~s",[c]))}};var effect_colon_set_dash_wake_dash_lock_question_=function(b){return b!=null&&b!=undefined&&b instanceof effect_colon_set_dash_wake_dash_lock};var effect_colon_release_dash_wake_dash_lock=function(){plt.Kernel.Struct.call(this,"make-effect:release-wake-lock",[])};effect_colon_release_dash_wake_dash_lock.prototype=new plt.Kernel.Struct();var make_dash_effect_colon_release_dash_wake_dash_lock=function(){return new effect_colon_release_dash_wake_dash_lock()};var effect_colon_release_dash_wake_dash_lock_question_=function(b){return b!=null&&b!=undefined&&b instanceof effect_colon_release_dash_wake_dash_lock};var effect_colon_pick_dash_playlist=function(b){plt.Kernel.Struct.call(this,"make-effect:pick-playlist",[b]);this.update_dash_f=b};effect_colon_pick_dash_playlist.prototype=new plt.Kernel.Struct();var make_dash_effect_colon_pick_dash_playlist=function(b){return new effect_colon_pick_dash_playlist(b)};var effect_colon_pick_dash_playlist_dash_update_dash_f=function(b){if(effect_colon_pick_dash_playlist_question_(b)){return b.update_dash_f}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:pick-playlist-update-f: not a effect:pick-playlist: ~s",[b]))}};var set_dash_effect_colon_pick_dash_playlist_dash_update_dash_f_bang_=function(c,b){if(effect_colon_pick_dash_playlist_question_(c)){c.update_dash_f=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_pick_dash_playlist_dash_update_dash_f_bang_: not a effect:pick-playlist: ~s",[c]))}};var effect_colon_pick_dash_playlist_question_=function(b){return b!=null&&b!=undefined&&b instanceof effect_colon_pick_dash_playlist};var effect_colon_pick_dash_random=function(c,b){plt.Kernel.Struct.call(this,"make-effect:pick-random",[c,b]);this.n=c;this.update_dash_f=b};effect_colon_pick_dash_random.prototype=new plt.Kernel.Struct();var make_dash_effect_colon_pick_dash_random=function(c,b){return new effect_colon_pick_dash_random(c,b)};var effect_colon_pick_dash_random_dash_n=function(b){if(effect_colon_pick_dash_random_question_(b)){return b.n}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:pick-random-n: not a effect:pick-random: ~s",[b]))}};var effect_colon_pick_dash_random_dash_update_dash_f=function(b){if(effect_colon_pick_dash_random_question_(b)){return b.update_dash_f}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:pick-random-update-f: not a effect:pick-random: ~s",[b]))}};var set_dash_effect_colon_pick_dash_random_dash_n_bang_=function(c,b){if(effect_colon_pick_dash_random_question_(c)){c.n=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_pick_dash_random_dash_n_bang_: not a effect:pick-random: ~s",[c]))}};var set_dash_effect_colon_pick_dash_random_dash_update_dash_f_bang_=function(c,b){if(effect_colon_pick_dash_random_question_(c)){c.update_dash_f=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_pick_dash_random_dash_update_dash_f_bang_: not a effect:pick-random: ~s",[c]))}};var effect_colon_pick_dash_random_question_=function(b){return b!=null&&b!=undefined&&b instanceof effect_colon_pick_dash_random};var effect_question_=function(b){return((plt.Kernel.setLastLoc('offset=1069 line=43 span=20 id="effect-struct.ss"')&&effect_colon_none_question_(b))||(plt.Kernel.setLastLoc('offset=1096 line=44 span=20 id="effect-struct.ss"')&&effect_colon_beep_question_(b))||(plt.Kernel.setLastLoc('offset=1123 line=45 span=30 id="effect-struct.ss"')&&effect_colon_play_dash_dtmf_dash_tone_question_(b))||(plt.Kernel.setLastLoc('offset=1160 line=46 span=24 id="effect-struct.ss"')&&effect_colon_send_dash_sms_question_(b))||(plt.Kernel.setLastLoc('offset=1191 line=47 span=26 id="effect-struct.ss"')&&effect_colon_play_dash_sound_question_(b))||(plt.Kernel.setLastLoc('offset=1224 line=48 span=27 id="effect-struct.ss"')&&effect_colon_pause_dash_sound_question_(b))||(plt.Kernel.setLastLoc('offset=1258 line=49 span=26 id="effect-struct.ss"')&&effect_colon_stop_dash_sound_question_(b))||(plt.Kernel.setLastLoc('offset=1291 line=50 span=32 id="effect-struct.ss"')&&effect_colon_set_dash_sound_dash_volume_question_(b))||(plt.Kernel.setLastLoc('offset=1330 line=51 span=34 id="effect-struct.ss"')&&effect_colon_raise_dash_sound_dash_volume_question_(b))||(plt.Kernel.setLastLoc('offset=1371 line=52 span=34 id="effect-struct.ss"')&&effect_colon_lower_dash_sound_dash_volume_question_(b))||(plt.Kernel.setLastLoc('offset=1412 line=53 span=29 id="effect-struct.ss"')&&effect_colon_set_dash_wake_dash_lock_question_(b))||(plt.Kernel.setLastLoc('offset=1448 line=54 span=33 id="effect-struct.ss"')&&effect_colon_release_dash_wake_dash_lock_question_(b))||(plt.Kernel.setLastLoc('offset=1488 line=55 span=29 id="effect-struct.ss"')&&effect_colon_pick_dash_playlist_question_(b))||(plt.Kernel.setLastLoc('offset=1524 line=56 span=27 id="effect-struct.ss"')&&effect_colon_pick_dash_random_question_(b)))};(function(){((function(b){}))(arguments[0]||plt.Kernel.identity)})();var plt=plt||{};plt.world=plt.world||{};plt.world.Kernel=plt.world.Kernel||{};(function(){var p;var v=[];var e;var o=false;var q=function(B){var A=function(){};A.prototype=B;return new A()};var u=[];plt.world.Kernel.addAnnounceListener=function(A){u.push(A)};plt.world.Kernel.removeAnnounceListener=function(B){var A=u.indexOf(B);if(A!=-1){u.splice(A,1)}};plt.world.Kernel.announce=function(A,C){for(var B=0;B<u.length;B++){try{u[B](A,C)}catch(D){}}};var s=function(A){p=A;g()};plt.world.Kernel.updateWorld=function(B){var A=B(p);s(A)};plt.world.Kernel.shutdownWorld=function(){e=true};var g=function(){var A;for(A=0;A<v.length;A++){v[A](p)}};var y=function(A){v.push(A)};var i=function(C){var A=C.charCode||C.keyCode;var B;if(A==37){B="left"}else{if(A==38){B="up"}else{if(A==39){B="right"}else{if(A==40){B="down"}else{B=String.fromCharCode(A)}}}}return B};var h=function(){if(o){clearInterval(o);o=false}e=false;v=[]};var w=function(B,A){if(window.document.getElementById("canvas")!=undefined){return window}var C=window.open("big-bang.html","big-bang");if(C==null){throw new Error("Error: Not allowed to create a new window.")}return C};plt.world.Kernel.bigBang=function(B,H,A,E){plt.Kernel.check(B,plt.Kernel.isNumber,"big-bang","number",1);plt.Kernel.check(H,plt.Kernel.isNumber,"big-bang","number",2);plt.Kernel.arrayEach(args,function(J,K){plt.Kernel.check(J,plt.Kernel.isFunction,"big-bang","handler",K+4)});var F;var G=w(B,H);var C=G.document.getElementById("canvas");C.width=B.toInteger();C.height=H.toInteger();h();var D=new plt.world.config.WorldConfig();for(F=0;F<E.length;F++){D=E[F](D)}D=D.updateAll({changeWorld:plt.world.Kernel.updateWorld,shutdownWorld:plt.world.Kernel.shutdownWorld});plt.world.config.CONFIG=D;if(D.lookup("onKey")){G.onkeydown=function(J){plt.world.stimuli.onKey(J)}}if(D.lookup("onRedraw")){y(function(J){var K=C.getContext("2d");var L=D.lookup("onRedraw")([J]);L.render(K,0,0)})}y(function(J){if(D.lookup("stopWhen")){if(D.lookup("stopWhen")([J])){e=true}}});if(D.lookup("onTick")){l(G,D)}s(A);if(D.lookup("initialEffect")){var I=plt.world.Kernel.applyEffect(D.lookup("initialEffect"));for(var F=0;F<I.length;F++){if(!e){updateWorld(I)}}}};var l=function(B,A){o=B.setInterval(function(){if(e){B.clearTimeout(o);o=false}else{plt.world.stimuli.onTick()}},A.lookup("tickDelay"))};plt.world.Kernel.isKeyEqual=function(C,B){var A=(C.toString().toLowerCase()==B.toString().toLowerCase());return A};plt.world.Kernel.imageWidth=function(A){plt.Kernel.check(A,plt.Kernel.isImage,"image-width","image",1);return plt.types.Rational.makeInstance(A.getWidth(),1)};plt.world.Kernel.imageHeight=function(A){plt.Kernel.check(A,plt.Kernel.isImage,"image-height","image",1);return plt.types.Rational.makeInstance(A.getHeight(),1)};plt.world.Kernel.placeImage=function(C,A,D,B){plt.Kernel.check(C,plt.Kernel.isImage,"place-image","image",1);plt.Kernel.check(A,plt.Kernel.isNumber,"place-image","number",2);plt.Kernel.check(D,plt.Kernel.isNumber,"place-image","number",3);plt.Kernel.check(B,z,"place-image","scene",4);return B.add(C,plt.types.NumberTower.toInteger(A),plt.types.NumberTower.toInteger(D))};plt.world.Kernel.emptyScene=function(B,A){plt.Kernel.check(B,plt.Kernel.isNumber,"empty-scene","number",1);plt.Kernel.check(A,plt.Kernel.isNumber,"empty-scene","number",2);return new c(plt.types.NumberTower.toInteger(B),plt.types.NumberTower.toInteger(A),[])};var t=function(A){return typeof(b.get(A))!="undefined"};plt.world.Kernel.text=function(C,A,B){plt.Kernel.check(C,plt.Kernel.isString,"text","string",1);plt.Kernel.check(A,plt.Kernel.isNumber,"text","number",2);plt.Kernel.check(B,t,"text","color",3);if(b.get(B)){B=b.get(B)}return new d(C,plt.types.NumberTower.toInteger(A),B)};plt.world.Kernel.circle=function(C,B,A){plt.Kernel.check(C,plt.Kernel.isNumber,"circle","number",1);plt.Kernel.check(B,plt.Kernel.isString,"circle","string",2);plt.Kernel.check(A,t,"circle","color",3);if(b.get(A)){A=b.get(A)}return new f(plt.types.NumberTower.toInteger(C),B,A)};plt.world.Kernel.openImageUrl=function(A){plt.Kernel.check(A,plt.Kernel.isString,"open-image-url","string",1);return k.makeInstance(A.toString())};plt.world.Kernel.nwRectangle=function(A,D,C,E){plt.Kernel.check(A,plt.Kernel.isNumber,"nw:rectangle","number",1);plt.Kernel.check(D,plt.Kernel.isNumber,"nw:rectangle","number",2);plt.Kernel.check(C,plt.Kernel.isString,"nw:rectangle","string",3);plt.Kernel.check(E,t,"nw:rectangle","color",4);if(b.get(E)){E=b.get(E)}var B=new n(plt.types.NumberTower.toInteger(A),plt.types.NumberTower.toInteger(D),C,E);return B.updatePinhole(0,0)};plt.world.Kernel.rectangle=function(A,C,B,D){plt.Kernel.check(A,plt.Kernel.isNumber,"rectangle","number",1);plt.Kernel.check(C,plt.Kernel.isNumber,"rectangle","number",2);plt.Kernel.check(B,plt.Kernel.isString,"rectangle","string",3);plt.Kernel.check(D,t,"rectangle","color",4);if(b.get(D)){D=b.get(D)}return new n(plt.types.NumberTower.toInteger(A),plt.types.NumberTower.toInteger(C),B,D)};var x=plt.Kernel.BaseImage;var z=function(A){return((A!=undefined)&&(A!=null)&&(A instanceof c))};var c=function(C,A,B){x.call(this,0,0);this.width=C;this.height=A;this.children=B};c.prototype=q(x.prototype);c.prototype.add=function(B,A,C){return new c(this.width,this.height,this.children.concat([[B,A,C]]))};c.prototype.render=function(D,B,G){var F;var E,C,A;D.clearRect(B-this.pinholeX,G-this.pinholeY,this.width,this.height);for(F=0;F<this.children.length;F++){E=this.children[F][0];C=this.children[F][1];A=this.children[F][2];D.save();E.render(D,C+B-E.pinholeX,A+G-E.pinholeY);D.restore()}};c.prototype.getWidth=function(){return this.width};c.prototype.getHeight=function(){return this.height};var k=function(C,B){x.call(this,0,0);var A=this;this.isLoaded=false;if(B&&B.complete){this.img=B;this.isLoaded=true;this.pinholeX=A.img.width/2;this.pinholeY=A.img.height/2}else{this.img=new Image();this.img.onload=function(){A.isLoaded=true;A.pinholeX=A.img.width/2;A.pinholeY=A.img.height/2};this.img.onerror=function(D){A.img.onerror="";A.img.src="http://www.wescheme.org/images/broken.png"};this.img.src=C}};k.prototype=q(x.prototype);plt.world.Kernel.FileImage=k;var j={};k.makeInstance=function(A){if(!(A in j)){j[A]=new k(A)}return j[A]};k.installInstance=function(B,A){j[B]=new k(B,A)};k.prototype.render=function(B,A,C){B.drawImage(this.img,A,C)};k.prototype.getWidth=function(){return this.img.width};k.prototype.getHeight=function(){return this.img.height};k.prototype.toDomNode=function(){return this.img.cloneNode(true)};var n=function(D,A,C,B){x.call(this,D/2,A/2);this.width=D;this.height=A;this.style=C;this.color=B};n.prototype=q(x.prototype);n.prototype.render=function(B,A,C){B.fillStyle=this.color.toString();if(this.style.toString().toLowerCase()=="outline"){B.strokeRect(A,C,this.width,this.height)}else{B.fillRect(A,C,this.width,this.height)}};n.prototype.getWidth=function(){return this.width};n.prototype.getHeight=function(){return this.height};var d=function(C,B,A){x.call(this,0,0);this.msg=C;this.size=B;this.color=A;this.font="Verdana"};d.prototype=q(x.prototype);d.prototype.render=function(B,A,C){if("mozDrawText" in B){B.mozTextStyle=this.size+"pt "+this.font;B.translate(A,C+this.size);B.fillStyle=this.color;B.mozDrawText(this.msg)}else{B.fillText(this.msg,A,C)}};d.prototype.getWidth=function(){return this.size*this.msg.length};d.prototype.getHeight=function(){return 10};var f=function(A,C,B){x.call(this,A,A);this.radius=A;this.style=C;this.color=B};f.prototype=q(x.prototype);f.prototype.render=function(B,A,C){B.translate(0,0);B.beginPath();B.fillStyle=this.color.toString();B.arc(A+this.radius,C+this.radius,this.radius,0,2*Math.PI,false);if(this.style.toString().toLowerCase()=="outline"){B.stroke()}else{B.fill()}B.closePath()};f.prototype.getWidth=function(){return this.radius*2};f.prototype.getHeight=function(){return this.radius*2};plt.world.Kernel.applyEffect=function(C){var B=[];if(plt.Kernel.empty_question_(C)){}else{if(plt.Kernel.pair_question_(C)){B=B.concat(plt.world.Kernel.applyEffect(C.first()));B=B.concat(plt.world.Kernel.applyEffect(C.rest()))}else{var A=C.run();if(A){B=B.concat(A)}}}return B};effect_colon_none.prototype.run=function(){};effect_colon_beep.prototype.run=function(){plt.platform.Platform.getInstance().getSoundService().beep()};effect_colon_play_dash_dtmf_dash_tone.prototype.run=function(){plt.platform.Platform.getInstance().getSoundService().playDtmfTone(this._fields[0].toInteger(),this._fields[1].toInteger())};effect_colon_send_dash_sms.prototype.run=function(){plt.platform.Platform.getInstance().getSmsService().send(this._fields[0],this._fields[1])};effect_colon_play_dash_sound.prototype.run=function(){if(plt.Kernel.isString(this._fields[0])){plt.platform.Platform.getInstance().getSoundService().playSoundUrl(this._fields[0])}else{if(playlist_dash_sound_question_(this._fields[0])){plt.platform.Platform.getInstance().getSoundService().playPlaylist(this._fields[0]._fields[0])}}};effect_colon_pause_dash_sound.prototype.run=function(){if(plt.Kernel.isString(this._fields[0])){plt.platform.Platform.getInstance().getSoundService().pauseSoundUrl(this._fields[0])}else{if(playlist_dash_sound_question_(this._fields[0])){plt.platform.Platform.getInstance().getSoundService().pausePlaylist(this._fields[0]._fields[0])}}};effect_colon_stop_dash_sound.prototype.run=function(){if(plt.Kernel.isString(this._fields[0])){plt.platform.Platform.getInstance().getSoundService().stopSoundUrl(this._fields[0])}else{if(playlist_dash_sound_question_(this._fields[0])){plt.platform.Platform.getInstance().getSoundService().stopPlaylist(this._fields[0]._fields[0])}}};effect_colon_set_dash_sound_dash_volume.prototype.run=function(){plt.platform.Platform.getInstance().getSoundService().setVolume(this._fields[0].toInteger())};effect_colon_raise_dash_sound_dash_volume.prototype.run=function(){plt.platform.Platform.getInstance().getSoundService.raiseVolume()};effect_colon_lower_dash_sound_dash_volume.prototype.run=function(){plt.platform.Platform.getInstance().getSoundService.lowerVolume()};effect_colon_set_dash_wake_dash_lock.prototype.run=function(){plt.platform.Platform.getInstance().getPowerService().setWakeLock(this._fields[0].toInteger())};effect_colon_release_dash_wake_dash_lock.prototype.run=function(){plt.platform.Platform.getInstance().getPowerService().releaseWakeLock()};effect_colon_pick_dash_playlist.prototype.run=function(){var A=this._fields[0];var B=function(D){var C=make_dash_playlist_dash_sound(D);setTimeout(function(){var E=plt.world.config.CONFIG.lookup("changeWorld");E(function(F){return A([F,C])})},0)};plt.platform.Platform.getInstance().getPickPlaylistService().pickPlaylist(B)};effect_colon_pick_dash_random.prototype.run=function(){var B=plt.types.Rational.makeInstance(Math.floor(plt.types.NumberTower.toInteger(this._fields[0])*Math.random()),1);var A=this._fields[1];return function(C){return A([C,B])}};var m=function(){this.colors={}};m.prototype.put=function(B,A){this.colors[B]=A};m.prototype.get=function(A){return this.colors[A.toString().toUpperCase()]};var r=function(C,B,A){this.r=C;this.g=B;this.b=A};r.prototype.toString=function(){return"rgb("+this.r+","+this.g+","+this.b+")"};var b=new m();b.put("ORANGE",new r(255,165,0));b.put("RED",new r(255,0,0));b.put("ORANGERED",new r(255,69,0));b.put("TOMATO",new r(255,99,71));b.put("DARKRED",new r(139,0,0));b.put("RED",new r(255,0,0));b.put("FIREBRICK",new r(178,34,34));b.put("CRIMSON",new r(220,20,60));b.put("DEEPPINK",new r(255,20,147));b.put("MAROON",new r(176,48,96));b.put("INDIAN RED",new r(205,92,92));b.put("INDIANRED",new r(205,92,92));b.put("MEDIUM VIOLET RED",new r(199,21,133));b.put("MEDIUMVIOLETRED",new r(199,21,133));b.put("VIOLET RED",new r(208,32,144));b.put("VIOLETRED",new r(208,32,144));b.put("LIGHTCORAL",new r(240,128,128));b.put("HOTPINK",new r(255,105,180));b.put("PALEVIOLETRED",new r(219,112,147));b.put("LIGHTPINK",new r(255,182,193));b.put("ROSYBROWN",new r(188,143,143));b.put("PINK",new r(255,192,203));b.put("ORCHID",new r(218,112,214));b.put("LAVENDERBLUSH",new r(255,240,245));b.put("SNOW",new r(255,250,250));b.put("CHOCOLATE",new r(210,105,30));b.put("SADDLEBROWN",new r(139,69,19));b.put("BROWN",new r(132,60,36));b.put("DARKORANGE",new r(255,140,0));b.put("CORAL",new r(255,127,80));b.put("SIENNA",new r(160,82,45));b.put("ORANGE",new r(255,165,0));b.put("SALMON",new r(250,128,114));b.put("PERU",new r(205,133,63));b.put("DARKGOLDENROD",new r(184,134,11));b.put("GOLDENROD",new r(218,165,32));b.put("SANDYBROWN",new r(244,164,96));b.put("LIGHTSALMON",new r(255,160,122));b.put("DARKSALMON",new r(233,150,122));b.put("GOLD",new r(255,215,0));b.put("YELLOW",new r(255,255,0));b.put("OLIVE",new r(128,128,0));b.put("BURLYWOOD",new r(222,184,135));b.put("TAN",new r(210,180,140));b.put("NAVAJOWHITE",new r(255,222,173));b.put("PEACHPUFF",new r(255,218,185));b.put("KHAKI",new r(240,230,140));b.put("DARKKHAKI",new r(189,183,107));b.put("MOCCASIN",new r(255,228,181));b.put("WHEAT",new r(245,222,179));b.put("BISQUE",new r(255,228,196));b.put("PALEGOLDENROD",new r(238,232,170));b.put("BLANCHEDALMOND",new r(255,235,205));b.put("MEDIUM GOLDENROD",new r(234,234,173));b.put("MEDIUMGOLDENROD",new r(234,234,173));b.put("PAPAYAWHIP",new r(255,239,213));b.put("MISTYROSE",new r(255,228,225));b.put("LEMONCHIFFON",new r(255,250,205));b.put("ANTIQUEWHITE",new r(250,235,215));b.put("CORNSILK",new r(255,248,220));b.put("LIGHTGOLDENRODYELLOW",new r(250,250,210));b.put("OLDLACE",new r(253,245,230));b.put("LINEN",new r(250,240,230));b.put("LIGHTYELLOW",new r(255,255,224));b.put("SEASHELL",new r(255,245,238));b.put("BEIGE",new r(245,245,220));b.put("FLORALWHITE",new r(255,250,240));b.put("IVORY",new r(255,255,240));b.put("GREEN",new r(0,255,0));b.put("LAWNGREEN",new r(124,252,0));b.put("CHARTREUSE",new r(127,255,0));b.put("GREEN YELLOW",new r(173,255,47));b.put("GREENYELLOW",new r(173,255,47));b.put("YELLOW GREEN",new r(154,205,50));b.put("YELLOWGREEN",new r(154,205,50));b.put("MEDIUM FOREST GREEN",new r(107,142,35));b.put("OLIVEDRAB",new r(107,142,35));b.put("MEDIUMFORESTGREEN",new r(107,142,35));b.put("DARK OLIVE GREEN",new r(85,107,47));b.put("DARKOLIVEGREEN",new r(85,107,47));b.put("DARKSEAGREEN",new r(143,188,139));b.put("LIME",new r(0,255,0));b.put("DARK GREEN",new r(0,100,0));b.put("DARKGREEN",new r(0,100,0));b.put("LIME GREEN",new r(50,205,50));b.put("LIMEGREEN",new r(50,205,50));b.put("FOREST GREEN",new r(34,139,34));b.put("FORESTGREEN",new r(34,139,34));b.put("SPRING GREEN",new r(0,255,127));b.put("SPRINGGREEN",new r(0,255,127));b.put("MEDIUM SPRING GREEN",new r(0,250,154));b.put("MEDIUMSPRINGGREEN",new r(0,250,154));b.put("SEA GREEN",new r(46,139,87));b.put("SEAGREEN",new r(46,139,87));b.put("MEDIUM SEA GREEN",new r(60,179,113));b.put("MEDIUMSEAGREEN",new r(60,179,113));b.put("AQUAMARINE",new r(112,216,144));b.put("LIGHTGREEN",new r(144,238,144));b.put("PALE GREEN",new r(152,251,152));b.put("PALEGREEN",new r(152,251,152));b.put("MEDIUM AQUAMARINE",new r(102,205,170));b.put("MEDIUMAQUAMARINE",new r(102,205,170));b.put("TURQUOISE",new r(64,224,208));b.put("LIGHTSEAGREEN",new r(32,178,170));b.put("MEDIUM TURQUOISE",new r(72,209,204));b.put("MEDIUMTURQUOISE",new r(72,209,204));b.put("HONEYDEW",new r(240,255,240));b.put("MINTCREAM",new r(245,255,250));b.put("ROYALBLUE",new r(65,105,225));b.put("DODGERBLUE",new r(30,144,255));b.put("DEEPSKYBLUE",new r(0,191,255));b.put("CORNFLOWERBLUE",new r(100,149,237));b.put("STEEL BLUE",new r(70,130,180));b.put("STEELBLUE",new r(70,130,180));b.put("LIGHTSKYBLUE",new r(135,206,250));b.put("DARK TURQUOISE",new r(0,206,209));b.put("DARKTURQUOISE",new r(0,206,209));b.put("CYAN",new r(0,255,255));b.put("AQUA",new r(0,255,255));b.put("DARKCYAN",new r(0,139,139));b.put("TEAL",new r(0,128,128));b.put("SKY BLUE",new r(135,206,235));b.put("SKYBLUE",new r(135,206,235));b.put("CADET BLUE",new r(96,160,160));b.put("CADETBLUE",new r(95,158,160));b.put("DARK SLATE GRAY",new r(47,79,79));b.put("DARKSLATEGRAY",new r(47,79,79));b.put("LIGHTSLATEGRAY",new r(119,136,153));b.put("SLATEGRAY",new r(112,128,144));b.put("LIGHT STEEL BLUE",new r(176,196,222));b.put("LIGHTSTEELBLUE",new r(176,196,222));b.put("LIGHT BLUE",new r(173,216,230));b.put("LIGHTBLUE",new r(173,216,230));b.put("POWDERBLUE",new r(176,224,230));b.put("PALETURQUOISE",new r(175,238,238));b.put("LIGHTCYAN",new r(224,255,255));b.put("ALICEBLUE",new r(240,248,255));b.put("AZURE",new r(240,255,255));b.put("MEDIUM BLUE",new r(0,0,205));b.put("MEDIUMBLUE",new r(0,0,205));b.put("DARKBLUE",new r(0,0,139));b.put("MIDNIGHT BLUE",new r(25,25,112));b.put("MIDNIGHTBLUE",new r(25,25,112));b.put("NAVY",new r(36,36,140));b.put("BLUE",new r(0,0,255));b.put("INDIGO",new r(75,0,130));b.put("BLUE VIOLET",new r(138,43,226));b.put("BLUEVIOLET",new r(138,43,226));b.put("MEDIUM SLATE BLUE",new r(123,104,238));b.put("MEDIUMSLATEBLUE",new r(123,104,238));b.put("SLATE BLUE",new r(106,90,205));b.put("SLATEBLUE",new r(106,90,205));b.put("PURPLE",new r(160,32,240));b.put("DARK SLATE BLUE",new r(72,61,139));b.put("DARKSLATEBLUE",new r(72,61,139));b.put("DARKVIOLET",new r(148,0,211));b.put("DARK ORCHID",new r(153,50,204));b.put("DARKORCHID",new r(153,50,204));b.put("MEDIUMPURPLE",new r(147,112,219));b.put("CORNFLOWER BLUE",new r(68,64,108));b.put("MEDIUM ORCHID",new r(186,85,211));b.put("MEDIUMORCHID",new r(186,85,211));b.put("MAGENTA",new r(255,0,255));b.put("FUCHSIA",new r(255,0,255));b.put("DARKMAGENTA",new r(139,0,139));b.put("VIOLET",new r(238,130,238));b.put("PLUM",new r(221,160,221));b.put("LAVENDER",new r(230,230,250));b.put("THISTLE",new r(216,191,216));b.put("GHOSTWHITE",new r(248,248,255));b.put("WHITE",new r(255,255,255));b.put("WHITESMOKE",new r(245,245,245));b.put("GAINSBORO",new r(220,220,220));b.put("LIGHT GRAY",new r(211,211,211));b.put("LIGHTGRAY",new r(211,211,211));b.put("SILVER",new r(192,192,192));b.put("GRAY",new r(190,190,190));b.put("DARK GRAY",new r(169,169,169));b.put("DARKGRAY",new r(169,169,169));b.put("DIM GRAY",new r(105,105,105));b.put("DIMGRAY",new r(105,105,105));b.put("BLACK",new r(0,0,0))})();if(typeof(plt)=="undefined"){var plt={}}plt.Jsworld={};(function(){var ab=plt.Jsworld;var e=false;function J(){}var at=new J();var V=[];var al=[];ab.shutdown=function(){while(al.length>0){var p=al.pop();if(p){p.pause()}}q()};function E(p){V.push(p)}function ai(aH){var p=V.indexOf(aH);if(p!=-1){V.splice(p,1)}}function q(){at=new J();V=[]}function L(aJ){var p=at;try{at=aJ(at)}catch(aI){return}if(p!=at){for(var aH=0;aH<V.length;aH++){try{V[aH](at,p)}catch(aI){at=p;throw aI}}}}ab.change_world=L;Number.prototype.NaN0=function(){return isNaN(this)?0:this};function H(aI){var aH=0;var p=0;while(aI.offsetParent){aH+=aI.offsetLeft+(aI.currentStyle?(parseInt(aI.currentStyle.borderLeftWidth)).NaN0():0);p+=aI.offsetTop+(aI.currentStyle?(parseInt(aI.currentStyle.borderTopWidth)).NaN0():0);aI=aI.offsetParent}aH+=aI.offsetLeft+(aI.currentStyle?(parseInt(aI.currentStyle.borderLeftWidth)).NaN0():0);p+=aI.offsetTop+(aI.currentStyle?(parseInt(aI.currentStyle.borderTopWidth)).NaN0():0);return{x:aH,y:p}}ab.getPosition=H;var Y=0;function n(){return Y++}ab.gensym=n;function I(aH,aJ){var p=new Array(aH.length);for(var aI=0;aI<aH.length;aI++){p[aI]=aJ(aH[aI])}return p}ab.map=I;function b(aH,aJ){var p=[];for(var aI=0;aI<aH.length;aI++){p=p.concat(aJ(aH[aI]))}return p}function m(aH,aJ){var p=new Array(aH.length);for(var aI=0;aI<aH.length;aI++){p[aI]=aJ(aH[aI],aI)}return p}ab.mapi=m;function v(aH,p,aJ){for(var aI=0;aI<aH.length;aI++){p=aJ(aH[aI],p)}return p}ab.fold=v;function an(aJ,aH){var p={};for(var aI in aJ){p[aI]=aJ[aI]}for(var aI in aH){p[aI]=aH[aI]}return p}ab.augment=an;function O(aK,aI,aH){var p={};for(var aJ in aK){p[aJ]=aK[aJ]}p[aI]=aH;return p}ab.assoc_cons=O;function ag(aH,p){return aH.concat([p])}ab.cons=ag;function U(aH,p){return aH.concat(p)}ab.append=U;function K(aJ,aH){var aI=[];for(var p=0;p<aJ.length;p++){aI.push([aJ[p],aH[p]])}return aI}ab.array_join=K;function o(aI,aH){for(var p=0;p<aI.length;p++){if(aI[p]===aH){return aI.slice(0,p).concat(aI.slice(p+1))}}return aI}ab.removeq=o;function x(aI,aH){for(var p=0;p<aI.length;p++){if(aH(aI[p])){return aI.slice(0,p).concat(aI.slice(p+1))}}return aI}ab.removef=x;function P(aI,aH){for(var p=0;p<aI.length;p++){if(aH(aI[p])){return aI.slice(0,p).concat(P(aI.slice(p+1),aH))}}return aI}ab.filter=P;function aC(aI,aH){var aJ={};for(var p in aI){if(p!=aH){aJ[p]=aI[p]}}return aJ}ab.without=aC;function k(aH,p){for(var aI=0;aI<aH.length;aI++){if(aH[aI]===p){return true}}return false}ab.memberq=k;function am(aH,p){for(var aI=0;aI<aH.length;aI++){if(aH[aI]==p){return true}}return false}ab.member=am;function N(p){return p[0]}ab.head=N;function T(p){return p.slice(1,p.length)}ab.tail=T;function aw(aH){var p=[aH];for(var aI=aH.firstChild;aI!=null;aI=aI.nextSibling){p.push(aw(aI))}return p}ab.node_to_tree=aw;function i(p){var aH=[p.node];for(var aI=0;aI<p.children.length;aI++){aH=aH.concat(i(p.children[aI]))}return aH}function ay(aH,p){return(aH&&p&&aH===p)}function d(aH,p){return !ay(aH,p)}function X(p){var aH=[];for(var aI=0;aI<p.children.length;aI++){aH.push({relation:"parent",parent:p.node,child:p.children[aI].node})}for(var aI=0;aI<p.children.length-1;aI++){aH.push({relation:"neighbor",left:p.children[aI].node,right:p.children[aI+1].node})}for(var aI=0;aI<p.children.length;aI++){aH=aH.concat(X(p.children[aI]))}return aH}function ar(p,aH){p.appendChild(aH);if(aH.afterAttach){aH.afterAttach()}}function af(aH,aQ,aK){for(var aT=0;aT<aK.length;aT++){if(aK[aT].relation=="parent"){var aN=aK[aT].parent,aL=aK[aT].child;if(d(aL.parentNode,aN)){ar(aN,aL)}else{}}}for(;;){var aV=false;for(var aT=0;aT<aK.length;aT++){if(aK[aT].relation=="neighbor"){var aJ=aK[aT].left,aW=aK[aT].right;if(d(aJ.nextSibling,aW)){aJ.parentNode.insertBefore(aJ,aW);aV=true}}}if(!aV){break}}var aM;function aI(a0,aZ){var aY=a0.compareDocumentPosition(aZ);if(aY&a0.DOCUMENT_POSITION_CONTAINED_BY){return 1}if(aY&a0.DOCUMENT_POSITION_CONTAINS){return -1}if(aY&a0.DOCUMENT_POSITION_FOLLOWING){return -1}if(aY&a0.DOCUMENT_POSITION_PRECEDING){return 1}return 0}try{aM=aQ.concat(aH).sort(aI)}catch(aU){aM=null}var aR=aH,aS=aH.parentNode;while(aR!=aS){for(;;){if(aR.firstChild==null){break}aR=aR.firstChild}while(aR!=aS){var aP=aR.nextSibling,aN=aR.parentNode;var aO=false;var p=undefined;if(aM!=null){while(aM.length>0&&aI(aR,aM[0])>=0){var aX=aM.shift();if(ay(aX,aR)){aO=true;p=aX;break}}}else{for(var aT=0;aT<aQ.length;aT++){if(ay(aQ[aT],aR)){aO=true;p=aQ[aT];break}}}if(!aO){while(aR.firstChild!=null){ar(aR.parentNode,aR.firstChild)}aP=aR.nextSibling;aR.parentNode.removeChild(aR)}else{ah(aR,p)}if(aP==null){aR=aN}else{aR=aP;break}}}aa(aQ)}function ah(aH,p){}function ap(aH,aI){for(var p=0;p<aI.length;p++){aH.style.setProperty(aI[p].attrib,aI[p].values.join(" "),"")}}function j(aH,p){if(p.id.match(/^\./)){return("class" in aH&&am(aH["class"].split(/\s+/),p.id.substring(1)))}else{return("id" in aH&&aH.id==p.id)}}function aE(p,aJ){for(var aI=0;aI<p.length;aI++){if("style" in p[aI]){p[aI].style.cssText=""}}for(var aI=0;aI<aJ.length;aI++){if("id" in aJ[aI]){for(var aH=0;aH<p.length;aH++){if(j(p[aH],aJ[aI])){ap(p[aH],aJ[aI].attribs)}}}else{ap(aJ[aI].node,aJ[aI].attribs)}}}function aa(p){for(var aH=0;aH<p.length;aH++){if(p[aH].onWorldChange){p[aH].onWorldChange(at)}}}function z(aK,p,aM,aJ,aL){if(p instanceof J){var aH=B(aJ(aK));var aI=i(aH);af(aM,aI,X(aH));aE(aI,D(aL(aK)));return}else{aD(function(){var aS=aJ(p);var aO=aJ(aK);var aN=aL(p);var aP=aL(aK);var aQ=B(aO);var aR=i(aQ);if(aS!==aO){af(aM,aR,X(aQ));aE(aR,D(aP))}else{if(aN!==aP){aE(aR,D(aP))}}})}}function aD(aH){var p;if(aB()){p=aq();aH();p.restore()}else{aH()}}function A(){this.focused=e;this.selectionStart=e.selectionStart;this.selectionEnd=e.selectionEnd}A.prototype.restore=function(){if(this.focused.parentNode){this.focused.selectionStart=this.selectionStart;this.focused.selectionEnd=this.selectionEnd;this.focused.focus()}else{if(this.focused.id){var p=document.getElementById(this.focused.id);if(p){p.selectionStart=this.selectionStart;p.selectionEnd=this.selectionEnd;p.focus()}}}};function aB(){return e!=undefined}function aq(){return new A()}function G(aJ,aH,aI,p,aK){this.top=aJ;this.world=aH;this.handlers=p;this.handlerCreators=aI;this.attribs=aK}G.prototype.restart=function(){M(this.top,this.world,this.handlerCreators,this.attribs)};G.prototype.pause=function(){for(var p=0;p<this.handlers.length;p++){if(this.handlers[p] instanceof S){}else{this.handlers[p].onUnregister(top)}}};function M(aO,aL,aJ,p){q();var aH=I(aJ,function(aQ){return aQ()});if(al.length>0){al[al.length-1].pause()}var aN=new G(aO,aL,aJ,aH,p);al.push(aN);function aP(aQ,aR){aN.world=aQ}E(aP);var aK=new S(function(aQ){return false},function(aQ){});for(var aI=0;aI<aH.length;aI++){if(aH[aI] instanceof S){aK=aH[aI]}else{aH[aI].onRegister(aO)}}function aM(aR,aT){if(aK.test(aR)){aK.receiver(at);var aQ=al.pop();if(aQ){aQ.pause()}if(al.length>0){var aS=al.pop();aS.restart()}}}E(aM);aA(aO,p);L(function(aQ){return aL})}ab.big_bang=M;function ac(p,aH){return function(){var aI={watchId:-1,onRegister:function(aJ){aI.watchId=setInterval(function(){L(aH)},p)},onUnregister:function(aJ){clearInterval(aI.watchId)}};return aI}}ab.on_tick=ac;function r(aI,aH){function p(aJ){var aK=aI(aJ);s(aK,aK);return aK}return function(){var aJ={_top:null,_listener:function(aK,aL){z(aK,aL,aJ._top,p,aH)},onRegister:function(aK){aJ._top=aK;E(aJ._listener)},onUnregister:function(aK){ai(aJ._listener)}};return aJ}}ab.on_draw=r;function S(aH,p){this.test=aH;this.receiver=p}function aj(aH,p){return function(){if(p==undefined){p=function(aI){}}return new S(aH,p)}}ab.stop_when=aj;function w(aH){var p=function(aJ,aI){aH(aJ)};return function(){return{onRegister:function(aI){E(p)},onUnregister:function(aI){ai(p)}}}}ab.on_world_change=w;function Q(aI,p,aH){if(aI.addEventListener){aI.addEventListener(p,aH,false)}else{aI.attachevent("on"+event,aH,false)}}function ax(aH,p,aI){Q(aH,p,function(aJ){L(function(aK){return aI(aK,aJ)})})}function ak(aH,p,aI){Q(aH,p,function(aJ){setTimeout(function(){L(function(aK){return aI(aK,aJ)})},0)})}function t(p){Q(p,"focus",function(aH){e=p});Q(p,"blur",function(aH){e=undefined});return p}function B(p){if(p.length==undefined){return{node:p,children:[]}}else{return{node:p[0],children:I(p.slice(1),B)}}}function ad(p){return{attrib:p[0],values:p.slice(1)}}function l(p){var aH=I(p.slice(1),ad);if(typeof p[0]=="string"){return[{id:p[0],attribs:aH}]}else{if("length" in p[0]){return I(p[0],function(aI){return{id:aI,attribs:aH}})}else{return[{node:p[0],attribs:aH}]}}}function D(p){return b(p,l)}function F(p){return(p.nodeType==Node.TEXT_NODE)}function ae(p){return(p.nodeType==Node.ELEMENT_NODE)}var h=function(p,aH){throw new az(plt.Kernel.format("Expected a non-empty array, received ~s within ~s",[p,aH]),p)};function s(p,aI){if(!p instanceof Array){h(p,aI)}if(p.length==0){h(p,aI)}if(F(p[0])){if(p.length>1){throw new az(plt.Kernel.format("Text node ~s can not have children",[p]),p)}}else{if(ae(p[0])){for(var aH=1;aH<p.length;aH++){s(p[aH],p)}}else{throw new az(plt.Kernel.format("expected a Text or an Element, received ~s within ~s",[p,aI]),p[0])}}}function az(aH,p){this.msg=aH;this.elt=p}az.prototype.toString=function(){return"on-draw: "+this.msg};function aA(p,aH){if(aH){for(a in aH){if(typeof aH[a]=="function"){ax(p,a,aH[a])}else{p[a]=aH[a]}}}return p}function W(p){return t(aA(document.createElement("p"),p))}ab.p=W;function C(p){return t(aA(document.createElement("div"),p))}ab.div=C;function g(p,aH){var aI=document.createElement("button");ax(aI,"click",p);return t(aA(aI,aH))}ab.button=g;var u=function(p){p.addEventListener("click",function(aH){aH.stopPropagation()},false);return p};function aF(aH,aM,aL){var aN=document.createElement("input");aN.type=aH;function aK(aO,aP){return aM(aO,aN.value)}ak(aN,"keypress",aK);var p=1000;var aJ=aN.value;var aI=setInterval(function(){if(!aN.parentNode){clearInterval(aI);return}if(aJ!=aN.value){aJ=aN.value;L(function(aO){return aM(aO,aN.value)})}},p);return u(t(aA(aN,aL)))}ab.input=aF;function c(aI,aK,aJ){var aL=document.createElement("input");aL.type="text";var aH=undefined;function p(aM,aN){return aK(aM,aL.value)}ax(aL,"keypress",p);return u(t(aA(aL,aJ)))}function ao(p,aH){return t(aA(document.createTextNode(p),aH))}ab.text=ao;function av(aJ,aH,aI){var aK=document.createElement("select");for(var p=0;p<aH.length;p++){ar(aK,R({value:aH[p]}))}ax(aK,"change",aI);return t(aA(aK,aJ))}ab.select=av;function R(p){return t(aA(document.createElement("option"),p))}ab.option=R;function f(p){return t(aA(document.createElement("textarea"),p))}ab.textarea=f;function au(p){return t(aA(document.createElement("h1"),p))}ab.h1=au;function aG(p){return t(aA(document.createElement("canvas"),p))}ab.canvas=aG;function Z(aH,p){var aI=document.createElement("img");aI.src=aH;return t(aA(aI,p))}ab.img=Z;function y(p,aH){return t(aA(p,aH))}ab.raw_node=y})();var plt=plt||{};plt.world=plt.world||{};plt.world.MobyJsworld={};(function(){var e=plt.world.MobyJsworld;var l=plt.Jsworld;var g=plt.Kernel.MobyTypeError;var j=function(n){return typeof(n)=="function"};var k=function(o){var p=o;if(plt.Kernel.empty_question_(p)){return[]}else{if(plt.Kernel.pair_question_(p)){var n=[];while(!p.isEmpty()){n.push(k(p.first()));p=p.rest()}return n}else{return o}}};var h=function(o){var n={};while(!o.isEmpty()){var p=o.first().first();var q=o.first().rest().first();n[p]=q;o=o.rest()}return n};var m=function(){if(window.document.getElementById("jsworld-div")!=undefined){return window}var n=window.open("big-bang.html","big-bang");if(n==null){throw new Error("Error: Not allowed to create a new window.")}return n};e.makeToplevelNode=function(){return m().document.getElementById("jsworld-div")};var f=function(n){return(n instanceof plt.types.Cons)||(n instanceof plt.types.Empty)};e.printWorldHook=function(p,o){var n;if(o.lastChild==null){n=plt.Kernel.toDomNode(p);o.appendChild(n)}else{n=plt.Kernel.toDomNode(p);o.replaceChild(n,o.lastChild)}if(n.afterAttach){n.afterAttach()}};var i=function(o){var n;if(o.target){n=o.target}else{if(o.srcElement){n=o.srcElement}}if(n.nodeType==3){n=n.parentNode}return n};var d=function(n,s,p){if(plt.Kernel.pair_question_(n)){var o=plt.Kernel.first(n);var r=plt.Kernel.rest(n);if(o.nodeType==Node.TEXT_NODE&&!plt.Kernel.empty_question_(r)){throw new g(plt.Kernel.format("on-draw: the text node ~s must not have children.  It has ~s",[o,r]))}var q=2;while(!plt.Kernel.empty_question_(r)){d(plt.Kernel.first(r),n,q);r=plt.Kernel.rest(r);q++}}else{throw new g(plt.Kernel.format("on-draw: expected a dom-s-expression, but received ~s instead.~a",[n,(p!=undefined?plt.Kernel.format("the ~a element within ~s",[p,s]):"")]))}};e.bigBang=function(w,r){var o=plt.types.Empty.EMPTY;plt.Kernel.arrayEach(r,function(B,C){plt.Kernel.check(B,function(D){return j(D)||f(D)},"js-big-bang","handler or attribute list",C+2)});var x=e.makeToplevelNode();x.tabIndex=0;x.addEventListener("click",function(B){B.preventDefault();B.stopPropagation();return false},false);var q=new plt.world.config.WorldConfig();for(var v=0;v<r.length;v++){if(f(r[v])){o=r[v]}else{if(j(r[v])){q=r[v](q)}}}q=q.updateAll({changeWorld:e.updateWorld,shutdownWorld:e.shutdownWorld});plt.world.config.CONFIG=q;var p=[];if(q.lookup("onDraw")){var z=function(C){var D=q.lookup("onDraw")([C]);plt.Kernel.setLastLoc(undefined);d(D,D,undefined);var B=[x,k(D)];return B};var y=function(C){var B=k(q.lookup("onDrawCss")([C]));plt.Kernel.setLastLoc(undefined);return B};p.push(l.on_draw(z,y))}else{if(q.lookup("onRedraw")){var u=undefined;var n=undefined;var z=function(D){var F=q.lookup("onRedraw")([D]);if(F!=null&&F!=undefined&&F instanceof plt.Kernel.BaseImage){var E=plt.world.Kernel.imageWidth(F).toInteger();var B=plt.world.Kernel.imageHeight(F).toInteger();if(!u){u=plt.Kernel._makeCanvas(E,B);n=l.node_to_tree(u)}u.width=E;u.height=B;u.style.setProperty("width",u.width+"px","");u.style.setProperty("height",u.height+"px","");var C=u.getContext("2d");u.style.setProperty("display","none","");document.body.appendChild(u);F.render(C,0,0);document.body.removeChild(u);u.style.removeProperty("display");return[x,n]}else{return[x,l.node_to_tree(plt.Kernel.toDomNode(F))]}};var y=function(B){return[]};p.push(l.on_draw(z,y))}else{p.push(l.on_world_change(function(B){e.printWorldHook(B,x)}))}}if(q.lookup("tickDelay")){var s=function(B){setTimeout(function(){plt.world.stimuli.onTick()},0);return B};var t=q.lookup("tickDelay");p.push(l.on_tick(t,s))}if(q.lookup("stopWhen")){p.push(l.stop_when(function(B){return q.lookup("stopWhen")([B])}))}if(q.lookup("onKey")){x.addEventListener("keydown",function(B){if(i(B)===x){plt.world.stimuli.onKey(B);B.preventDefault();B.stopPropagation();return false}else{return true}},false);x.addEventListener("keypress",function(B){if(i(B)===x){B.preventDefault();B.stopPropagation();return false}else{return true}},false);x.focus()}if(q.lookup("initialEffect")){var A=plt.world.Kernel.applyEffect(q.lookup("initialEffect"));for(var v=0;v<A.length;v++){if(q.lookup("stopWhen")&&q.lookup("stopWhen")([w])){break}else{w=A[v](w)}}}return l.big_bang(x,w,p,h(o))};var c=function(p){var n=plt.types.Empty.EMPTY;for(var o=0;o<p.length;o++){n=plt.types.Cons.makeInstance(p[length-o-1],n)}return n};e.updateWorld=function(o){var n=function(p){try{return o(p)}catch(q){plt.Kernel.reportError(q);plt.Kernel.reportError("Shutting down jsworld computations");plt.world.stimuli.onShutdown();return p}};l.change_world(n)};e.shutdownWorld=function(){l.shutdown()};var b=function(n){if(n.length==0){return[]}if(n.length==1){return h(n[0])}else{throw new Error()}};e.p=function(n){var p=b(n);var o=l.p(p);o.toWrittenString=function(){return plt.Kernel.format("(js-p)",[])};o.toDisplayedString=o.toWrittenString;o.toDomNode=function(){return o};return o};e.div=function(n){var p=b(n);var o=l.div(p);o.toWrittenString=function(){return plt.Kernel.format("(js-div)",[])};o.toDisplayedString=o.toWrittenString;o.toDomNode=function(){return o};return o};e.button=function(q,n){var p=function(r){return make_dash_effect_colon_none()};var o=e.buttonStar(q,p,n);o.toWrittenString=function(){return"(js-button ...)"};o.toDisplayedString=o.toWrittenString;o.toDomNode=function(){return o};return o};e.buttonStar=function(n,r,p){var s=b(p);var o=function(v,t){try{var u=r([v]);var x=n([v]);plt.world.Kernel.applyEffect(u);return x}catch(w){plt.Kernel.reportError(w);return v}};var q=l.button(o,s);q.toWrittenString=function(){return"(js-button ...)"};q.toDisplayedString=q.toWrittenString;q.toDomNode=function(){return q};return q};e.input=function(o,r,n){plt.Kernel.check(o,plt.Kernel.isString,"js-input","string",1);plt.Kernel.check(r,plt.Kernel.isFunction,"js-input","(world string -> world)",1);var q=b(n);var p=l.input(o,function(s,t){return r([s,t])},q);p.toWrittenString=function(){return"(js-input ...)"};p.toDisplayedString=p.toWrittenString;p.toDomNode=function(){return p};return p};e.get_dash_input_dash_value=function(n){plt.Kernel.check(n,function(o){return(plt.Kernel.isString(n)||n.nodeType==Node.ELEMENT_NODE)},"get-input-value","dom-node",1);if(plt.Kernel.isString(n)){return plt.types.String.makeInstance(document.getElementById(n).value||"")}else{return plt.types.String.makeInstance(n.value||"")}};e.img=function(q,n){var p=b(n);var o=l.img(q,p);o.toWrittenString=function(){return"(js-img ...)"};o.toDisplayedString=o.toWrittenString;o.toDomNode=function(){return o};return o};e.text=function(n){var o=l.text(n,[]);o.toWrittenString=function(){return"(js-img ...)"};o.toDisplayedString=o.toWrittenString;o.toDomNode=function(){return o};return o};e.rawNode=function(n,o){var q=b(o);var p=l.raw_node(plt.Kernel.toDomNode(n),q);p.toWrittenString=function(){return"(js-img ...)"};p.toDisplayedString=p.toWrittenString;p.toDomNode=function(){return p};return p}})();var plt=plt||{};plt.world=plt.world||{};(function(){var c={};plt.world.stimuli=c;var g=function(m,j,h){var l=[];e(function(i){var n=[i].concat(h);if(m){var o=m(n);l=b(o)}if(j){return j(n)}else{return i}});for(var k=0;k<l.length;k++){e(l[k])}};c.onTilt=function(k,l,j){var i=d("onTilt");var h=d("onTiltEffect");g(h,i,[f(k),f(l),f(j)])};c.onAcceleration=function(h,l,k){var i=d("onAcceleration");var j=d("onAccelerationEffect");g(j,i,[f(h),f(l),f(k)])};c.onShake=function(){var i=d("onShake");var h=d("onShakeEffect");g(h,i,[])};c.onLocation=function(k,h){var i=d("onLocationChange");var j=d("onLocationChangeEffect");g(j,i,[f(k),f(h)])};c.onKey=function(j){var k=function(o){var m=o.charCode||o.keyCode;var n;if(m==37){n="left"}else{if(m==38){n="up"}else{if(m==39){n="right"}else{if(m==40){n="down"}else{if(m==32){n="space"}else{if(m==13){n="enter"}else{n=String.fromCharCode(m)}}}}}}return n};var i=k(j);var h=d("onKey");var l=d("onKeyEffect");g(l,h,[i])};c.onTick=function(){var i=d("onTick");var h=d("onTickEffect");g(h,i,[])};c.onAnnounce=function(j,m){var l=plt.types.Empty.EMPTY;for(var k=0;k<m.length;k++){l=plt.types.Cons.makeInstance(m[m.length-k-1],l)}var n=d("onAnnounce");var h=d("onAnnounceEffect");g(n,h,[j,l])};c.onShutdown=function(){var h=d("shutdownWorld");if(h){h()}};var f=plt.types.FloatPoint.makeInstance;var d=function(h){return plt.world.config.CONFIG.lookup(h)};var e=function(h){d("changeWorld")(h)};var b=function(h){return plt.world.Kernel.applyEffect(h)}})();var permission_colon_location=function(){plt.Kernel.Struct.call(this,"make-permission:location",[])};permission_colon_location.prototype=new plt.Kernel.Struct();var make_dash_permission_colon_location=function(){return new permission_colon_location()};var permission_colon_location_question_=function(b){return b!=null&&b!=undefined&&b instanceof permission_colon_location};var permission_colon_send_dash_sms=function(){plt.Kernel.Struct.call(this,"make-permission:send-sms",[])};permission_colon_send_dash_sms.prototype=new plt.Kernel.Struct();var make_dash_permission_colon_send_dash_sms=function(){return new permission_colon_send_dash_sms()};var permission_colon_send_dash_sms_question_=function(b){return b!=null&&b!=undefined&&b instanceof permission_colon_send_dash_sms};var permission_colon_receive_dash_sms=function(){plt.Kernel.Struct.call(this,"make-permission:receive-sms",[])};permission_colon_receive_dash_sms.prototype=new plt.Kernel.Struct();var make_dash_permission_colon_receive_dash_sms=function(){return new permission_colon_receive_dash_sms()};var permission_colon_receive_dash_sms_question_=function(b){return b!=null&&b!=undefined&&b instanceof permission_colon_receive_dash_sms};var permission_colon_tilt=function(){plt.Kernel.Struct.call(this,"make-permission:tilt",[])};permission_colon_tilt.prototype=new plt.Kernel.Struct();var make_dash_permission_colon_tilt=function(){return new permission_colon_tilt()};var permission_colon_tilt_question_=function(b){return b!=null&&b!=undefined&&b instanceof permission_colon_tilt};var permission_colon_shake=function(){plt.Kernel.Struct.call(this,"make-permission:shake",[])};permission_colon_shake.prototype=new plt.Kernel.Struct();var make_dash_permission_colon_shake=function(){return new permission_colon_shake()};var permission_colon_shake_question_=function(b){return b!=null&&b!=undefined&&b instanceof permission_colon_shake};var permission_colon_internet=function(){plt.Kernel.Struct.call(this,"make-permission:internet",[])};permission_colon_internet.prototype=new plt.Kernel.Struct();var make_dash_permission_colon_internet=function(){return new permission_colon_internet()};var permission_colon_internet_question_=function(b){return b!=null&&b!=undefined&&b instanceof permission_colon_internet};var permission_colon_telephony=function(){plt.Kernel.Struct.call(this,"make-permission:telephony",[])};permission_colon_telephony.prototype=new plt.Kernel.Struct();var make_dash_permission_colon_telephony=function(){return new permission_colon_telephony()};var permission_colon_telephony_question_=function(b){return b!=null&&b!=undefined&&b instanceof permission_colon_telephony};var permission_colon_wake_dash_lock=function(){plt.Kernel.Struct.call(this,"make-permission:wake-lock",[])};permission_colon_wake_dash_lock.prototype=new plt.Kernel.Struct();var make_dash_permission_colon_wake_dash_lock=function(){return new permission_colon_wake_dash_lock()};var permission_colon_wake_dash_lock_question_=function(b){return b!=null&&b!=undefined&&b instanceof permission_colon_wake_dash_lock};var permission_colon_open_dash_image_dash_url=function(b){plt.Kernel.Struct.call(this,"make-permission:open-image-url",[b]);this.url=b};permission_colon_open_dash_image_dash_url.prototype=new plt.Kernel.Struct();var make_dash_permission_colon_open_dash_image_dash_url=function(b){return new permission_colon_open_dash_image_dash_url(b)};var permission_colon_open_dash_image_dash_url_dash_url=function(b){if(permission_colon_open_dash_image_dash_url_question_(b)){return b.url}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("permission:open-image-url-url: not a permission:open-image-url: ~s",[b]))}};var set_dash_permission_colon_open_dash_image_dash_url_dash_url_bang_=function(c,b){if(permission_colon_open_dash_image_dash_url_question_(c)){c.url=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_permission_colon_open_dash_image_dash_url_dash_url_bang_: not a permission:open-image-url: ~s",[c]))}};var permission_colon_open_dash_image_dash_url_question_=function(b){return b!=null&&b!=undefined&&b instanceof permission_colon_open_dash_image_dash_url};var permission_question_=function(b){return((plt.Kernel.setLastLoc('offset=512 line=17 span=28 id="permission.ss"')&&permission_colon_location_question_(b))||(plt.Kernel.setLastLoc('offset=547 line=18 span=28 id="permission.ss"')&&permission_colon_send_dash_sms_question_(b))||(plt.Kernel.setLastLoc('offset=582 line=19 span=31 id="permission.ss"')&&permission_colon_receive_dash_sms_question_(b))||(plt.Kernel.setLastLoc('offset=620 line=20 span=24 id="permission.ss"')&&permission_colon_tilt_question_(b))||(plt.Kernel.setLastLoc('offset=651 line=21 span=25 id="permission.ss"')&&permission_colon_shake_question_(b))||(plt.Kernel.setLastLoc('offset=683 line=22 span=28 id="permission.ss"')&&permission_colon_internet_question_(b))||(plt.Kernel.setLastLoc('offset=718 line=23 span=29 id="permission.ss"')&&permission_colon_telephony_question_(b))||(plt.Kernel.setLastLoc('offset=754 line=24 span=29 id="permission.ss"')&&permission_colon_wake_dash_lock_question_(b))||(plt.Kernel.setLastLoc('offset=790 line=25 span=34 id="permission.ss"')&&permission_colon_open_dash_image_dash_url_question_(b)))};var PERMISSION_colon_LOCATION;var PERMISSION_colon_SEND_dash_SMS;var PERMISSION_colon_RECEIVE_dash_SMS;var PERMISSION_colon_TILT;var PERMISSION_colon_SHAKE;var PERMISSION_colon_INTERNET;var PERMISSION_colon_TELEPHONY;var PERMISSION_colon_WAKE_dash_LOCK;var permission_dash__greaterthan_string=function(b){return((plt.Kernel.setLastLoc('offset=1465 line=42 span=35 id="permission.ss"')&&permission_colon_location_question_(b))?(plt.types.String.makeInstance("PERMISSION:LOCATION")):((plt.Kernel.setLastLoc('offset=1534 line=44 span=35 id="permission.ss"')&&permission_colon_send_dash_sms_question_(b))?(plt.types.String.makeInstance("PERMISSION:SEND-SMS")):((plt.Kernel.setLastLoc('offset=1603 line=46 span=38 id="permission.ss"')&&permission_colon_receive_dash_sms_question_(b))?(plt.types.String.makeInstance("PERMISSION:RECEIVE-SMS")):((plt.Kernel.setLastLoc('offset=1678 line=48 span=31 id="permission.ss"')&&permission_colon_tilt_question_(b))?(plt.types.String.makeInstance("PERMISSION:TILT")):((plt.Kernel.setLastLoc('offset=1739 line=50 span=32 id="permission.ss"')&&permission_colon_shake_question_(b))?(plt.types.String.makeInstance("PERMISSION:SHAKE")):((plt.Kernel.setLastLoc('offset=1802 line=52 span=35 id="permission.ss"')&&permission_colon_internet_question_(b))?(plt.types.String.makeInstance("PERMISSION:INTERNET")):((plt.Kernel.setLastLoc('offset=1871 line=54 span=36 id="permission.ss"')&&permission_colon_telephony_question_(b))?(plt.types.String.makeInstance("PERMISSION:TELEPHONY")):((plt.Kernel.setLastLoc('offset=1942 line=56 span=36 id="permission.ss"')&&permission_colon_wake_dash_lock_question_(b))?(plt.types.String.makeInstance("PERMISSION:WAKE-LOCK")):((plt.Kernel.setLastLoc('offset=2013 line=58 span=41 id="permission.ss"')&&permission_colon_open_dash_image_dash_url_question_(b))?(plt.Kernel.setLastLoc('offset=2060 line=59 span=84 id="permission.ss"')&&plt.Kernel.format((plt.types.String.makeInstance("PERMISSION:OPEN-IMAGE-URL ~a")),[(plt.Kernel.setLastLoc('offset=2099 line=59 span=44 id="permission.ss"')&&permission_colon_open_dash_image_dash_url_dash_url(b))])):(plt.Kernel.setLastLoc('offset=1454 line=41 span=692 id="permission.ss"')&&plt.Kernel.error((plt.types.Symbol.makeInstance("cond")),(plt.types.String.makeInstance('cond: fell out of cond around "offset=1454 line=41 span=692 id=\\"permission.ss\\""')))))))))))))};var string_dash__greaterthan_permission=function(b){return((plt.Kernel.setLastLoc('offset=2242 line=65 span=38 id="permission.ss"')&&plt.Kernel.string_equal__question_(b,(plt.types.String.makeInstance("PERMISSION:LOCATION")),[]))?PERMISSION_colon_LOCATION:((plt.Kernel.setLastLoc('offset=2312 line=67 span=38 id="permission.ss"')&&plt.Kernel.string_equal__question_(b,(plt.types.String.makeInstance("PERMISSION:SEND-SMS")),[]))?PERMISSION_colon_SEND_dash_SMS:((plt.Kernel.setLastLoc('offset=2387 line=69 span=41 id="permission.ss"')&&plt.Kernel.string_equal__question_(b,(plt.types.String.makeInstance("PERMISSION:RECEIVE-SMS")),[]))?PERMISSION_colon_RECEIVE_dash_SMS:((plt.Kernel.setLastLoc('offset=2463 line=71 span=34 id="permission.ss"')&&plt.Kernel.string_equal__question_(b,(plt.types.String.makeInstance("PERMISSION:TILT")),[]))?PERMISSION_colon_TILT:((plt.Kernel.setLastLoc('offset=2525 line=73 span=35 id="permission.ss"')&&plt.Kernel.string_equal__question_(b,(plt.types.String.makeInstance("PERMISSION:SHAKE")),[]))?PERMISSION_colon_SHAKE:((plt.Kernel.setLastLoc('offset=2589 line=75 span=38 id="permission.ss"')&&plt.Kernel.string_equal__question_(b,(plt.types.String.makeInstance("PERMISSION:INTERNET")),[]))?PERMISSION_colon_INTERNET:((plt.Kernel.setLastLoc('offset=2659 line=77 span=39 id="permission.ss"')&&plt.Kernel.string_equal__question_(b,(plt.types.String.makeInstance("PERMISSION:TELEPHONY")),[]))?PERMISSION_colon_TELEPHONY:((plt.Kernel.setLastLoc('offset=2731 line=79 span=39 id="permission.ss"')&&plt.Kernel.string_equal__question_(b,(plt.types.String.makeInstance("PERMISSION:WAKE-LOCK")),[]))?PERMISSION_colon_WAKE_dash_LOCK:(((plt.Kernel.setLastLoc('offset=2808 line=81 span=82 id="permission.ss"')&&plt.Kernel._greaterthan_((plt.Kernel.setLastLoc('offset=2811 line=81 span=21 id="permission.ss"')&&plt.Kernel.string_dash_length(b)),(plt.Kernel.setLastLoc('offset=2846 line=82 span=43 id="permission.ss"')&&plt.Kernel.string_dash_length((plt.types.String.makeInstance("PERMISSION:OPEN-IMAGE-URL")))),[]))&&(plt.Kernel.setLastLoc('offset=2901 line=83 span=122 id="permission.ss"')&&plt.Kernel.string_equal__question_((plt.Kernel.setLastLoc('offset=2911 line=83 span=63 id="permission.ss"')&&plt.Kernel.substring(b,(plt.types.Rational.makeInstance(0,1)),(plt.Kernel.setLastLoc('offset=2930 line=83 span=43 id="permission.ss"')&&plt.Kernel.string_dash_length((plt.types.String.makeInstance("PERMISSION:OPEN-IMAGE-URL")))))),(plt.types.String.makeInstance("PERMISSION:OPEN-IMAGE-URL")),[])))?(plt.Kernel.setLastLoc('offset=3030 line=85 span=220 id="permission.ss"')&&make_dash_permission_colon_open_dash_image_dash_url((plt.Kernel.setLastLoc('offset=3062 line=85 span=187 id="permission.ss"')&&plt.Kernel.substring(b,(plt.Kernel.setLastLoc('offset=3128 line=86 span=50 id="permission.ss"')&&plt.Kernel.add1((plt.Kernel.setLastLoc('offset=3134 line=86 span=43 id="permission.ss"')&&plt.Kernel.string_dash_length((plt.types.String.makeInstance("PERMISSION:OPEN-IMAGE-URL")))))),(plt.Kernel.setLastLoc('offset=3227 line=87 span=21 id="permission.ss"')&&plt.Kernel.string_dash_length(b)))))):(plt.Kernel.setLastLoc('offset=2231 line=64 span=1021 id="permission.ss"')&&plt.Kernel.error((plt.types.Symbol.makeInstance("cond")),(plt.types.String.makeInstance('cond: fell out of cond around "offset=2231 line=64 span=1021 id=\\"permission.ss\\""')))))))))))))};var permission_dash__greaterthan_android_dash_permissions=function(b){return((plt.Kernel.setLastLoc('offset=3392 line=95 span=35 id="permission.ss"')&&permission_colon_location_question_(b))?(plt.Kernel.setLastLoc('offset=3433 line=96 span=103 id="permission.ss"')&&plt.Kernel.list([(plt.types.String.makeInstance("android.permission.ACCESS_COARSE_LOCATION")),(plt.types.String.makeInstance("android.permission.ACCESS_FINE_LOCATION"))])):((plt.Kernel.setLastLoc('offset=3543 line=98 span=35 id="permission.ss"')&&permission_colon_send_dash_sms_question_(b))?(plt.Kernel.setLastLoc('offset=3584 line=99 span=36 id="permission.ss"')&&plt.Kernel.list([(plt.types.String.makeInstance("android.permission.SEND_SMS"))])):((plt.Kernel.setLastLoc('offset=3627 line=100 span=38 id="permission.ss"')&&permission_colon_receive_dash_sms_question_(b))?(plt.Kernel.setLastLoc('offset=3671 line=101 span=39 id="permission.ss"')&&plt.Kernel.list([(plt.types.String.makeInstance("android.permission.RECEIVE_SMS"))])):((plt.Kernel.setLastLoc('offset=3717 line=102 span=31 id="permission.ss"')&&permission_colon_tilt_question_(b))?(plt.Kernel.setLastLoc('offset=3754 line=103 span=6 id="permission.ss"')&&plt.Kernel.list([])):((plt.Kernel.setLastLoc('offset=3767 line=104 span=32 id="permission.ss"')&&permission_colon_shake_question_(b))?(plt.Kernel.setLastLoc('offset=3805 line=105 span=6 id="permission.ss"')&&plt.Kernel.list([])):((plt.Kernel.setLastLoc('offset=3818 line=106 span=35 id="permission.ss"')&&permission_colon_internet_question_(b))?(plt.Kernel.setLastLoc('offset=3859 line=107 span=36 id="permission.ss"')&&plt.Kernel.list([(plt.types.String.makeInstance("android.permission.INTERNET"))])):((plt.Kernel.setLastLoc('offset=3902 line=108 span=36 id="permission.ss"')&&permission_colon_telephony_question_(b))?(plt.Kernel.setLastLoc('offset=3944 line=109 span=49 id="permission.ss"')&&plt.Kernel.list([(plt.types.String.makeInstance("android.permission.ACCESS_COARSE_UPDATES"))])):((plt.Kernel.setLastLoc('offset=4000 line=110 span=36 id="permission.ss"')&&permission_colon_wake_dash_lock_question_(b))?(plt.Kernel.setLastLoc('offset=4042 line=111 span=37 id="permission.ss"')&&plt.Kernel.list([(plt.types.String.makeInstance("android.permission.WAKE_LOCK"))])):((plt.Kernel.setLastLoc('offset=4086 line=112 span=41 id="permission.ss"')&&permission_colon_open_dash_image_dash_url_question_(b))?(plt.Kernel.setLastLoc('offset=4133 line=113 span=6 id="permission.ss"')&&plt.Kernel.list([])):(plt.Kernel.setLastLoc('offset=3381 line=94 span=760 id="permission.ss"')&&plt.Kernel.error((plt.types.Symbol.makeInstance("cond")),(plt.types.String.makeInstance('cond: fell out of cond around "offset=3381 line=94 span=760 id=\\"permission.ss\\""')))))))))))))};var permission_dash__greaterthan_on_dash_start_dash_code=function(b){return((plt.Kernel.setLastLoc('offset=4258 line=119 span=35 id="permission.ss"')&&permission_colon_location_question_(b))?(plt.types.String.makeInstance("plt.platform.Platform.getInstance().getLocationService().startService();\n      plt.platform.Platform.getInstance().getLocationService().addLocationChangeListener(listener);")):((plt.Kernel.setLastLoc('offset=4480 line=122 span=35 id="permission.ss"')&&permission_colon_send_dash_sms_question_(b))?(plt.types.String.makeInstance("")):((plt.Kernel.setLastLoc('offset=4530 line=124 span=38 id="permission.ss"')&&permission_colon_receive_dash_sms_question_(b))?(plt.types.String.makeInstance("")):((plt.Kernel.setLastLoc('offset=4583 line=126 span=31 id="permission.ss"')&&permission_colon_tilt_question_(b))?(plt.types.String.makeInstance("plt.platform.Platform.getInstance().getTiltService().startService();\n      plt.platform.Platform.getInstance().getTiltService().addOrientationChangeListener(listener);\n      plt.platform.Platform.getInstance().getTiltService().addAccelerationChangeListener(listener);\n      plt.platform.Platform.getInstance().getTiltService().addShakeListener(listener);")):((plt.Kernel.setLastLoc('offset=4988 line=132 span=32 id="permission.ss"')&&permission_colon_shake_question_(b))?(plt.types.String.makeInstance("")):((plt.Kernel.setLastLoc('offset=5042 line=135 span=35 id="permission.ss"')&&permission_colon_internet_question_(b))?(plt.types.String.makeInstance("")):((plt.Kernel.setLastLoc('offset=5092 line=137 span=36 id="permission.ss"')&&permission_colon_telephony_question_(b))?(plt.types.String.makeInstance("")):((plt.Kernel.setLastLoc('offset=5143 line=139 span=36 id="permission.ss"')&&permission_colon_wake_dash_lock_question_(b))?(plt.types.String.makeInstance("")):((plt.Kernel.setLastLoc('offset=5194 line=141 span=41 id="permission.ss"')&&permission_colon_open_dash_image_dash_url_question_(b))?(plt.types.String.makeInstance("")):(plt.Kernel.setLastLoc('offset=4247 line=118 span=998 id="permission.ss"')&&plt.Kernel.error((plt.types.Symbol.makeInstance("cond")),(plt.types.String.makeInstance('cond: fell out of cond around "offset=4247 line=118 span=998 id=\\"permission.ss\\""')))))))))))))};var permission_dash__greaterthan_on_dash_pause_dash_code=function(b){return((plt.Kernel.setLastLoc('offset=5362 line=148 span=35 id="permission.ss"')&&permission_colon_location_question_(b))?(plt.types.String.makeInstance("plt.platform.Platform.getInstance().getLocationService().shutdownService();")):((plt.Kernel.setLastLoc('offset=5487 line=150 span=35 id="permission.ss"')&&permission_colon_send_dash_sms_question_(b))?(plt.types.String.makeInstance("")):((plt.Kernel.setLastLoc('offset=5537 line=152 span=38 id="permission.ss"')&&permission_colon_receive_dash_sms_question_(b))?(plt.types.String.makeInstance("")):((plt.Kernel.setLastLoc('offset=5590 line=154 span=31 id="permission.ss"')&&permission_colon_tilt_question_(b))?(plt.types.String.makeInstance("plt.platform.Platform.getInstance().getTiltService().shutdownService();")):((plt.Kernel.setLastLoc('offset=5707 line=156 span=32 id="permission.ss"')&&permission_colon_shake_question_(b))?(plt.types.String.makeInstance("")):((plt.Kernel.setLastLoc('offset=5754 line=158 span=35 id="permission.ss"')&&permission_colon_internet_question_(b))?(plt.types.String.makeInstance("")):((plt.Kernel.setLastLoc('offset=5804 line=160 span=36 id="permission.ss"')&&permission_colon_telephony_question_(b))?(plt.types.String.makeInstance("")):((plt.Kernel.setLastLoc('offset=5855 line=162 span=36 id="permission.ss"')&&permission_colon_wake_dash_lock_question_(b))?(plt.types.String.makeInstance("")):((plt.Kernel.setLastLoc('offset=5906 line=164 span=41 id="permission.ss"')&&permission_colon_open_dash_image_dash_url_question_(b))?(plt.types.String.makeInstance("")):(plt.Kernel.setLastLoc('offset=5351 line=147 span=606 id="permission.ss"')&&plt.Kernel.error((plt.types.Symbol.makeInstance("cond")),(plt.types.String.makeInstance('cond: fell out of cond around "offset=5351 line=147 span=606 id=\\"permission.ss\\""')))))))))))))};var permission_dash__greaterthan_on_dash_destroy_dash_code=function(b){return((plt.Kernel.setLastLoc('offset=6078 line=171 span=35 id="permission.ss"')&&permission_colon_location_question_(b))?(plt.types.String.makeInstance("plt.platform.Platform.getInstance().getLocationService().shutdownService();")):((plt.Kernel.setLastLoc('offset=6203 line=173 span=35 id="permission.ss"')&&permission_colon_send_dash_sms_question_(b))?(plt.types.String.makeInstance("")):((plt.Kernel.setLastLoc('offset=6253 line=175 span=38 id="permission.ss"')&&permission_colon_receive_dash_sms_question_(b))?(plt.types.String.makeInstance("")):((plt.Kernel.setLastLoc('offset=6306 line=177 span=31 id="permission.ss"')&&permission_colon_tilt_question_(b))?(plt.types.String.makeInstance("plt.platform.Platform.getInstance().getTiltService().shutdownService();")):((plt.Kernel.setLastLoc('offset=6423 line=179 span=32 id="permission.ss"')&&permission_colon_shake_question_(b))?(plt.types.String.makeInstance("")):((plt.Kernel.setLastLoc('offset=6470 line=181 span=35 id="permission.ss"')&&permission_colon_internet_question_(b))?(plt.types.String.makeInstance("")):((plt.Kernel.setLastLoc('offset=6520 line=183 span=36 id="permission.ss"')&&permission_colon_telephony_question_(b))?(plt.types.String.makeInstance("")):((plt.Kernel.setLastLoc('offset=6571 line=185 span=36 id="permission.ss"')&&permission_colon_wake_dash_lock_question_(b))?(plt.types.String.makeInstance("")):((plt.Kernel.setLastLoc('offset=6622 line=187 span=41 id="permission.ss"')&&permission_colon_open_dash_image_dash_url_question_(b))?(plt.types.String.makeInstance("")):(plt.Kernel.setLastLoc('offset=6067 line=170 span=606 id="permission.ss"')&&plt.Kernel.error((plt.types.Symbol.makeInstance("cond")),(plt.types.String.makeInstance('cond: fell out of cond around "offset=6067 line=170 span=606 id=\\"permission.ss\\""')))))))))))))};(function(){((function(b){PERMISSION_colon_LOCATION=(plt.Kernel.setLastLoc('offset=857 line=28 span=26 id="permission.ss"')&&make_dash_permission_colon_location());PERMISSION_colon_SEND_dash_SMS=(plt.Kernel.setLastLoc('offset=913 line=29 span=26 id="permission.ss"')&&make_dash_permission_colon_send_dash_sms());PERMISSION_colon_RECEIVE_dash_SMS=(plt.Kernel.setLastLoc('offset=972 line=30 span=26 id="permission.ss"')&&make_dash_permission_colon_send_dash_sms());PERMISSION_colon_TILT=(plt.Kernel.setLastLoc('offset=1024 line=31 span=22 id="permission.ss"')&&make_dash_permission_colon_tilt());PERMISSION_colon_SHAKE=(plt.Kernel.setLastLoc('offset=1073 line=32 span=23 id="permission.ss"')&&make_dash_permission_colon_shake());PERMISSION_colon_INTERNET=(plt.Kernel.setLastLoc('offset=1126 line=33 span=26 id="permission.ss"')&&make_dash_permission_colon_internet());PERMISSION_colon_TELEPHONY=(plt.Kernel.setLastLoc('offset=1183 line=34 span=27 id="permission.ss"')&&make_dash_permission_colon_telephony());PERMISSION_colon_WAKE_dash_LOCK=(plt.Kernel.setLastLoc('offset=1241 line=35 span=27 id="permission.ss"')&&make_dash_permission_colon_wake_dash_lock())}))(arguments[0]||plt.Kernel.identity)})();var plt=plt||{};(function(){plt.permission={};var i=function(k){return permission_colon_location_question_(k)};var g=function(k){return permission_colon_send_dash_sms_question_(k)};var j=function(k){return permission_colon_receive_dash_sms_question_(k)};var b=function(k){return permission_colon_tilt_question_(k)};var c=function(k){return permission_colon_shake_question_(k)};var h=function(k){return permission_colon_internet_question_(k)};var d=function(k){return permission_colon_telephony_question_(k)};var e=function(k){return permission_colon_wake_dash_lock_question_(k)};var f=function(k){return permission_colon_open_dash_image_dash_url_question_(k)};plt.permission.startupAllPermissions=function(k,l){if(k.length>0){var m=k.pop();plt.permission._runStartupCode(m,k,l)}else{l()}};plt.permission._runStartupCode=function(s,l,o){var k=plt.platform.Platform.getInstance();var n=plt.world.stimuli;var r=function(){setTimeout(function(){plt.permission.startupAllPermissions(l,o)},0)};if(i(s)){k.getLocationService().startService();k.getLocationService().addLocationChangeListener(function(t,p){n.onLocation(t,p)});r()}else{if(g(s)){r()}else{if(j(s)){r()}else{if(b(s)){k.getTiltService().startService();k.getTiltService().addOrientationChangeListener(function(t,u,p){n.onTilt(t,u,p)});k.getTiltService().addAccelerationChangeListener(function(p,u,t){n.onAcceleration(p,u,t)});r()}else{if(c(s)){k.getShakeService().startService();k.getShakeService().addListener(function(){n.onShake()});r()}else{if(h(s)){r()}else{if(d(s)){r()}else{if(e(s)){r()}else{if(f(s)){var q=permission_colon_open_dash_image_dash_url_dash_url(s);var m=new Image();m.onload=function(){plt.world.Kernel.FileImage.installInstance(q,m);r()};m.onerror=function(){m.onerror=function(){r()};m.src="http://www.wescheme.org/images/broken.png"};m.src=q}else{r()}}}}}}}}}};plt.permission.runShutdownCode=function(l){var k=plt.platform.Platform.getInstance();if(i(l)){k.getLocationService().shutdownService()}if(g(l)){}if(j(l)){}if(b(l)){k.getTiltService().shutdownService()}if(c(l)){}if(h(l)){}if(d(l)){}if(e(l)){}if(f(l)){}}})();